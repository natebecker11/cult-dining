"use strict";(self.webpackChunkcult_dining=self.webpackChunkcult_dining||[]).push([[792],{344:()=>{function it(n){return"function"==typeof n}function ju(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Hu=ju(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function oc(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class rr{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(it(r))try{r()}catch(s){e=s instanceof Hu?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Mw(s)}catch(o){e=e??[],o instanceof Hu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Hu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Mw(e);else{if(e instanceof rr){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&oc(t,e)}remove(e){const{_finalizers:t}=this;t&&oc(t,e),e instanceof rr&&e._removeParent(this)}}rr.EMPTY=(()=>{const n=new rr;return n.closed=!0,n})();const Sw=rr.EMPTY;function Aw(n){return n instanceof rr||n&&"closed"in n&&it(n.remove)&&it(n.add)&&it(n.unsubscribe)}function Mw(n){it(n)?n():n.unsubscribe()}const Ji={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Uu={setTimeout(n,e,...t){const{delegate:r}=Uu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Uu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Pw(n){Uu.setTimeout(()=>{const{onUnhandledError:e}=Ji;if(!e)throw n;e(n)})}function Rw(){}const HF=zp("C",void 0,void 0);function zp(n,e,t){return{kind:n,value:e,error:t}}let Zi=null;function $u(n){if(Ji.useDeprecatedSynchronousErrorHandling){const e=!Zi;if(e&&(Zi={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Zi;if(Zi=null,t)throw r}}else n()}class Gp extends rr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Aw(e)&&e.add(this)):this.destination=KF}static create(e,t,r){return new ac(e,t,r)}next(e){this.isStopped?Wp(function $F(n){return zp("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Wp(function UF(n){return zp("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Wp(HF,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const GF=Function.prototype.bind;function qp(n,e){return GF.call(n,e)}class qF{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){zu(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){zu(r)}else zu(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zu(t)}}}class ac extends Gp{constructor(e,t,r){let i;if(super(),it(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ji.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qp(e.next,s),error:e.error&&qp(e.error,s),complete:e.complete&&qp(e.complete,s)}):i=e}this.destination=new qF(i)}}function zu(n){Ji.useDeprecatedSynchronousErrorHandling?function zF(n){Ji.useDeprecatedSynchronousErrorHandling&&Zi&&(Zi.errorThrown=!0,Zi.error=n)}(n):Pw(n)}function Wp(n,e){const{onStoppedNotification:t}=Ji;t&&Uu.setTimeout(()=>t(n,e))}const KF={closed:!0,next:Rw,error:function WF(n){throw n},complete:Rw},Kp="function"==typeof Symbol&&Symbol.observable||"@@observable";function Qp(n){return n}let dn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function YF(n){return n&&n instanceof Gp||function QF(n){return n&&it(n.next)&&it(n.error)&&it(n.complete)}(n)&&Aw(n)}(t)?t:new ac(t,r,i);return $u(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Ow(r))((i,s)=>{const o=new ac({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Kp](){return this}pipe(...t){return function Nw(n){return 0===n.length?Qp:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=Ow(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Ow(n){var e;return null!==(e=n??Ji.Promise)&&void 0!==e?e:Promise}const XF=ju(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Gu=(()=>{class n extends dn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new kw(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new XF}next(t){$u(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){$u(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){$u(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Sw:(this.currentObservers=null,s.push(t),new rr(()=>{this.currentObservers=null,oc(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new dn;return t.source=this,t}}return n.create=(e,t)=>new kw(e,t),n})();class kw extends Gu{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Sw}}function es(n){return e=>{if(function JF(n){return it(n?.lift)}(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ts(n,e,t,r,i){return new ZF(n,e,t,r,i)}class ZF extends Gp{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function li(n){return this instanceof li?(this.v=n,this):new li(n)}function Bw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Zp(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const jw=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Hw(n){return it(n?.then)}function Uw(n){return it(n[Kp])}function $w(n){return Symbol.asyncIterator&&it(n?.[Symbol.asyncIterator])}function zw(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Gw=function xV(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function qw(n){return it(n?.[Gw])}function Ww(n){return function Lw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(p){return function(m){return Promise.resolve(m).then(p,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(p,m){r[p]&&(i[p]=function(y){return new Promise(function(v,I){s.push([p,y,v,I])>1||c(p,y)})},m&&(i[p]=m(i[p])))}function c(p,m){try{!function l(p){p.value instanceof li?Promise.resolve(p.value.v).then(u,h):f(s[0][2],p)}(r[p](m))}catch(y){f(s[0][3],y)}}function u(p){c("next",p)}function h(p){c("throw",p)}function f(p,m){p(m),s.shift(),s.length&&c(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield li(t.read());if(i)return yield li(void 0);yield yield li(r)}}finally{t.releaseLock()}})}function Kw(n){return it(n?.getReader)}function Cr(n){if(n instanceof dn)return n;if(null!=n){if(Uw(n))return function SV(n){return new dn(e=>{const t=n[Kp]();if(it(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(jw(n))return function AV(n){return new dn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Hw(n))return function MV(n){return new dn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Pw)})}(n);if($w(n))return Qw(n);if(qw(n))return function PV(n){return new dn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Kw(n))return function RV(n){return Qw(Ww(n))}(n)}throw zw(n)}function Qw(n){return new dn(e=>{(function NV(n,e){var t,r,i,s;return function Fw(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Bw(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ui(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Yw(n,e,t=1/0){return it(e)?Yw((r,i)=>function eV(n,e){return es((t,r)=>{let i=0;t.subscribe(ts(r,s=>{r.next(n.call(e,s,i++))}))})}((s,o)=>e(r,s,i,o))(Cr(n(r,i))),t):("number"==typeof e&&(t=e),es((r,i)=>function OV(n,e,t,r,i,s,o,a){const c=[];let l=0,u=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},p=y=>l<r?m(y):c.push(y),m=y=>{s&&e.next(y),l++;let v=!1;Cr(t(y,u++)).subscribe(ts(e,I=>{i?.(I),s?p(I):e.next(I)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<r;){const I=c.shift();o?ui(e,o,()=>m(I)):m(I)}f()}catch(I){e.error(I)}}))};return n.subscribe(ts(e,p,()=>{h=!0,f()})),()=>{a?.()}}(r,i,n,t)))}const Xw=new dn(n=>n.complete());function tg(n){return n[n.length-1]}function Jw(n){return function VV(n){return n&&it(n.schedule)}(tg(n))?n.pop():void 0}function Zw(n,e=0){return es((t,r)=>{t.subscribe(ts(r,i=>ui(r,n,()=>r.next(i),e),()=>ui(r,n,()=>r.complete(),e),i=>ui(r,n,()=>r.error(i),e)))})}function eI(n,e=0){return es((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function tI(n,e){if(!n)throw new Error("Iterable cannot be null");return new dn(t=>{ui(t,e,()=>{const r=n[Symbol.asyncIterator]();ui(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function nI(n,e){return e?function zV(n,e){if(null!=n){if(Uw(n))return function BV(n,e){return Cr(n).pipe(eI(e),Zw(e))}(n,e);if(jw(n))return function HV(n,e){return new dn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Hw(n))return function jV(n,e){return Cr(n).pipe(eI(e),Zw(e))}(n,e);if($w(n))return tI(n,e);if(qw(n))return function UV(n,e){return new dn(t=>{let r;return ui(t,e,()=>{r=n[Gw](),ui(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>it(r?.return)&&r.return()})}(n,e);if(Kw(n))return function $V(n,e){return tI(Ww(n),e)}(n,e)}throw zw(n)}(n,e):Cr(n)}function GV(...n){const e=Jw(n),t=function LV(n,e){return"number"==typeof tg(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Cr(r[0]):function kV(n=1/0){return Yw(Qp,n)}(t)(nI(r,e)):Xw}class qV extends Gu{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function rI(n={}){const{connector:e=(()=>new Gu),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,u=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},p=()=>{f(),o=c=void 0,u=h=!1},m=()=>{const y=o;p(),y?.unsubscribe()};return es((y,v)=>{l++,!h&&!u&&f();const I=c=c??e();v.add(()=>{l--,0===l&&!h&&!u&&(a=ng(m,i))}),I.subscribe(v),!o&&l>0&&(o=new ac({next:E=>I.next(E),error:E=>{h=!0,f(),a=ng(p,t,E),I.error(E)},complete:()=>{u=!0,f(),a=ng(p,r),I.complete()}}),Cr(y).subscribe(o))})(s)}}function ng(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new ac({next:()=>{r.unsubscribe(),n()}});return Cr(e(...t)).subscribe(r)}function YV(n,e){return n===e}function Ce(n){for(let e in n)if(n[e]===Ce)return e;throw Error("Could not find renamed property on target object.")}function wt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(wt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function rg(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const XV=Ce({__forward_ref__:Ce});function ig(n){return n.__forward_ref__=ig,n.toString=function(){return wt(this())},n}function Z(n){return function sg(n){return"function"==typeof n&&n.hasOwnProperty(XV)&&n.__forward_ref__===ig}(n)?n():n}function og(n){return n&&!!n.\u0275providers}class W extends Error{constructor(e,t){super(function Wu(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function te(n){return"string"==typeof n?n:null==n?"":String(n)}function ag(n,e){throw new W(-201,!1)}function On(n,e){null==n&&function Y(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rs(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ku(n){return sI(n,Yu)||sI(n,oI)}function sI(n,e){return n.hasOwnProperty(e)?n[e]:null}function Qu(n){return n&&(n.hasOwnProperty(cg)||n.hasOwnProperty(iL))?n[cg]:null}const Yu=Ce({\u0275prov:Ce}),cg=Ce({\u0275inj:Ce}),oI=Ce({ngInjectableDef:Ce}),iL=Ce({ngInjectorDef:Ce});var fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fe||{});let lg;function hn(n){const e=lg;return lg=n,e}function cI(n,e,t){const r=Ku(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&fe.Optional?null:void 0!==e?e:void ag(wt(n))}const ke=globalThis;class ee{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=xe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const cc={},pg="__NG_DI_FLAG__",Xu="ngTempTokenPath",aL=/\n/gm,uI="__source";let oo;function di(n){const e=oo;return oo=n,e}function uL(n,e=fe.Default){if(void 0===oo)throw new W(-203,!1);return null===oo?cI(n,void 0,e):oo.get(n,e&fe.Optional?null:void 0,e)}function pe(n,e=fe.Default){return(function aI(){return lg}()||uL)(Z(n),e)}function Fe(n,e=fe.Default){return pe(n,Ju(e))}function Ju(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gg(n){const e=[];for(let t=0;t<n.length;t++){const r=Z(n[t]);if(Array.isArray(r)){if(0===r.length)throw new W(900,!1);let i,s=fe.Default;for(let o=0;o<r.length;o++){const a=r[o],c=dL(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(pe(i,s))}else e.push(pe(r))}return e}function lc(n,e){return n[pg]=e,n.prototype[pg]=e,n}function dL(n){return n[pg]}function xr(n){return{toString:n}.toString()}var Zu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Zu||{}),zn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(zn||{});const ir={},Ee=[],ed=Ce({\u0275cmp:Ce}),mg=Ce({\u0275dir:Ce}),_g=Ce({\u0275pipe:Ce}),hI=Ce({\u0275mod:Ce}),Sr=Ce({\u0275fac:Ce}),uc=Ce({__NG_ELEMENT_ID__:Ce}),fI=Ce({__NG_ENV_ID__:Ce});function pI(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function yg(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];mI(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function gI(n){return 3===n||4===n||6===n}function mI(n){return 64===n.charCodeAt(0)}function dc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||_I(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function _I(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const yI="ng-template";function pL(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==pI(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function vI(n){return 4===n.type&&n.value!==yI}function gL(n,e,t){return e===(4!==n.type||t?n.value:yI)}function mL(n,e,t){let r=4;const i=n.attrs||[],s=function vL(n){for(let e=0;e<n.length;e++)if(gI(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!gL(n,c,t)||""===c&&1===e.length){if(Gn(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!pL(n.attrs,l,t)){if(Gn(r))return!1;o=!0}continue}const h=_L(8&r?"class":c,i,vI(n),t);if(-1===h){if(Gn(r))return!1;o=!0;continue}if(""!==l){let f;f=h>s?"":i[h+1].toLowerCase();const p=8&r?f:null;if(p&&-1!==pI(p,l,0)||2&r&&l!==f){if(Gn(r))return!1;o=!0}}}}else{if(!o&&!Gn(r)&&!Gn(c))return!1;if(o&&Gn(c))continue;o=!1,r=c|1&r}}return Gn(r)||o}function Gn(n){return 0==(1&n)}function _L(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function bL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function bI(n,e,t=!1){for(let r=0;r<e.length;r++)if(mL(n,e[r],t))return!0;return!1}function EI(n,e){return n?":not("+e.trim()+")":e}function wL(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Gn(o)&&(e+=EI(s,i),i=""),r=o,s=s||!Gn(r);t++}return""!==i&&(e+=EI(s,i)),e}function vg(n){return xr(()=>{const e=II(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Zu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||zn.Emulated,styles:n.styles||Ee,_:null,schemas:n.schemas||null,tView:null,id:""};DI(t);const r=n.dependencies;return t.directiveDefs=td(r,!1),t.pipeDefs=td(r,!0),t.id=function ML(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function CL(n){return ge(n)||Pt(n)}function xL(n){return null!==n}function ao(n){return xr(()=>({type:n.type,bootstrap:n.bootstrap||Ee,declarations:n.declarations||Ee,imports:n.imports||Ee,exports:n.exports||Ee,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function wI(n,e){if(null==n)return ir;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function kn(n){return xr(()=>{const e=II(n);return DI(e),e})}function ge(n){return n[ed]||null}function Pt(n){return n[mg]||null}function Zt(n){return n[_g]||null}function II(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ir,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ee,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wI(n.inputs,e),outputs:wI(n.outputs)}}function DI(n){n.features?.forEach(e=>e(n))}function td(n,e){if(!n)return null;const t=e?Zt:CL;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(xL)}const st=0,G=1,ie=2,Qe=3,qn=4,fc=5,jt=6,co=7,ht=8,hi=9,lo=10,ne=11,pc=12,TI=13,uo=14,ft=15,gc=16,ho=17,sr=18,mc=19,CI=20,fi=21,Ar=22,_c=23,yc=24,ce=25,bg=1,xI=2,or=7,fo=9,Rt=11;function pn(n){return Array.isArray(n)&&"object"==typeof n[bg]}function en(n){return Array.isArray(n)&&!0===n[bg]}function Eg(n){return 0!=(4&n.flags)}function is(n){return n.componentOffset>-1}function rd(n){return 1==(1&n.flags)}function Wn(n){return!!n.template}function wg(n){return 0!=(512&n[ie])}function ss(n,e){return n.hasOwnProperty(Sr)?n[Sr]:null}let Nt=null,id=!1;function Fn(n){const e=Nt;return Nt=n,e}const MI={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function RI(n){if(!bc(n)||n.dirty){if(!n.producerMustRecompute(n)&&!kI(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function OI(n){n.dirty=!0,function NI(n){if(void 0===n.liveConsumerNode)return;const e=id;id=!0;try{for(const t of n.liveConsumerNode)t.dirty||OI(t)}finally{id=e}}(n),n.consumerMarkedDirty?.(n)}function Dg(n){return n&&(n.nextProducerIndex=0),Fn(n)}function Tg(n,e){if(Fn(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(bc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)sd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function kI(n){po(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(RI(t),r!==t.version))return!0}return!1}function FI(n){if(po(n),bc(n))for(let e=0;e<n.producerNode.length;e++)sd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function sd(n,e){if(function LI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),po(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)sd(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];po(i),i.producerIndexOfThis[r]=e}}function bc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function po(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let BI=null;const $I=()=>{},$L=(()=>({...MI,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:$I}))();class zL{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function zI(n){return n.type.prototype.ngOnChanges&&(n.setInput=qL),GL}function GL(){const n=qI(this),e=n?.current;if(e){const t=n.previous;if(t===ir)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function qL(n,e,t,r){const i=this.declaredInputs[t],s=qI(n)||function WL(n,e){return n[GI]=e}(n,{previous:ir,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new zL(c&&c.currentValue,e,a===ir),n[r]=e}const GI="__ngSimpleChanges__";function qI(n){return n[GI]||null}const ar=function(n,e,t){};function Ve(n){for(;Array.isArray(n);)n=n[st];return n}function ad(n,e){return Ve(e[n])}function gn(n,e){return Ve(e[n.index])}function QI(n,e){return n.data[e]}function Tn(n,e){const t=e[n];return pn(t)?t:t[st]}function gi(n,e){return null==e?null:n[e]}function YI(n){n[ho]=0}function ZL(n){1024&n[ie]||(n[ie]|=1024,JI(n,1))}function XI(n){1024&n[ie]&&(n[ie]&=-1025,JI(n,-1))}function JI(n,e){let t=n[Qe];if(null===t)return;t[fc]+=e;let r=t;for(t=t[Qe];null!==t&&(1===e&&1===r[fc]||-1===e&&0===r[fc]);)t[fc]+=e,r=t,t=t[Qe]}const X={lFrame:u0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function t0(){return X.bindingsEnabled}function L(){return X.lFrame.lView}function me(){return X.lFrame.tView}function Ot(){let n=n0();for(;null!==n&&64===n.type;)n=n.parent;return n}function n0(){return X.lFrame.currentTNode}function cr(n,e){const t=X.lFrame;t.currentTNode=n,t.isParent=e}function Mg(){return X.lFrame.isParent}function Pg(){X.lFrame.isParent=!1}function _o(){return X.lFrame.bindingIndex++}function Pr(n){const e=X.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function f2(n,e){const t=X.lFrame;t.bindingIndex=t.bindingRootIndex=n,Rg(e)}function Rg(n){X.lFrame.currentDirectiveIndex=n}function Og(n){X.lFrame.currentQueryIndex=n}function g2(n){const e=n[G];return 2===e.type?e.declTNode:1===e.type?n[jt]:null}function c0(n,e,t){if(t&fe.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&fe.Host||(i=g2(s),null===i||(s=s[uo],10&i.type))););if(null===i)return!1;e=i,n=s}const r=X.lFrame=l0();return r.currentTNode=e,r.lView=n,!0}function kg(n){const e=l0(),t=n[G];X.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function l0(){const n=X.lFrame,e=null===n?null:n.child;return null===e?u0(n):e}function u0(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function d0(){const n=X.lFrame;return X.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const h0=d0;function Fg(){const n=d0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function nn(){return X.lFrame.selectedIndex}function os(n){X.lFrame.selectedIndex=n}let p0=!0;function cd(){return p0}function mi(n){p0=n}function ld(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function ud(n,e,t){g0(n,e,3,t)}function dd(n,e,t,r){(3&n[ie])===t&&g0(n,e,t,r)}function Vg(n,e){let t=n[ie];(3&t)===e&&(t&=8191,t+=1,n[ie]=t)}function g0(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[ho]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[ho]+=65536),(a<s||-1==s)&&(I2(n,t,e,c),n[ho]=(4294901760&n[ho])+c+2),c++}function m0(n,e){ar(4,n,e);const t=Fn(null);try{e.call(n)}finally{Fn(t),ar(5,n,e)}}function I2(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[ie]>>13<n[ho]>>16&&(3&n[ie])===e&&(n[ie]+=8192,m0(a,s)):m0(a,s)}const yo=-1;class wc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Bg(n){return n!==yo}function Ic(n){return 32767&n}function Dc(n,e){let t=function x2(n){return n>>16}(n),r=e;for(;t>0;)r=r[uo],t--;return r}let jg=!0;function hd(n){const e=jg;return jg=n,e}const _0=255,y0=5;let S2=0;const lr={};function fd(n,e){const t=v0(n,e);if(-1!==t)return t;const r=e[G];r.firstCreatePass&&(n.injectorIndex=e.length,Hg(r.data,n),Hg(e,null),Hg(r.blueprint,null));const i=pd(n,e),s=n.injectorIndex;if(Bg(i)){const o=Ic(i),a=Dc(i,e),c=a[G].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Hg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function v0(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function pd(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=C0(i),null===r)return yo;if(t++,i=i[uo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return yo}function Ug(n,e,t){!function A2(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(uc)&&(r=t[uc]),null==r&&(r=t[uc]=S2++);const i=r&_0;e.data[n+(i>>y0)]|=1<<i}(n,e,t)}function b0(n,e,t){if(t&fe.Optional||void 0!==n)return n;ag()}function E0(n,e,t,r){if(t&fe.Optional&&void 0===r&&(r=null),!(t&(fe.Self|fe.Host))){const i=n[hi],s=hn(void 0);try{return i?i.get(e,r,t&fe.Optional):cI(e,r,t&fe.Optional)}finally{hn(s)}}return b0(r,0,t)}function w0(n,e,t,r=fe.Default,i){if(null!==n){if(2048&e[ie]&&!(r&fe.Self)){const o=function F2(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ie]&&!(512&o[ie]);){const a=I0(s,o,t,r|fe.Self,lr);if(a!==lr)return a;let c=s.parent;if(!c){const l=o[CI];if(l){const u=l.get(t,lr,r);if(u!==lr)return u}c=C0(o),o=o[uo]}s=c}return i}(n,e,t,r,lr);if(o!==lr)return o}const s=I0(n,e,t,r,lr);if(s!==lr)return s}return E0(e,t,r,i)}function I0(n,e,t,r,i){const s=function R2(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(uc)?n[uc]:void 0;return"number"==typeof e?e>=0?e&_0:O2:e}(t);if("function"==typeof s){if(!c0(e,n,r))return r&fe.Host?b0(i,0,r):E0(e,t,r,i);try{let o;if(o=s(r),null!=o||r&fe.Optional)return o;ag()}finally{h0()}}else if("number"==typeof s){let o=null,a=v0(n,e),c=yo,l=r&fe.Host?e[ft][jt]:null;for((-1===a||r&fe.SkipSelf)&&(c=-1===a?pd(n,e):e[a+8],c!==yo&&T0(r,!1)?(o=e[G],a=Ic(c),e=Dc(c,e)):a=-1);-1!==a;){const u=e[G];if(D0(s,a,u.data)){const h=P2(a,e,t,o,r,l);if(h!==lr)return h}c=e[a+8],c!==yo&&T0(r,e[G].data[a+8]===l)&&D0(s,a,e)?(o=u,a=Ic(c),e=Dc(c,e)):a=-1}}return i}function P2(n,e,t,r,i,s){const o=e[G],a=o.data[n+8],u=function gd(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,f=i?a+u:n.directiveEnd;for(let p=r?a:a+u;p<f;p++){const m=o[p];if(p<c&&t===m||p>=c&&m.type===t)return p}if(i){const p=o[c];if(p&&Wn(p)&&p.type===t)return c}return null}(a,o,t,null==r?is(a)&&jg:r!=o&&0!=(3&a.type),i&fe.Host&&s===a);return null!==u?as(e,o,u,a):lr}function as(n,e,t,r){let i=n[t];const s=e.data;if(function D2(n){return n instanceof wc}(i)){const o=i;o.resolving&&function JV(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new W(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Te(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():te(n)}(s[t]));const a=hd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?hn(o.injectImpl):null;c0(n,r,fe.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function w2(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=zI(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&hn(l),hd(a),o.resolving=!1,h0()}}return i}function D0(n,e,t){return!!(t[e+(n>>y0)]&1<<n)}function T0(n,e){return!(n&fe.Self||n&fe.Host&&e)}class rn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return w0(this._tNode,this._lView,e,Ju(r),t)}}function O2(){return new rn(Ot(),L())}function C0(n){const e=n[G],t=e.type;return 2===t?e.declTNode:1===t?n[jt]:null}const bo="__parameters__";function wo(n,e,t){return xr(()=>{const r=function Gg(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,l,u){const h=c.hasOwnProperty(bo)?c[bo]:Object.defineProperty(c,bo,{value:[]})[bo];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Do(n,e){n.forEach(t=>Array.isArray(t)?Do(t,e):e(t))}function S0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function md(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Cn(n,e,t){let r=To(n,e);return r>=0?n[1|r]=t:(r=~r,function $2(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function qg(n,e){const t=To(n,e);if(t>=0)return n[1|t]}function To(n,e){return function A0(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Kg=lc(wo("Optional"),8),Qg=lc(wo("SkipSelf"),4);function wd(n){return 128==(128&n.flags)}var _i=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_i||{});const uB=/^>|^->|<!--|-->|--!>|<!-$/g,dB=/(<|>)/g,hB="\u200b$1\u200b";const Zg=new Map;let fB=0;const tm="__ngContext__";function Ht(n,e){pn(e)?(n[tm]=e[mc],function gB(n){Zg.set(n[mc],n)}(e)):n[tm]=e}let nm;function rm(n,e){return nm(n,e)}function Mc(n){const e=n[Qe];return en(e)?e[Qe]:e}function Q0(n){return X0(n[pc])}function Y0(n){return X0(n[qn])}function X0(n){for(;null!==n&&!en(n);)n=n[qn];return n}function So(n,e,t,r,i){if(null!=r){let s,o=!1;en(r)?s=r:pn(r)&&(o=!0,r=r[st]);const a=Ve(r);0===n&&null!==t?null==i?tD(e,t,a):cs(e,t,a,i||null,!0):1===n&&null!==t?cs(e,t,a,i||null,!0):2===n?function Ad(n,e,t){const r=xd(n,e);r&&function OB(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function VB(n,e,t,r,i){const s=t[or];s!==Ve(t)&&So(e,n,r,s,i);for(let a=Rt;a<t.length;a++){const c=t[a];Rc(c[G],c,n,e,r,s)}}(e,n,s,t,i)}}function im(n,e){return n.createComment(function H0(n){return n.replace(uB,e=>e.replace(dB,hB))}(e))}function Td(n,e,t){return n.createElement(e,t)}function Z0(n,e){const t=n[fo],r=t.indexOf(e);XI(e),t.splice(r,1)}function Cd(n,e){if(n.length<=Rt)return;const t=Rt+e,r=n[t];if(r){const i=r[gc];null!==i&&i!==n&&Z0(i,r),e>0&&(n[t-1][qn]=r[qn]);const s=md(n,Rt+e);!function CB(n,e){Rc(n,e,e[ne],2,null,null),e[st]=null,e[jt]=null}(r[G],r);const o=s[sr];null!==o&&o.detachView(s[G]),r[Qe]=null,r[qn]=null,r[ie]&=-129}return r}function sm(n,e){if(!(256&e[ie])){const t=e[ne];e[_c]&&FI(e[_c]),e[yc]&&FI(e[yc]),t.destroyNode&&Rc(n,e,t,3,null,null),function AB(n){let e=n[pc];if(!e)return om(n[G],n);for(;e;){let t=null;if(pn(e))t=e[pc];else{const r=e[Rt];r&&(t=r)}if(!t){for(;e&&!e[qn]&&e!==n;)pn(e)&&om(e[G],e),e=e[Qe];null===e&&(e=n),pn(e)&&om(e[G],e),t=e&&e[qn]}e=t}}(e)}}function om(n,e){if(!(256&e[ie])){e[ie]&=-129,e[ie]|=256,function NB(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof wc)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];ar(4,a,c);try{c.call(a)}finally{ar(5,a,c)}}else{ar(4,i,s);try{s.call(i)}finally{ar(5,i,s)}}}}}(n,e),function RB(n,e){const t=n.cleanup,r=e[co];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[co]=null);const i=e[fi];if(null!==i){e[fi]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[G].type&&e[ne].destroy();const t=e[gc];if(null!==t&&en(e[Qe])){t!==e[Qe]&&Z0(t,e);const r=e[sr];null!==r&&r.detachView(n)}!function mB(n){Zg.delete(n[mc])}(e)}}function am(n,e,t){return function eD(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[st];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===zn.None||s===zn.Emulated)return null}return gn(r,t)}}(n,e.parent,t)}function cs(n,e,t,r,i){n.insertBefore(e,t,r,i)}function tD(n,e,t){n.appendChild(e,t)}function nD(n,e,t,r,i){null!==r?cs(n,e,t,r,i):tD(n,e,t)}function xd(n,e){return n.parentNode(e)}let cm,hm,sD=function iD(n,e,t){return 40&n.type?gn(n,t):null};function Sd(n,e,t,r){const i=am(n,r,e),s=e[ne],a=function rD(n,e,t){return sD(n,e,t)}(r.parent||e[jt],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)nD(s,i,t[c],a,!1);else nD(s,i,t,a,!1);void 0!==cm&&cm(s,r,e,t,i)}function Pc(n,e){if(null!==e){const t=e.type;if(3&t)return gn(e,n);if(4&t)return lm(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Pc(n,r);{const i=n[e.index];return en(i)?lm(-1,i):Ve(i)}}if(32&t)return rm(e,n)()||Ve(n[e.index]);{const r=aD(n,e);return null!==r?Array.isArray(r)?r[0]:Pc(Mc(n[ft]),r):Pc(n,e.next)}}return null}function aD(n,e){return null!==e?n[ft][jt].projection[e.projection]:null}function lm(n,e){const t=Rt+n+1;if(t<e.length){const r=e[t],i=r[G].firstChild;if(null!==i)return Pc(r,i)}return e[or]}function um(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&Ht(Ve(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)um(n,e,t.child,r,i,s,!1),So(e,n,i,a,s);else if(32&c){const l=rm(t,r);let u;for(;u=l();)So(e,n,i,u,s);So(e,n,i,a,s)}else 16&c?lD(n,e,r,t,i,s):So(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Rc(n,e,t,r,i,s){um(t,r,n.firstChild,e,i,s,!1)}function lD(n,e,t,r,i,s){const o=t[ft],c=o[jt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)So(e,n,i,c[l],s);else{let l=c;const u=o[Qe];wd(r)&&(l.flags|=128),um(n,e,l,u,i,s,!0)}}function uD(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function dD(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&yg(n,e,r),null!==i&&uD(n,e,i),null!==s&&function BB(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}class gD{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Nd=new ee("ENVIRONMENT_INITIALIZER"),DD=new ee("INJECTOR",-1),TD=new ee("INJECTOR_DEF_TYPES");class ym{get(e,t=cc){if(t===cc){const r=new Error(`NullInjectorError: No provider for ${wt(e)}!`);throw r.name="NullInjectorError",r}return t}}function fj(...n){return{\u0275providers:xD(0,n),\u0275fromNgModule:!0}}function xD(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Do(e,o=>{const a=o;Od(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&SD(i,s),t}function SD(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];vm(i,s=>{e(s,r)})}}function Od(n,e,t,r){if(!(n=Z(n)))return!1;let i=null,s=Qu(n);const o=!s&&ge(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=Qu(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)Od(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{Do(s.imports,u=>{Od(u,e,t,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&SD(l,e)}if(!a){const l=ss(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ee},i),e({provide:TD,useValue:i,multi:!0},i),e({provide:Nd,useValue:()=>pe(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const l=n;vm(c,u=>{e(u,l)})}}}return i!==n&&void 0!==n.providers}function vm(n,e){for(let t of n)og(t)&&(t=t.\u0275providers),Array.isArray(t)?vm(t,e):e(t)}const pj=Ce({provide:String,useValue:Ce});function bm(n){return null!==n&&"object"==typeof n&&pj in n}function ls(n){return"function"==typeof n}const Em=new ee("Set Injector scope."),kd={},mj={};let wm;function Fd(){return void 0===wm&&(wm=new ym),wm}class Nr{}class Ro extends Nr{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Dm(e,o=>this.processProvider(o)),this.records.set(DD,No(void 0,this)),i.has("environment")&&this.records.set(Nr,No(void 0,this));const s=this.records.get(Em);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(TD.multi,Ee,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=di(this),r=hn(void 0);try{return e()}finally{di(t),hn(r)}}get(e,t=cc,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(fI))return e[fI](this);r=Ju(r);const s=di(this),o=hn(void 0);try{if(!(r&fe.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function Ej(n){return"function"==typeof n||"object"==typeof n&&n instanceof ee}(e)&&Ku(e);c=l&&this.injectableDefInScope(l)?No(Im(e),kd):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&fe.Self?Fd():this.parent).get(e,t=r&fe.Optional&&t===cc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Xu]=a[Xu]||[]).unshift(wt(e)),s)throw a;return function hL(n,e,t,r){const i=n[Xu];throw e[uI]&&i.unshift(e[uI]),n.message=function fL(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=wt(e);if(Array.isArray(e))i=e.map(wt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):wt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(aL,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Xu]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{hn(o),di(s)}}resolveInjectorInitializers(){const e=di(this),t=hn(void 0);try{const i=this.get(Nd.multi,Ee,fe.Self);for(const s of i)s()}finally{di(e),hn(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){let t=ls(e=Z(e))?e:Z(e&&e.provide);const r=function yj(n){return bm(n)?No(void 0,n.useValue):No(function PD(n,e,t){let r;if(ls(n)){const i=Z(n);return ss(i)||Im(i)}if(bm(n))r=()=>Z(n.useValue);else if(function MD(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...gg(n.deps||[]));else if(function AD(n){return!(!n||!n.useExisting)}(n))r=()=>pe(Z(n.useExisting));else{const i=Z(n&&(n.useClass||n.provide));if(!function vj(n){return!!n.deps}(n))return ss(i)||Im(i);r=()=>new i(...gg(n.deps))}return r}(n),kd)}(e);if(ls(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=No(void 0,kd,!0),i.factory=()=>gg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===kd&&(t.value=mj,t.value=t.factory()),"object"==typeof t.value&&t.value&&function bj(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Z(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Im(n){const e=Ku(n),t=null!==e?e.factory:ss(n);if(null!==t)return t;if(n instanceof ee)throw new W(204,!1);if(n instanceof Function)return function _j(n){const e=n.length;if(e>0)throw function xc(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new W(204,!1);const t=function rL(n){return n&&(n[Yu]||n[oI])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new W(204,!1)}function No(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Dm(n,e){for(const t of n)Array.isArray(t)?Dm(t,e):t&&og(t)?Dm(t.\u0275providers,e):e(t)}const Vd=new ee("AppId",{providedIn:"root",factory:()=>wj}),wj="ng",RD=new ee("Platform Initializer"),Oo=new ee("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ND=new ee("CSP nonce",{providedIn:"root",factory:()=>function Mo(){if(void 0!==hm)return hm;if(typeof document<"u")return document;throw new W(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let OD=(n,e,t)=>null;function Rm(n,e,t=!1){return OD(n,e,t)}class Rj{}class VD{}class Oj{resolveComponentFactory(e){throw function Nj(n){const e=Error(`No component factory found for ${wt(n)}.`);return e.ngComponent=n,e}(e)}}let $d=(()=>{class n{static{this.NULL=new Oj}}return n})();function kj(){return Vo(Ot(),L())}function Vo(n,e){return new Lo(gn(n,e))}let Lo=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=kj}}return n})();class BD{}let Lj=(()=>{class n{static{this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>null})}}return n})();class km{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Bj=new km("16.2.12"),Fm={};function zD(n,e=null,t=null,r){const i=GD(n,e,t,r);return i.resolveInjectorInitializers(),i}function GD(n,e=null,t=null,r,i=new Set){const s=[t||Ee,fj(n)];return r=r||("object"==typeof n?void 0:wt(n)),new Ro(s,e||Fd(),r||null,i)}let ur=(()=>{class n{static{this.THROW_IF_NOT_FOUND=cc}static{this.NULL=new ym}static create(t,r){if(Array.isArray(t))return zD({name:""},r,t,"");{const i=t.name??"";return zD({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=xe({token:n,providedIn:"any",factory:()=>pe(DD)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function Lm(n){return n.ngOriginalError}class Or{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Lm(e);for(;t&&Lm(t);)t=Lm(t);return t||null}}function Bm(n){return e=>{setTimeout(n,void 0,e)}}const kr=class Wj extends Gu{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Bm(s),i&&(i=Bm(i)),o&&(o=Bm(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof rr&&e.add(a),a}};function WD(...n){}class ot{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kr(!1),this.onMicrotaskEmpty=new kr(!1),this.onStable=new kr(!1),this.onError=new kr(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Kj(){const n="function"==typeof ke.requestAnimationFrame;let e=ke[n?"requestAnimationFrame":"setTimeout"],t=ke[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Xj(n){const e=()=>{!function Yj(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ke,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Hm(n),n.isCheckStableRunning=!0,jm(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Hm(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function Zj(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return KD(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),QD(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return KD(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),QD(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Hm(n),jm(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ot.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(ot.isInAngularZone())throw new W(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Qj,WD,WD);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Qj={};function jm(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Hm(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function KD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function QD(n){n._nesting--,jm(n)}class Jj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kr,this.onMicrotaskEmpty=new kr,this.onStable=new kr,this.onError=new kr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const YD=new ee("",{providedIn:"root",factory:XD});function XD(){const n=Fe(ot);let e=!0;return GV(new dn(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dn(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{ot.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(rI()))}let Um=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Lc(n){for(;n;){n[ie]|=64;const e=Mc(n);if(wg(n)&&!e)return n;n=e}return null}const nT=new ee("",{providedIn:"root",factory:()=>!1});let qd=null;function oT(n,e){return n[e]??lT()}function aT(n,e){const t=lT();t.producerNode?.length&&(n[e]=qd,t.lView=n,qd=cT())}const lH={...MI,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Lc(n.lView)},lView:null};function cT(){return Object.create(lH)}function lT(){return qd??=cT(),qd}const re={};function us(n){uT(me(),L(),nn()+n,!1)}function uT(n,e,t,r){if(!r)if(3==(3&e[ie])){const s=n.preOrderCheckHooks;null!==s&&ud(e,s,t)}else{const s=n.preOrderHooks;null!==s&&dd(e,s,0,t)}os(t)}function ae(n,e=fe.Default){const t=L();return null===t?pe(n,e):w0(Ot(),t,Z(n),e)}function Wd(n,e,t,r,i,s,o,a,c,l,u){const h=e.blueprint.slice();return h[st]=i,h[ie]=140|r,(null!==l||n&&2048&n[ie])&&(h[ie]|=2048),YI(h),h[Qe]=h[uo]=n,h[ht]=t,h[lo]=o||n&&n[lo],h[ne]=a||n&&n[ne],h[hi]=c||n&&n[hi]||null,h[jt]=s,h[mc]=function pB(){return fB++}(),h[Ar]=u,h[CI]=l,h[ft]=2==e.type?n[ft]:h,h}function Ho(n,e,t,r,i){let s=n.data[e];if(null===s)s=function $m(n,e,t,r,i){const s=n0(),o=Mg(),c=n.data[e]=function yH(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function mo(){return null!==X.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function h2(){return X.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Ec(){const n=X.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return cr(s,!0),s}function Bc(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function dT(n,e,t,r,i){const s=oT(e,_c),o=nn(),a=2&r;try{os(-1),a&&e.length>ce&&uT(n,e,ce,!1),ar(a?2:0,i);const l=a?s:null,u=Dg(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{Tg(l,u)}}finally{a&&null===e[_c]&&aT(e,_c),os(o),ar(a?3:1,i)}}function zm(n,e,t){if(Eg(e)){const r=Fn(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Fn(r)}}}function Gm(n,e,t){t0()&&(function TH(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;is(t)&&function RH(n,e,t){const r=gn(e,n),i=hT(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Kd(n,Wd(n,i,null,o,r,e,null,n[lo].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||fd(t,e),Ht(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],l=as(e,n,a,t);Ht(l,e),null!==o&&NH(0,a-i,l,c,0,o),Wn(c)&&(Tn(t.index,e)[ht]=as(e,n,a,t))}}(n,e,t,gn(t,e)),64==(64&t.flags)&&_T(n,e,t))}function qm(n,e,t=gn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function hT(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Wm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Wm(n,e,t,r,i,s,o,a,c,l,u){const h=ce+r,f=h+i,p=function hH(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:re);return t}(h,f),m="function"==typeof l?l():l;return p[G]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}let fT=n=>null;function pT(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?gT(t,e,i,s):r.hasOwnProperty(i)&&gT(t,e,r[i],s)}return t}function gT(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Km(n,e,t,r){if(t0()){const i=null===r?null:{"":-1},s=function xH(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(bI(e,o.selectors,!1))if(r||(r=[]),Wn(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Qm(n,e,a.length)}else r.unshift(o),Qm(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&mT(n,e,t,o,i,a),i&&function SH(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new W(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=dc(t.mergedAttrs,t.attrs)}function mT(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Ug(fd(t,e),n,r[l].type);!function MH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Bc(n,e,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];t.mergedAttrs=dc(t.mergedAttrs,u.hostAttrs),PH(n,t,e,c,u),AH(c,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function vH(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<i;u++){const h=s[u],f=t?t.get(h):null,m=f?f.outputs:null;c=pT(h.inputs,u,c,f?f.inputs:null),l=pT(h.outputs,u,l,m);const y=null===c||null===o||vI(e)?null:OH(c,u,o);a.push(y)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function _T(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function p2(){return X.lFrame.currentDirectiveIndex}();try{os(s);for(let a=r;a<i;a++){const c=n.data[a],l=e[a];Rg(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&CH(c,l)}}finally{os(-1),Rg(o)}}function CH(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Qm(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function AH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Wn(e)&&(t[""]=n)}}function PH(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ss(i.type)),o=new wc(s,Wn(i),ae);n.blueprint[r]=o,t[r]=o,function IH(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function DH(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Bc(n,t,i.hostVars,re),i)}function NH(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)yT(r,t,o[a++],o[a++],o[a++])}function yT(n,e,t,r,i){const s=Fn(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Fn(s)}}function OH(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function vT(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function bT(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Og(t[r]),o.contentQueries(2,e[s],s)}}}function Kd(n,e){return n[pc]?n[TI][qn]=e:n[pc]=e,n[TI]=e,e}function Xm(n,e,t){Og(0);const r=Fn(null);try{e(n,t)}finally{Fn(r)}}function DT(n,e){const t=n[hi],r=t?t.get(Or,null):null;r&&r.handleError(e)}function Jm(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];yT(n.data[o],e[o],r,a,i)}}function Vr(n,e,t){const r=ad(e,n);!function J0(n,e,t){n.setValue(e,t)}(n[ne],r,t)}function kH(n,e){const t=Tn(e,n),r=t[G];!function FH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[st];null!==i&&null===t[Ar]&&(t[Ar]=Rm(i,t[hi])),Zm(r,t,t[ht])}function Zm(n,e,t){kg(e);try{const r=n.viewQuery;null!==r&&Xm(1,r,t);const i=n.template;null!==i&&dT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&bT(n,e),n.staticViewQueries&&Xm(2,n.viewQuery,t);const s=n.components;null!==s&&function VH(n,e){for(let t=0;t<e.length;t++)kH(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,Fg()}}let TT=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function UL(n,e,t){const r=Object.create($L);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>OI(r),run:()=>{if(r.dirty=!1,r.hasRun&&!kI(r))return;r.hasRun=!0;const o=Dg(r);try{r.cleanupFn(),r.cleanupFn=$I,r.fn(i)}finally{Tg(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Qd(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=rg(i,a):2==s&&(r=rg(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function jc(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Ve(s)),en(s)&&CT(s,r);const o=t.type;if(8&o)jc(n,e,t.child,r);else if(32&o){const a=rm(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=aD(e,t);if(Array.isArray(a))r.push(...a);else{const c=Mc(e[ft]);jc(c[G],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function CT(n,e){for(let t=Rt;t<n.length;t++){const r=n[t],i=r[G].firstChild;null!==i&&jc(r[G],r,i,e)}n[or]!==n[st]&&e.push(n[or])}function Yd(n,e,t,r=!0){const i=e[lo],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{xT(n,e,n.template,t)}catch(c){throw r&&DT(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function xT(n,e,t,r){const i=e[ie];if(256!=(256&i)){e[lo].effectManager?.flush(),kg(e);try{YI(e),function s0(n){return X.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&dT(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&ud(e,l,null)}else{const l=n.preOrderHooks;null!==l&&dd(e,l,0,null),Vg(e,0)}if(function jH(n){for(let e=Q0(n);null!==e;e=Y0(e)){if(!e[xI])continue;const t=e[fo];for(let r=0;r<t.length;r++){ZL(t[r])}}}(e),ST(e,2),null!==n.contentQueries&&bT(n,e),o){const l=n.contentCheckHooks;null!==l&&ud(e,l)}else{const l=n.contentHooks;null!==l&&dd(e,l,1),Vg(e,1)}!function dH(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=oT(e,yc);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)os(~s);else{const o=s,a=t[++i],c=t[++i];f2(a,o),r.dirty=!1;const l=Dg(r);try{c(2,e[o])}finally{Tg(r,l)}}}}finally{null===e[yc]&&aT(e,yc),os(-1)}}(n,e);const a=n.components;null!==a&&MT(e,a,0);const c=n.viewQuery;if(null!==c&&Xm(2,c,r),o){const l=n.viewCheckHooks;null!==l&&ud(e,l)}else{const l=n.viewHooks;null!==l&&dd(e,l,2),Vg(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ie]&=-73,XI(e)}finally{Fg()}}}function ST(n,e){for(let t=Q0(n);null!==t;t=Y0(t))for(let r=Rt;r<t.length;r++)AT(t[r],e)}function HH(n,e,t){AT(Tn(e,n),t)}function AT(n,e){if(!function XL(n){return 128==(128&n[ie])}(n))return;const t=n[G],r=n[ie];if(80&r&&0===e||1024&r||2===e)xT(t,n,t.template,n[ht]);else if(n[fc]>0){ST(n,1);const i=t.components;null!==i&&MT(n,i,1)}}function MT(n,e,t){for(let r=0;r<e.length;r++)HH(n,e[r],t)}class Hc{get rootNodes(){const e=this._lView,t=e[G];return jc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ht]}set context(e){this._lView[ht]=e}get destroyed(){return 256==(256&this._lView[ie])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Qe];if(en(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Cd(e,r),md(t,r))}this._attachedToViewContainer=!1}sm(this._lView[G],this._lView)}onDestroy(e){!function ZI(n,e){if(256==(256&n[ie]))throw new W(911,!1);null===n[fi]&&(n[fi]=[]),n[fi].push(e)}(this._lView,e)}markForCheck(){Lc(this._cdRefInjectingView||this._lView)}detach(){this._lView[ie]&=-129}reattach(){this._lView[ie]|=128}detectChanges(){Yd(this._lView[G],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function SB(n,e){Rc(n,e,e[ne],2,null,null)}(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e}}class UH extends Hc{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Yd(e[G],e,e[ht],!1)}checkNoChanges(){}get context(){return null}}class PT extends $d{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ge(e);return new Uc(t,this.ngModule)}}function RT(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class zH{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ju(r);const i=this.injector.get(e,Fm,r);return i!==Fm||t===Fm?i:this.parentInjector.get(e,t,r)}}class Uc extends VD{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=RT(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return RT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function IL(n){return n.map(wL).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Nr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new zH(e,s):e,a=o.get(BD,null);if(null===a)throw new W(407,!1);const h={rendererFactory:a,sanitizer:o.get(Lj,null),effectManager:o.get(TT,null),afterRenderEventManager:o.get(Um,null)},f=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=r?function fH(n,e,t,r){const s=r.get(nT,!1)||t===zn.ShadowDom,o=n.selectRootElement(e,s);return function pH(n){fT(n)}(o),o}(f,r,this.componentDef.encapsulation,o):Td(f,p,function $H(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(p)),I=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let E=null;null!==m&&(E=Rm(m,o,!0));const S=Wm(0,null,null,1,0,null,null,null,null,null,null),P=Wd(null,S,null,I,null,null,h,f,o,null,E);let R,k;kg(P);try{const T=this.componentDef;let b,D=null;T.findHostDirectiveDefs?(b=[],D=new Map,T.findHostDirectiveDefs(T,b,D),b.push(T)):b=[T];const x=function qH(n,e){const t=n[G],r=ce;return n[r]=e,Ho(t,r,2,"#host",null)}(P,m),A=function WH(n,e,t,r,i,s,o){const a=i[G];!function KH(n,e,t,r){for(const i of n)e.mergedAttrs=dc(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Qd(e,e.mergedAttrs,!0),null!==t&&dD(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=Rm(e,i[hi]));const l=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const h=Wd(i,hT(t),null,u,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Qm(a,n,r.length-1),Kd(i,h),i[n.index]=h}(x,m,T,b,P,h,f);k=QI(S,ce),m&&function YH(n,e,t,r){if(r)yg(n,t,["ng-version",Bj.full]);else{const{attrs:i,classes:s}=function DL(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Gn(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&yg(n,t,i),s&&s.length>0&&uD(n,t,s.join(" "))}}(f,T,m,r),void 0!==t&&function XH(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(k,this.ngContentSelectors,t),R=function QH(n,e,t,r,i,s){const o=Ot(),a=i[G],c=gn(o,i);mT(a,i,o,t,null,r);for(let u=0;u<t.length;u++)Ht(as(i,a,o.directiveStart+u,o),i);_T(a,i,o),c&&Ht(c,i);const l=as(i,a,o.directiveStart+o.componentOffset,o);if(n[ht]=i[ht]=l,null!==s)for(const u of s)u(l,e);return zm(a,o,n),l}(A,T,b,D,P,[JH]),Zm(S,P,null)}finally{Fg()}return new GH(this.componentType,R,Vo(k,P),P,k)}}class GH extends Rj{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new UH(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Jm(s[G],s,i,e,t),this.previousInputValues.set(e,t),Lc(Tn(this._tNode.index,s))}}get injector(){return new rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function JH(){const n=Ot();ld(L()[G],n)}function Jd(n){return!!function e_(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Ut(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function zo(n,e,t,r,i,s){const a=function ds(n,e,t,r){const i=Ut(n,e,t);return Ut(n,e+1,r)||i}(n,function Mr(){return X.lFrame.bindingIndex}(),t,i);return Pr(2),a?e+te(t)+r+te(i)+s:re}function rh(n,e,t,r,i,s,o,a){const c=L(),l=me(),u=n+ce,h=l.firstCreatePass?function SU(n,e,t,r,i,s,o,a,c){const l=e.consts,u=Ho(e,n,4,o||null,gi(l,a));Km(e,t,u,gi(l,c)),ld(e,u);const h=u.tView=Wm(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,r,i,s,o):l.data[u];cr(h,!1);const f=XT(l,c,h,n);cd()&&Sd(l,c,f,h),Ht(f,c),Kd(c,c[u]=vT(f,c,f,h)),rd(h)&&Gm(l,c,h),null!=o&&qm(c,h,a)}let XT=function JT(n,e,t,r){return mi(!0),e[ne].createComment("")};function Wc(n,e,t){const r=L();return Ut(r,_o(),e)&&function xn(n,e,t,r,i,s,o,a){const c=gn(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(Jm(n,t,u,r,i),is(e)&&function EH(n,e){const t=Tn(e,n);16&t[ie]||(t[ie]|=64)}(t,e.index)):3&e.type&&(r=function bH(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}(me(),function Ze(){const n=X.lFrame;return QI(n.tView,n.selectedIndex)}(),r,n,e,r[ne],t,!1),Wc}function o_(n,e,t,r,i){const o=i?"class":"style";Jm(n,t,e.inputs[o],o,r)}function Kn(n,e,t,r){const i=L(),s=me(),o=ce+n,a=i[ne],c=s.firstCreatePass?function NU(n,e,t,r,i,s){const o=e.consts,c=Ho(e,n,2,r,gi(o,i));return Km(e,t,c,gi(o,s)),null!==c.attrs&&Qd(c,c.attrs,!1),null!==c.mergedAttrs&&Qd(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],l=ZT(s,i,c,a,e,n);i[o]=l;const u=rd(c);return cr(c,!0),dD(a,l,c),32!=(32&c.flags)&&cd()&&Sd(s,i,l,c),0===function t2(){return X.lFrame.elementDepthCount}()&&Ht(l,i),function n2(){X.lFrame.elementDepthCount++}(),u&&(Gm(s,i,c),zm(s,c,i)),null!==r&&qm(i,c),Kn}function Qn(){let n=Ot();Mg()?Pg():(n=n.parent,cr(n,!1));const e=n;(function i2(n){return X.skipHydrationRootTNode===n})(e)&&function c2(){X.skipHydrationRootTNode=null}(),function r2(){X.lFrame.elementDepthCount--}();const t=me();return t.firstCreatePass&&(ld(t,n),Eg(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function T2(n){return 0!=(8&n.flags)}(e)&&o_(t,e,L(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function C2(n){return 0!=(16&n.flags)}(e)&&o_(t,e,L(),e.stylesWithoutHost,!1),Qn}function a_(n,e,t,r){return Kn(n,e,t,r),Qn(),a_}let ZT=(n,e,t,r,i,s)=>(mi(!0),Td(r,i,function f0(){return X.lFrame.currentNamespace}()));function ih(n,e,t){const r=L(),i=me(),s=n+ce,o=i.firstCreatePass?function FU(n,e,t,r,i){const s=e.consts,o=gi(s,r),a=Ho(e,n,8,"ng-container",o);return null!==o&&Qd(a,o,!0),Km(e,t,a,gi(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];cr(o,!0);const a=tC(i,r,o,n);return r[s]=a,cd()&&Sd(i,r,a,o),Ht(a,r),rd(o)&&(Gm(i,r,o),zm(i,o,r)),null!=t&&qm(r,o),ih}function sh(){let n=Ot();const e=me();return Mg()?Pg():(n=n.parent,cr(n,!1)),e.firstCreatePass&&(ld(e,n),Eg(n)&&e.queries.elementEnd(n)),sh}let tC=(n,e,t,r)=>(mi(!0),im(e[ne],""));function c_(n){return!!n&&"function"==typeof n.then}function nC(n){return!!n&&"function"==typeof n.subscribe}function l_(n,e,t,r){const i=L(),s=me(),o=Ot();return function iC(n,e,t,r,i,s,o){const a=rd(r),l=n.firstCreatePass&&function wT(n){return n.cleanup||(n.cleanup=[])}(n),u=e[ht],h=function ET(n){return n[co]||(n[co]=[])}(e);let f=!0;if(3&r.type||o){const y=gn(r,e),v=o?o(y):y,I=h.length,E=o?P=>o(Ve(P[r.index])):r.index;let S=null;if(!o&&a&&(S=function jU(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[co],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=s,S.__ngLastListenerFn__=s,f=!1;else{s=oC(r,e,u,s,!1);const P=t.listen(v,i,s);h.push(s,P),l&&l.push(i,E,I,I+1)}}else s=oC(r,e,u,s,!1);const p=r.outputs;let m;if(f&&null!==p&&(m=p[i])){const y=m.length;if(y)for(let v=0;v<y;v+=2){const R=e[m[v]][m[v+1]].subscribe(s),k=h.length;h.push(s,R),l&&l.push(i,r.index,k,-(k+1))}}}(s,i,i[ne],o,n,e,r),l_}function sC(n,e,t,r){try{return ar(6,e,t),!1!==t(r)}catch(i){return DT(n,i),!1}finally{ar(7,e,t)}}function oC(n,e,t,r,i){return function s(o){if(o===Function)return r;Lc(n.componentOffset>-1?Tn(n.index,e):e);let c=sC(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)c=sC(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function aC(n=1){return function m2(n){return(X.lFrame.contextLView=function _2(n,e){for(;n>0;)e=e[uo],n--;return e}(n,X.lFrame.contextLView))[ht]}(n)}function oh(n,e){return n<<17|e<<2}function vi(n){return n>>17&32767}function d_(n){return 2|n}function hs(n){return(131068&n)>>2}function h_(n,e){return-131069&n|e<<2}function f_(n){return 1|n}function _C(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?vi(s):hs(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];QU(n[a],e)&&(c=!0,n[a+1]=r?f_(u):d_(u)),a=r?vi(u):hs(u)}c&&(n[t+1]=r?d_(s):f_(s))}function QU(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&To(n,e)>=0}function p_(n,e){return function Yn(n,e,t,r){const i=L(),s=me(),o=Pr(2);s.firstUpdatePass&&function CC(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[nn()],o=function TC(n,e){return e>=n.expandoStartIndex}(n,t);(function MC(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function i$(n,e,t,r){const i=function Ng(n){const e=X.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Kc(t=g_(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=g_(i,n,e,t,r),null===s){let c=function s$(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==hs(r))return n[vi(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=g_(null,n,e,c[1],r),c=Kc(c,e.attrs,r),function o$(n,e,t,r){n[vi(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function a$(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Kc(r,n[s].hostAttrs,t);return Kc(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function WU(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=vi(o),c=hs(o);n[r]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||To(t,u)>0)&&(l=!0)):u=t,i)if(0!==c){const f=vi(n[a+1]);n[r+1]=oh(f,a),0!==f&&(n[f+1]=h_(n[f+1],r)),n[a+1]=function GU(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=oh(a,0),0!==a&&(n[a+1]=h_(n[a+1],r)),a=r;else n[r+1]=oh(c,0),0===a?a=r:n[c+1]=h_(n[c+1],r),c=r;l&&(n[r+1]=d_(n[r+1])),_C(n,u,r,!0),_C(n,u,r,!1),function KU(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&To(s,e)>=0&&(t[r+1]=f_(t[r+1]))}(e,u,n,r,s),o=oh(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==re&&Ut(i,o,e)&&function SC(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function qU(n){return 1==(1&n)}(l)?AC(c,e,t,i,hs(l),o):void 0;ah(u)||(ah(s)||function zU(n){return 2==(2&n)}(l)&&(s=AC(c,null,t,i,a,o)),function LB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:_i.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=_i.Important),n.setStyle(t,r,i,s))}}(r,o,ad(nn(),t),i,s))}(s,s.data[nn()],i,i[ne],n,i[o+1]=function d$(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=wt(function yi(n){return n instanceof gD?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),r,o)}(n,e,null,!0),p_}function g_(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Kc(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Kc(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Cn(n,o,!!t||e[++s]))}return void 0===n?null:n}function AC(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),u=l?c[1]:c,h=null===u;let f=t[i+1];f===re&&(f=h?Ee:void 0);let p=h?qg(f,r):u===r?f:void 0;if(l&&!ah(p)&&(p=qg(c,r)),ah(p)&&(a=p,o))return a;const m=n[i+1];i=o?vi(m):hs(m)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=qg(c,r))}return a}function ah(n){return void 0!==n}function fs(n,e=""){const t=L(),r=me(),i=n+ce,s=r.firstCreatePass?Ho(r,i,1,e,null):r.data[i],o=PC(r,t,s,e,n);t[i]=o,cd()&&Sd(r,t,o,s),cr(s,!1)}let PC=(n,e,t,r,i)=>(mi(!0),function Dd(n,e){return n.createText(e)}(e[ne],r));function m_(n){return ch("",n,""),m_}function ch(n,e,t){const r=L(),i=function $o(n,e,t,r){return Ut(n,_o(),t)?e+te(t)+r:re}(r,n,e,t);return i!==re&&Vr(r,nn(),i),ch}function __(n,e,t,r,i){const s=L(),o=zo(s,n,e,t,r,i);return o!==re&&Vr(s,nn(),o),__}const Zo="en-US";let JC=Zo;class gs{}class Oz{}class D_ extends gs{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new PT(this);const i=function Dn(n,e){const t=n[hI]||null;if(!t&&!0===e)throw new Error(`Type ${wt(n)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function Fr(n){return n instanceof Function?n():n}(i.bootstrap),this._r3Injector=GD(e,t,[{provide:gs,useValue:this},{provide:$d,useValue:this.componentFactoryResolver},...r],wt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class T_ extends Oz{constructor(e){super(),this.moduleType=e}create(e){return new D_(this.moduleType,e,[])}}function f4(n,e,t,r=!0){const i=e[G];if(function MB(n,e,t,r){const i=Rt+r,s=t.length;r>0&&(t[i-1][qn]=e),r<s-Rt?(e[qn]=t[i],S0(t,Rt+r,e)):(t.push(e),e[qn]=null),e[Qe]=t;const o=e[gc];null!==o&&t!==o&&function PB(n,e){const t=n[fo];e[ft]!==e[Qe][Qe][ft]&&(n[xI]=!0),null===t?n[fo]=[e]:t.push(e)}(o,e);const a=e[sr];null!==a&&a.insertView(n),e[ie]|=128}(i,e,n,t),r){const s=lm(t,n),o=e[ne],a=xd(o,n[or]);null!==a&&function xB(n,e,t,r,i,s){r[st]=i,r[jt]=e,Rc(n,r,t,1,i,s)}(i,n[jt],o,e,a,s)}}let Lr=(()=>{class n{static{this.__NG_ELEMENT_ID__=m4}}return n})();const p4=Lr,g4=class extends p4{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function h4(n,e,t,r){const i=e.tView,a=Wd(n,i,t,4096&n[ie]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[gc]=n[e.index];const l=n[sr];return null!==l&&(a[sr]=l.createEmbeddedView(i)),Zm(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Hc(i)}};function m4(){return function fh(n,e){return 4&n.type?new g4(e,n,Vo(n,e)):null}(Ot(),L())}let gr=(()=>{class n{static{this.__NG_ELEMENT_ID__=w4}}return n})();function w4(){return function Ux(n,e){let t;const r=e[n.index];return en(r)?t=r:(t=vT(r,e,null,n),e[n.index]=t,Kd(e,t)),$x(t,e,n,r),new jx(t,n,e)}(Ot(),L())}const I4=gr,jx=class extends I4{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Vo(this._hostTNode,this._hostLView)}get injector(){return new rn(this._hostTNode,this._hostLView)}get parentInjector(){const e=pd(this._hostTNode,this._hostLView);if(Bg(e)){const t=Dc(e,this._hostLView),r=Ic(e);return new rn(t[G].data[r+8],t)}return new rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Hx(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Cc(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const y=t||{};a=y.index,r=y.injector,i=y.projectableNodes,s=y.environmentInjector||y.ngModuleRef}const c=o?e:new Uc(ge(e)),l=r||this.parentInjector;if(!s&&null==c.ngModule){const v=(o?l:this.parentInjector).get(Nr,null);v&&(s=v)}ge(c.componentType??{});const p=c.create(l,i,null,s);return this.insertImpl(p.hostView,a,false),p}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function JL(n){return en(n[Qe])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=i[Qe],u=new jx(l,l[jt],l[Qe]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return f4(a,i,o,!r),e.attachToViewContainerRef(),S0(S_(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Hx(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Cd(this._lContainer,t);r&&(md(S_(this._lContainer),t),sm(r[G],r))}detach(e){const t=this._adjustIndex(e,-1),r=Cd(this._lContainer,t);return r&&null!=md(S_(this._lContainer),t)?new Hc(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Hx(n){return n[8]}function S_(n){return n[8]||(n[8]=[])}let $x=function zx(n,e,t,r){if(n[or])return;let i;i=8&t.type?Ve(r):function D4(n,e){const t=n[ne],r=t.createComment(""),i=gn(e,n);return cs(t,xd(t,i),r,function kB(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[or]=i};const i5=new ee("Application Initializer");let L_=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Fe(i5,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(c_(s))t.push(s);else if(nC(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Br=new ee("LocaleId",{providedIn:"root",factory:()=>Fe(Br,fe.Optional|fe.SkipSelf)||function o5(){return typeof $localize<"u"&&$localize.locale||Zo}()});let l5=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qV(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const mS=new ee(""),_h=new ee("");let $_,H_=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$_||(function R5(n){$_=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(pe(ot),pe(U_),pe(_h))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})(),U_=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return $_?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),bi=null;const _S=new ee("AllowMultipleToken"),z_=new ee("PlatformDestroyListeners"),yS=new ee("appBootstrapListener");function ES(n,e,t=[]){const r=`Platform: ${e}`,i=new ee(r);return(s=[])=>{let o=G_();if(!o||o.injector.get(_S,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function k5(n){if(bi&&!bi.get(_S,!1))throw new W(400,!1);(function vS(){!function VL(n){BI=n}(()=>{throw new W(600,!1)})})(),bi=n;const e=n.get(IS);(function bS(n){n.get(RD,null)?.forEach(t=>t())})(n)}(function wS(n=[],e){return ur.create({name:e,providers:[{provide:Em,useValue:"platform"},{provide:z_,useValue:new Set([()=>bi=null])},...n]})}(a,r))}return function V5(n){const e=G_();if(!e)throw new W(401,!1);return e}()}}function G_(){return bi?.get(IS)??null}let IS=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function L5(n="zone.js",e){return"noop"===n?new Jj:"zone.js"===n?new ot(e):n}(r?.ngZone,function DS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Fz(n,e,t){return new D_(n,e,t)}(t.moduleType,this.injector,function AS(n){return[{provide:ot,useFactory:n},{provide:Nd,multi:!0,useFactory:()=>{const e=Fe(j5,{optional:!0});return()=>e.initialize()}},{provide:SS,useFactory:B5},{provide:YD,useFactory:XD}]}(()=>i)),o=s.injector.get(Or,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{yh(this._modules,s),a.unsubscribe()})}),function TS(n,e,t){try{const r=t();return c_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(L_);return a.runInitializers(),a.donePromise.then(()=>(function ZC(n){On(n,"Expected localeId to be defined"),"string"==typeof n&&(JC=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Br,Zo)||Zo),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=CS({},r);return function N5(n,e,t){const r=new T_(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(il);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new W(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(z_,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(pe(ur))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function CS(n,e){return Array.isArray(e)?e.reduce(CS,n):{...n,...e}}let il=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Fe(SS),this.zoneIsStable=Fe(YD),this.componentTypes=[],this.components=[],this.isStable=Fe(l5).hasPendingTasks.pipe(function KV(n,e){return es((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(ts(r,c=>{i?.unsubscribe();let l=0;const u=s++;Cr(n(c,u)).subscribe(i=ts(r,h=>r.next(e?e(c,h,u,l++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}(t=>t?function WV(...n){return nI(n,Jw(n))}(!1):this.zoneIsStable),function QV(n,e=Qp){return n=n??YV,es((t,r)=>{let i,s=!0;t.subscribe(ts(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}(),rI()),this._injector=Fe(Nr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof VD;if(!this._injector.get(L_).done)throw!i&&function hc(n){const e=ge(n)||Pt(n)||Zt(n);return null!==e&&e.standalone}(t),new W(405,!1);let o;o=i?t:this._injector.get($d).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function O5(n){return n.isBoundToModule}(o)?void 0:this._injector.get(gs),l=o.create(ur.NULL,[],r||o.selector,a),u=l.location.nativeElement,h=l.injector.get(mS,null);return h?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),yh(this.components,l),h?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new W(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;yh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(yS,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const SS=new ee("",{providedIn:"root",factory:()=>Fe(Or).handleError.bind(void 0)});function B5(){const n=Fe(ot),e=Fe(Or);return t=>n.runOutsideAngular(()=>e.handleError(t))}let j5=(()=>{class n{constructor(){this.zone=Fe(ot),this.applicationRef=Fe(il)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class OS{constructor(){}supports(e){return Jd(e)}create(e){return new Q5(e)}}const K5=(n,e)=>e;class Q5{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||K5}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<FS(r,i,s)?t:r,a=FS(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){const p=f<s.length?s[f]:s[f]=0,m=p+f;u<=m&&m<l&&(s[f]=p+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Jd(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function uU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Y5(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new kS),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kS),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Y5{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class X5{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class kS{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new X5,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FS(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function LS(){return new Eh([new OS])}let Eh=(()=>{class n{static{this.\u0275prov=xe({token:n,providedIn:"root",factory:LS})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||LS()),deps:[[n,new Qg,new Kg]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new W(901,!1)}}return n})();const n9=ES(null,"core",[]);let r9=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(pe(il))}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=rs({})}}return n})(),X_=null;function J_(){return X_}class m9{}const _s=new ee("DocumentToken");class s3{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let iA=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new s3(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),sA(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{sA(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ae(gr),ae(Lr),ae(Eh))}}static{this.\u0275dir=kn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function sA(n,e){n.context.$implicit=e.item}let oA=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new o3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){aA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){aA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ae(gr),ae(Lr))}}static{this.\u0275dir=kn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class o3{constructor(){this.$implicit=null,this.ngIf=null}}function aA(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${wt(e)}'.`)}let P3=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=rs({})}}return n})();function dA(n){return"server"===n}class s6 extends m9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class gy extends s6{static makeCurrent(){!function g9(n){X_||(X_=n)}(new gy)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function o6(){return ll=ll||document.querySelector("base"),ll?ll.getAttribute("href"):null}();return null==t?null:function a6(n){kh=kh||document.createElement("a"),kh.setAttribute("href",n);const e=kh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ll=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function n3(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let kh,ll=null,l6=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();const my=new ee("EventManagerPlugins");let mA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(pe(my),pe(ot))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();class _A{constructor(e){this._doc=e}}const _y="ng-app-id";let yA=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dA(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${_y}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(_y),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(_y,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(pe(_s),pe(Vd),pe(ND,8),pe(Oo))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();const yy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vy=/%COMP%/g,f6=new ee("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function bA(n,e){return e.map(t=>t.replace(vy,n))}let EA=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=dA(a),this.defaultRenderer=new by(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===zn.ShadowDom&&(r={...r,encapsulation:zn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof IA?i.applyToHost(t):i instanceof Ey&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case zn.Emulated:s=new IA(c,l,r,this.appId,u,o,a,h);break;case zn.ShadowDom:return new _6(c,l,t,r,o,a,this.nonce,h);default:s=new Ey(c,l,r,u,o,a,h)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(pe(mA),pe(yA),pe(Vd),pe(f6),pe(_s),pe(Oo),pe(ot),pe(ND))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();class by{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(yy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=yy[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=yy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_i.DashCase|_i.Important)?e.style.setProperty(t,r,i&_i.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_i.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=J_().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function wA(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class _6 extends by{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=bA(i.id,i.styles);for(const u of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ey extends by{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?bA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class IA extends Ey{constructor(e,t,r,i,s,o,a,c){const l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=function p6(n){return"_ngcontent-%COMP%".replace(vy,n)}(l),this.hostAttr=function g6(n){return"_nghost-%COMP%".replace(vy,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let y6=(()=>{class n extends _A{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(pe(_s))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();const DA=["alt","control","meta","shift"],v6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},b6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let E6=(()=>{class n extends _A{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>J_().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),DA.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=v6[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),DA.forEach(o=>{o!==i&&(0,b6[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(pe(_s))}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac})}}return n})();const CA=[{provide:Oo,useValue:"browser"},{provide:RD,useValue:function w6(){gy.makeCurrent()},multi:!0},{provide:_s,useFactory:function D6(){return function $B(n){hm=n}(document),document},deps:[]}],T6=ES(n9,"browser",CA),C6=new ee(""),xA=[{provide:_h,useClass:class c6{addToWindow(e){ke.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new W(5103,!1);return s},ke.getAllAngularTestabilities=()=>e.getAllTestabilities(),ke.getAllAngularRootElements=()=>e.getAllRootElements(),ke.frameworkStabilizers||(ke.frameworkStabilizers=[]),ke.frameworkStabilizers.push(r=>{const i=ke.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?J_().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:mS,useClass:H_,deps:[ot,U_,_h]},{provide:H_,useClass:H_,deps:[ot,U_,_h]}],SA=[{provide:Em,useValue:"root"},{provide:Or,useFactory:function I6(){return new Or},deps:[]},{provide:my,useClass:y6,multi:!0,deps:[_s,ot,Oo]},{provide:my,useClass:E6,multi:!0,deps:[_s]},EA,yA,mA,{provide:BD,useExisting:EA},{provide:class F3{},useClass:l6,deps:[]},[]];let x6=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Vd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(pe(C6,12))}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=rs({providers:[...SA,...xA],imports:[P3,r9]})}}return n})();function RA(n,e,t,r,i,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(r,i)}function H(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(c){RA(s,r,i,o,a,"next",c)}function a(c){RA(s,r,i,o,a,"throw",c)}o(void 0)})}}typeof window<"u"&&window;class O6{constructor(){this.DataSets=new Array,this.Labels=new Array,this.Options=null,this.ShowLegend=!1,this.ChartType="doughnut",this.Height=200}}const NA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},OA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0;let f=(15&a)<<2|l>>6,p=63&l;c||(p=64,o||(f=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[f],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const c=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==h)throw new L6;r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==h&&r.push(l<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class L6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fh=function(n){return function(n){const e=NA(n);return OA.encodeByteArray(e,!0)}(n).replace(/\./g,"")},Vh=()=>{try{return function H6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&function(n){try{return OA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},FA=()=>{var n;return null===(n=Vh())||void 0===n?void 0:n.config};class VA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}class ra extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jA.prototype.create)}}class jA{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function J6(n,e){return n.replace(Z6,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new ra(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Z6=/\{\$([^}]+)}/g;function ul(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(UA(s)&&UA(o)){if(!ul(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function UA(n){return null!==n&&"object"==typeof n}class dl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ys="[DEFAULT]";class aG{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new VA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function lG(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return H(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===ys?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class uG{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aG(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const xy=[];var _e=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(_e||{});const $A={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},dG=_e.INFO,hG={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},fG=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=hG[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class zA{constructor(e){this.name=e,this._logLevel=dG,this._logHandler=fG,this._userLogHandler=null,xy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?$A[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const pG=(n,e)=>e.some(t=>n instanceof t);let GA,qA;const WA=new WeakMap,Sy=new WeakMap,KA=new WeakMap,Ay=new WeakMap,My=new WeakMap;let Py={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Sy.get(n);if("objectStoreNames"===e)return n.objectStoreNames||KA.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ii(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function EG(n){return"function"==typeof n?function bG(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function mG(){return qA||(qA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Ry(this),e),Ii(WA.get(this))}:function(...e){return Ii(n.apply(Ry(this),e))}:function(e,...t){const r=n.call(Ry(this),e,...t);return KA.set(r,e.sort?e.sort():[e]),Ii(r)}}(n):(n instanceof IDBTransaction&&function yG(n){if(Sy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Sy.set(n,e)}(n),pG(n,function gG(){return GA||(GA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Py):n)}function Ii(n){if(n instanceof IDBRequest)return function _G(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ii(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&WA.set(t,n)}).catch(()=>{}),My.set(e,n),e}(n);if(Ay.has(n))return Ay.get(n);const e=EG(n);return e!==n&&(Ay.set(n,e),My.set(e,n)),e}const Ry=n=>My.get(n),IG=["get","getKey","getAll","getAllKeys","count"],DG=["put","add","delete","clear"],Ny=new Map;function QA(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Ny.get(e))return Ny.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=DG.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!IG.includes(t))return;const s=function(){var o=H(function*(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),i&&l.done]))[0]});return function(c){return o.apply(this,arguments)}}();return Ny.set(e,s),s}!function vG(n){Py=n(Py)}(n=>({...n,get:(e,t,r)=>QA(e,t)||n.get(e,t,r),has:(e,t)=>!!QA(e,t)||n.has(e,t)}));class TG{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function CG(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Bh="@firebase/app",Oy="0.10.16",Ur=new zA("@firebase/app"),jh="[DEFAULT]",e8={[Bh]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},vs=new Map,hl=new Map,fl=new Map;function YA(n,e){try{n.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hh(n){const e=n.name;if(fl.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;fl.set(e,n);for(const t of vs.values())YA(t,n);for(const t of hl.values())YA(t,n);return!0}const Hn=new jA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class JA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}function ZA(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:jh,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Hn.create("bad-app-name",{appName:String(i)});if(t||(t=FA()),!t)throw Hn.create("no-options");const s=vs.get(i);if(s){if(ul(t,s.options)&&ul(r,s.config))return s;throw Hn.create("duplicate-app",{appName:i})}const o=new uG(i);for(const c of fl.values())o.addComponent(c);const a=new JA(t,r,o);return vs.set(i,a),a}function bs(n,e,t){var r;let i=null!==(r=e8[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ur.warn(a.join(" "))}Hh(new dl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const a8="firebase-heartbeat-database",c8=1,pl="firebase-heartbeat-store";let Fy=null;function eM(){return Fy||(Fy=function wG(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Ii(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ii(o.result),c.oldVersion,c.newVersion,Ii(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}(a8,c8,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(pl)}catch(t){console.warn(t)}}}).catch(n=>{throw Hn.create("idb-open",{originalErrorMessage:n.message})})),Fy}function Vy(){return(Vy=H(function*(n){try{const t=(yield eM()).transaction(pl),r=yield t.objectStore(pl).get(nM(n));return yield t.done,r}catch(e){if(e instanceof ra)Ur.warn(e.message);else{const t=Hn.create("idb-get",{originalErrorMessage:e?.message});Ur.warn(t.message)}}})).apply(this,arguments)}function tM(n,e){return Ly.apply(this,arguments)}function Ly(){return(Ly=H(function*(n,e){try{const r=(yield eM()).transaction(pl,"readwrite");yield r.objectStore(pl).put(e,nM(n)),yield r.done}catch(t){if(t instanceof ra)Ur.warn(t.message);else{const r=Hn.create("idb-set",{originalErrorMessage:t?.message});Ur.warn(r.message)}}})).apply(this,arguments)}function nM(n){return`${n.name}!${n.options.appId}`}class h8{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new p8(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return H(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=rM();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Ur.warn(i)}})()}getHeartbeatsHeader(){var e=this;return H(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=rM(),{heartbeatsToSend:i,unsentEntries:s}=function f8(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),iM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=Fh(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return Ur.warn(r),""}})()}}function rM(){return(new Date).toISOString().substring(0,10)}class p8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return H(function*(){return!!function BA(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function Y6(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return H(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function l8(n){return Vy.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return H(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return tM(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return H(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return tM(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function iM(n){return Fh(JSON.stringify({version:2,heartbeats:n})).length}!function g8(n){Hh(new dl("platform-logger",e=>new TG(e),"PRIVATE")),Hh(new dl("heartbeat",e=>new h8(e),"PRIVATE")),bs(Bh,Oy,n),bs(Bh,Oy,"esm2017"),bs("fire-js","")}(""),bs("firebase","11.0.2","app");var Es,aM,sM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oM={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(T,b,D){D||(D=0);var x=Array(16);if("string"==typeof b)for(var A=0;16>A;++A)x[A]=b.charCodeAt(D++)|b.charCodeAt(D++)<<8|b.charCodeAt(D++)<<16|b.charCodeAt(D++)<<24;else for(A=0;16>A;++A)x[A]=b[D++]|b[D++]<<8|b[D++]<<16|b[D++]<<24;var M=T.g[3],C=(b=T.g[0])+(M^(D=T.g[1])&((A=T.g[2])^M))+x[0]+3614090360&4294967295;C=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=(D=(A=(M=(b=D+(C<<7&4294967295|C>>>25))+((C=M+(A^b&(D^A))+x[1]+3905402710&4294967295)<<12&4294967295|C>>>20))+((C=A+(D^M&(b^D))+x[2]+606105819&4294967295)<<17&4294967295|C>>>15))+((C=D+(b^A&(M^b))+x[3]+3250441966&4294967295)<<22&4294967295|C>>>10))+((C=b+(M^D&(A^M))+x[4]+4118548399&4294967295)<<7&4294967295|C>>>25))+((C=M+(A^b&(D^A))+x[5]+1200080426&4294967295)<<12&4294967295|C>>>20))+((C=A+(D^M&(b^D))+x[6]+2821735955&4294967295)<<17&4294967295|C>>>15))+((C=D+(b^A&(M^b))+x[7]+4249261313&4294967295)<<22&4294967295|C>>>10))+((C=b+(M^D&(A^M))+x[8]+1770035416&4294967295)<<7&4294967295|C>>>25))+((C=M+(A^b&(D^A))+x[9]+2336552879&4294967295)<<12&4294967295|C>>>20))+((C=A+(D^M&(b^D))+x[10]+4294925233&4294967295)<<17&4294967295|C>>>15))+((C=D+(b^A&(M^b))+x[11]+2304563134&4294967295)<<22&4294967295|C>>>10))+((C=b+(M^D&(A^M))+x[12]+1804603682&4294967295)<<7&4294967295|C>>>25))+((C=M+(A^b&(D^A))+x[13]+4254626195&4294967295)<<12&4294967295|C>>>20))+((C=A+(D^M&(b^D))+x[14]+2792965006&4294967295)<<17&4294967295|C>>>15))+((C=D+(b^A&(M^b))+x[15]+1236535329&4294967295)<<22&4294967295|C>>>10))+((C=b+(A^M&(D^A))+x[1]+4129170786&4294967295)<<5&4294967295|C>>>27))+((C=M+(D^A&(b^D))+x[6]+3225465664&4294967295)<<9&4294967295|C>>>23))+((C=A+(b^D&(M^b))+x[11]+643717713&4294967295)<<14&4294967295|C>>>18))+((C=D+(M^b&(A^M))+x[0]+3921069994&4294967295)<<20&4294967295|C>>>12))+((C=b+(A^M&(D^A))+x[5]+3593408605&4294967295)<<5&4294967295|C>>>27))+((C=M+(D^A&(b^D))+x[10]+38016083&4294967295)<<9&4294967295|C>>>23))+((C=A+(b^D&(M^b))+x[15]+3634488961&4294967295)<<14&4294967295|C>>>18))+((C=D+(M^b&(A^M))+x[4]+3889429448&4294967295)<<20&4294967295|C>>>12))+((C=b+(A^M&(D^A))+x[9]+568446438&4294967295)<<5&4294967295|C>>>27))+((C=M+(D^A&(b^D))+x[14]+3275163606&4294967295)<<9&4294967295|C>>>23))+((C=A+(b^D&(M^b))+x[3]+4107603335&4294967295)<<14&4294967295|C>>>18))+((C=D+(M^b&(A^M))+x[8]+1163531501&4294967295)<<20&4294967295|C>>>12))+((C=b+(A^M&(D^A))+x[13]+2850285829&4294967295)<<5&4294967295|C>>>27))+((C=M+(D^A&(b^D))+x[2]+4243563512&4294967295)<<9&4294967295|C>>>23))+((C=A+(b^D&(M^b))+x[7]+1735328473&4294967295)<<14&4294967295|C>>>18))+((C=D+(M^b&(A^M))+x[12]+2368359562&4294967295)<<20&4294967295|C>>>12))+((C=b+(D^A^M)+x[5]+4294588738&4294967295)<<4&4294967295|C>>>28))+((C=M+(b^D^A)+x[8]+2272392833&4294967295)<<11&4294967295|C>>>21))+((C=A+(M^b^D)+x[11]+1839030562&4294967295)<<16&4294967295|C>>>16))+((C=D+(A^M^b)+x[14]+4259657740&4294967295)<<23&4294967295|C>>>9))+((C=b+(D^A^M)+x[1]+2763975236&4294967295)<<4&4294967295|C>>>28))+((C=M+(b^D^A)+x[4]+1272893353&4294967295)<<11&4294967295|C>>>21))+((C=A+(M^b^D)+x[7]+4139469664&4294967295)<<16&4294967295|C>>>16))+((C=D+(A^M^b)+x[10]+3200236656&4294967295)<<23&4294967295|C>>>9))+((C=b+(D^A^M)+x[13]+681279174&4294967295)<<4&4294967295|C>>>28))+((C=M+(b^D^A)+x[0]+3936430074&4294967295)<<11&4294967295|C>>>21))+((C=A+(M^b^D)+x[3]+3572445317&4294967295)<<16&4294967295|C>>>16))+((C=D+(A^M^b)+x[6]+76029189&4294967295)<<23&4294967295|C>>>9))+((C=b+(D^A^M)+x[9]+3654602809&4294967295)<<4&4294967295|C>>>28))+((C=M+(b^D^A)+x[12]+3873151461&4294967295)<<11&4294967295|C>>>21))+((C=A+(M^b^D)+x[15]+530742520&4294967295)<<16&4294967295|C>>>16))+((C=D+(A^M^b)+x[2]+3299628645&4294967295)<<23&4294967295|C>>>9))+((C=b+(A^(D|~M))+x[0]+4096336452&4294967295)<<6&4294967295|C>>>26))+((C=M+(D^(b|~A))+x[7]+1126891415&4294967295)<<10&4294967295|C>>>22))+((C=A+(b^(M|~D))+x[14]+2878612391&4294967295)<<15&4294967295|C>>>17))+((C=D+(M^(A|~b))+x[5]+4237533241&4294967295)<<21&4294967295|C>>>11))+((C=b+(A^(D|~M))+x[12]+1700485571&4294967295)<<6&4294967295|C>>>26))+((C=M+(D^(b|~A))+x[3]+2399980690&4294967295)<<10&4294967295|C>>>22))+((C=A+(b^(M|~D))+x[10]+4293915773&4294967295)<<15&4294967295|C>>>17))+((C=D+(M^(A|~b))+x[1]+2240044497&4294967295)<<21&4294967295|C>>>11))+((C=b+(A^(D|~M))+x[8]+1873313359&4294967295)<<6&4294967295|C>>>26))+((C=M+(D^(b|~A))+x[15]+4264355552&4294967295)<<10&4294967295|C>>>22))+((C=A+(b^(M|~D))+x[6]+2734768916&4294967295)<<15&4294967295|C>>>17))+((C=D+(M^(A|~b))+x[13]+1309151649&4294967295)<<21&4294967295|C>>>11))+((M=(b=D+((C=b+(A^(D|~M))+x[4]+4149444226&4294967295)<<6&4294967295|C>>>26))+((C=M+(D^(b|~A))+x[11]+3174756917&4294967295)<<10&4294967295|C>>>22))^((A=M+((C=A+(b^(M|~D))+x[2]+718787259&4294967295)<<15&4294967295|C>>>17))|~b))+x[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+M&4294967295}function o(T,b){this.h=b;for(var D=[],x=!0,A=T.length-1;0<=A;A--){var M=0|T[A];x&&M==b||(D[A]=M,x=!1)}this.g=D}(function e(T,b){function D(){}D.prototype=b.prototype,T.D=b.prototype,T.prototype=new D,T.prototype.constructor=T,T.C=function(x,A,M){for(var C=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)C[rt-2]=arguments[rt];return b.prototype[A].apply(x,C)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(T,b){void 0===b&&(b=T.length);for(var D=b-this.blockSize,x=this.B,A=this.h,M=0;M<b;){if(0==A)for(;M<=D;)i(this,T,M),M+=this.blockSize;if("string"==typeof T){for(;M<b;)if(x[A++]=T.charCodeAt(M++),A==this.blockSize){i(this,x),A=0;break}}else for(;M<b;)if(x[A++]=T[M++],A==this.blockSize){i(this,x),A=0;break}}this.h=A,this.o+=b},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var D=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=255&D,D/=256;for(this.u(T),T=Array(16),b=D=0;4>b;++b)for(var x=0;32>x;x+=8)T[D++]=this.g[b]>>>x&255;return T};var a={};function c(T){return-128<=T&&128>T?function s(T,b){var D=a;return Object.prototype.hasOwnProperty.call(D,T)?D[T]:D[T]=b(T)}(T,function(b){return new o([0|b],0>b?-1:0)}):new o([0|T],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return v(l(-T));for(var b=[],D=1,x=0;T>=D;x++)b[x]=T/D|0,D*=4294967296;return new o(b,0)}var h=c(0),f=c(1),p=c(16777216);function m(T){if(0!=T.h)return!1;for(var b=0;b<T.g.length;b++)if(0!=T.g[b])return!1;return!0}function y(T){return-1==T.h}function v(T){for(var b=T.g.length,D=[],x=0;x<b;x++)D[x]=~T.g[x];return new o(D,~T.h).add(f)}function I(T,b){return T.add(v(b))}function E(T,b){for(;(65535&T[b])!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function S(T,b){this.g=T,this.h=b}function P(T,b){if(m(b))throw Error("division by zero");if(m(T))return new S(h,h);if(y(T))return b=P(v(T),b),new S(v(b.g),v(b.h));if(y(b))return b=P(T,v(b)),new S(v(b.g),b.h);if(30<T.g.length){if(y(T)||y(b))throw Error("slowDivide_ only works with positive integers.");for(var D=f,x=b;0>=x.l(T);)D=R(D),x=R(x);var A=k(D,1),M=k(x,1);for(x=k(x,2),D=k(D,2);!m(x);){var C=M.add(x);0>=C.l(T)&&(A=A.add(D),M=C),x=k(x,1),D=k(D,1)}return b=I(T,A.j(b)),new S(A,b)}for(A=h;0<=T.l(b);){for(D=Math.max(1,Math.floor(T.m()/b.m())),x=48>=(x=Math.ceil(Math.log(D)/Math.LN2))?1:Math.pow(2,x-48),C=(M=l(D)).j(b);y(C)||0<C.l(T);)C=(M=l(D-=x)).j(b);m(M)&&(M=f),A=A.add(M),T=I(T,C)}return new S(A,T)}function R(T){for(var b=T.g.length+1,D=[],x=0;x<b;x++)D[x]=T.i(x)<<1|T.i(x-1)>>>31;return new o(D,T.h)}function k(T,b){var D=b>>5;b%=32;for(var x=T.g.length-D,A=[],M=0;M<x;M++)A[M]=0<b?T.i(M+D)>>>b|T.i(M+D+1)<<32-b:T.i(M+D);return new o(A,T.h)}(n=o.prototype).m=function(){if(y(this))return-v(this).m();for(var T=0,b=1,D=0;D<this.g.length;D++){var x=this.i(D);T+=(0<=x?x:4294967296+x)*b,b*=4294967296}return T},n.toString=function(T){if(2>(T=T||10)||36<T)throw Error("radix out of range: "+T);if(m(this))return"0";if(y(this))return"-"+v(this).toString(T);for(var b=l(Math.pow(T,6)),D=this,x="";;){var A=P(D,b).g,M=((0<(D=I(D,A.j(b))).g.length?D.g[0]:D.h)>>>0).toString(T);if(m(D=A))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h},n.l=function(T){return y(T=I(this,T))?-1:m(T)?0:1},n.abs=function(){return y(this)?v(this):this},n.add=function(T){for(var b=Math.max(this.g.length,T.g.length),D=[],x=0,A=0;A<=b;A++){var M=x+(65535&this.i(A))+(65535&T.i(A)),C=(M>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);x=C>>>16,D[A]=(C&=65535)<<16|(M&=65535)}return new o(D,-2147483648&D[D.length-1]?-1:0)},n.j=function(T){if(m(this)||m(T))return h;if(y(this))return y(T)?v(this).j(v(T)):v(v(this).j(T));if(y(T))return v(this.j(v(T)));if(0>this.l(p)&&0>T.l(p))return l(this.m()*T.m());for(var b=this.g.length+T.g.length,D=[],x=0;x<2*b;x++)D[x]=0;for(x=0;x<this.g.length;x++)for(var A=0;A<T.g.length;A++){var M=this.i(x)>>>16,C=65535&this.i(x),rt=T.i(A)>>>16,ve=65535&T.i(A);D[2*x+2*A]+=C*ve,E(D,2*x+2*A),D[2*x+2*A+1]+=M*ve,E(D,2*x+2*A+1),D[2*x+2*A+1]+=C*rt,E(D,2*x+2*A+1),D[2*x+2*A+2]+=M*rt,E(D,2*x+2*A+2)}for(x=0;x<b;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=b;x<2*b;x++)D[x]=0;return new o(D,0)},n.A=function(T){return P(this,T).h},n.and=function(T){for(var b=Math.max(this.g.length,T.g.length),D=[],x=0;x<b;x++)D[x]=this.i(x)&T.i(x);return new o(D,this.h&T.h)},n.or=function(T){for(var b=Math.max(this.g.length,T.g.length),D=[],x=0;x<b;x++)D[x]=this.i(x)|T.i(x);return new o(D,this.h|T.h)},n.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),D=[],x=0;x<b;x++)D[x]=this.i(x)^T.i(x);return new o(D,this.h^T.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,aM=oM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function u(T,b){if(0==T.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==T.charAt(0))return v(u(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=l(Math.pow(b,8)),x=h,A=0;A<T.length;A+=8){var M=Math.min(8,T.length-A),C=parseInt(T.substring(A,A+M),b);8>M?(M=l(Math.pow(b,M)),x=x.j(M).add(l(C))):x=(x=x.j(D)).add(l(C))}return x},Es=oM.Integer=o}).apply(typeof sM<"u"?sM:typeof self<"u"?self:typeof window<"u"?window:{});var cM,gl,lM,$h,By,uM,dM,hM,Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$r={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(d,g,_){return d==Array.prototype||d==Object.prototype||(d[g]=_.value),d},r=function t(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Uh&&Uh];for(var g=0;g<d.length;++g){var _=d[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}(this);!function i(d,g){if(g)e:{var _=r;d=d.split(".");for(var w=0;w<d.length-1;w++){var N=d[w];if(!(N in _))break e;_=_[N]}(g=g(w=_[d=d[d.length-1]]))!=w&&null!=g&&e(_,d,{configurable:!0,writable:!0,value:g})}}("Array.prototype.values",function(d){return d||function(){return function s(d,g){d instanceof String&&(d+="");var _=0,w=!1,N={next:function(){if(!w&&_<d.length){var V=_++;return{value:g(V,d[V]),done:!1}}return w=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}(this,function(g,_){return _})}});var o=o||{},a=this||self;function c(d){var g=typeof d;return"array"==(g="object"!=g?g:d?Array.isArray(d)?"array":g:"null")||"object"==g&&"number"==typeof d.length}function l(d){var g=typeof d;return"object"==g&&null!=d||"function"==g}function u(d,g,_){return d.call.apply(d.bind,arguments)}function h(d,g,_){if(!d)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,w),d.apply(g,N)}}return function(){return d.apply(g,arguments)}}function f(d,g,_){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:h).apply(null,arguments)}function p(d,g){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function m(d,g){function _(){}_.prototype=g.prototype,d.aa=g.prototype,d.prototype=new _,d.prototype.constructor=d,d.Qb=function(w,N,V){for(var $=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)$[Oe-2]=arguments[Oe];return g.prototype[N].apply(w,$)}}function y(d){const g=d.length;if(0<g){const _=Array(g);for(let w=0;w<g;w++)_[w]=d[w];return _}return[]}function v(d,g){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(c(w)){const N=d.length||0,V=w.length||0;d.length=N+V;for(let $=0;$<V;$++)d[N+$]=w[$]}else d.push(w)}}function E(d){return/^[\s\xa0]*$/.test(d)}function S(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function P(d){return P[" "](d),d}P[" "]=function(){};var R=!(-1==S().indexOf("Gecko")||-1!=S().toLowerCase().indexOf("webkit")&&-1==S().indexOf("Edge")||-1!=S().indexOf("Trident")||-1!=S().indexOf("MSIE")||-1!=S().indexOf("Edge"));function k(d,g,_){for(const w in d)g.call(_,d[w],w,d)}function b(d){const g={};for(const _ in d)g[_]=d[_];return g}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(d,g){let _,w;for(let N=1;N<arguments.length;N++){for(_ in w=arguments[N],w)d[_]=w[_];for(let V=0;V<D.length;V++)_=D[V],Object.prototype.hasOwnProperty.call(w,_)&&(d[_]=w[_])}}function A(d){var g=1;d=d.split(":");const _=[];for(;0<g&&d.length;)_.push(d.shift()),g--;return d.length&&_.push(d.join(":")),_}function M(d){a.setTimeout(()=>{throw d},0)}function C(){var d=Et;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}var ve=new class I{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}(()=>new Ue,d=>d.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,Lt=!1,Et=new class rt{constructor(){this.h=this.g=null}add(g,_){const w=ve.get();w.set(g,_),this.h?this.h.next=w:this.g=w,this.h=w}},oi=()=>{const d=a.Promise.resolve(void 0);Ne=()=>{d.then(tc)}};var tc=()=>{for(var d;d=C();){try{d.h.call(d.g)}catch(_){M(_)}var g=ve;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Lt=!1};function cn(){this.s=this.s,this.C=this.C}function ut(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}cn.prototype.s=!1,cn.prototype.ma=function(){this.s||(this.s=!0,this.N())},cn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ut.prototype.h=function(){this.defaultPrevented=!0};var eo=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};a.addEventListener("test",_,g),a.removeEventListener("test",_,g)}catch{}return d}();function tr(d,g){if(ut.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var _=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(R){e:{try{P(g.nodeName);var N=!0;break e}catch{}N=!1}N||(g=null)}}else"mouseover"==_?g=d.fromElement:"mouseout"==_&&(g=d.toElement);this.relatedTarget=g,w?(this.clientX=void 0!==w.clientX?w.clientX:w.pageX,this.clientY=void 0!==w.clientY?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType="string"==typeof d.pointerType?d.pointerType:to[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&tr.aa.h.call(this)}}m(tr,ut);var to={2:"touch",3:"pen",4:"mouse"};tr.prototype.h=function(){tr.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Tu="closure_listenable_"+(1e6*Math.random()|0),Ore=0;function kre(d,g,_,w,N){this.listener=d,this.proxy=null,this.src=g,this.type=_,this.capture=!!w,this.ha=N,this.key=++Ore,this.da=this.fa=!1}function xp(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Sp(d){this.src=d,this.g={},this.h=0}function iw(d,g){var _=g.type;if(_ in d.g){var V,w=d.g[_],N=Array.prototype.indexOf.call(w,g,void 0);(V=0<=N)&&Array.prototype.splice.call(w,N,1),V&&(xp(g),0==d.g[_].length&&(delete d.g[_],d.h--))}}function sw(d,g,_,w){for(var N=0;N<d.length;++N){var V=d[N];if(!V.da&&V.listener==g&&V.capture==!!_&&V.ha==w)return N}return-1}Sp.prototype.add=function(d,g,_,w,N){var V=d.toString();(d=this.g[V])||(d=this.g[V]=[],this.h++);var $=sw(d,g,w,N);return-1<$?(g=d[$],_||(g.fa=!1)):((g=new kre(g,this.src,V,!!w,N)).fa=_,d.push(g)),g};var ow="closure_lm_"+(1e6*Math.random()|0),aw={};function Hk(d,g,_,w,N){if(w&&w.once)return $k(d,g,_,w,N);if(Array.isArray(g)){for(var V=0;V<g.length;V++)Hk(d,g[V],_,w,N);return null}return _=dw(_),d&&d[Tu]?d.K(g,_,l(w)?!!w.capture:!!w,N):Uk(d,g,_,!1,w,N)}function Uk(d,g,_,w,N,V){if(!g)throw Error("Invalid event type");var $=l(N)?!!N.capture:!!N,Oe=lw(d);if(Oe||(d[ow]=Oe=new Sp(d)),(_=Oe.add(g,_,w,$,V)).proxy)return _;if(w=function Fre(){const g=Vre;return function d(_){return g.call(d.src,d.listener,_)}}(),_.proxy=w,w.src=d,w.listener=_,d.addEventListener)eo||(N=$),void 0===N&&(N=!1),d.addEventListener(g.toString(),w,N);else if(d.attachEvent)d.attachEvent(Gk(g.toString()),w);else{if(!d.addListener||!d.removeListener)throw Error("addEventListener and attachEvent are unavailable.");d.addListener(w)}return _}function $k(d,g,_,w,N){if(Array.isArray(g)){for(var V=0;V<g.length;V++)$k(d,g[V],_,w,N);return null}return _=dw(_),d&&d[Tu]?d.L(g,_,l(w)?!!w.capture:!!w,N):Uk(d,g,_,!0,w,N)}function zk(d,g,_,w,N){if(Array.isArray(g))for(var V=0;V<g.length;V++)zk(d,g[V],_,w,N);else w=l(w)?!!w.capture:!!w,_=dw(_),d&&d[Tu]?(d=d.i,(g=String(g).toString())in d.g&&-1<(_=sw(V=d.g[g],_,w,N))&&(xp(V[_]),Array.prototype.splice.call(V,_,1),0==V.length&&(delete d.g[g],d.h--))):d&&(d=lw(d))&&(g=d.g[g.toString()],d=-1,g&&(d=sw(g,_,w,N)),(_=-1<d?g[d]:null)&&cw(_))}function cw(d){if("number"!=typeof d&&d&&!d.da){var g=d.src;if(g&&g[Tu])iw(g.i,d);else{var _=d.type,w=d.proxy;g.removeEventListener?g.removeEventListener(_,w,d.capture):g.detachEvent?g.detachEvent(Gk(_),w):g.addListener&&g.removeListener&&g.removeListener(w),(_=lw(g))?(iw(_,d),0==_.h&&(_.src=null,g[ow]=null)):xp(d)}}}function Gk(d){return d in aw?aw[d]:aw[d]="on"+d}function Vre(d,g){if(d.da)d=!0;else{g=new tr(g,this);var _=d.listener,w=d.ha||d.src;d.fa&&cw(d),d=_.call(w,g)}return d}function lw(d){return(d=d[ow])instanceof Sp?d:null}var uw="__closure_events_fn_"+(1e9*Math.random()>>>0);function dw(d){return"function"==typeof d?d:(d[uw]||(d[uw]=function(g){return d.handleEvent(g)}),d[uw])}function Yt(){cn.call(this),this.i=new Sp(this),this.M=this,this.F=null}function ln(d,g){var _,w=d.F;if(w)for(_=[];w;w=w.F)_.push(w);if(d=d.M,w=g.type||g,"string"==typeof g)g=new ut(g,d);else if(g instanceof ut)g.target=g.target||d;else{var N=g;x(g=new ut(w,d),N)}if(N=!0,_)for(var V=_.length-1;0<=V;V--){var $=g.g=_[V];N=Ap($,w,!0,g)&&N}if(N=Ap($=g.g=d,w,!0,g)&&N,N=Ap($,w,!1,g)&&N,_)for(V=0;V<_.length;V++)N=Ap($=g.g=_[V],w,!1,g)&&N}function Ap(d,g,_,w){if(!(g=d.i.g[String(g)]))return!0;g=g.concat();for(var N=!0,V=0;V<g.length;++V){var $=g[V];if($&&!$.da&&$.capture==_){var Oe=$.listener,Bt=$.ha||$.src;$.fa&&iw(d.i,$),N=!1!==Oe.call(Bt,w)&&N}}return N&&!w.defaultPrevented}function qk(d,g,_){if("function"==typeof d)_&&(d=f(d,_));else{if(!d||"function"!=typeof d.handleEvent)throw Error("Invalid listener argument");d=f(d.handleEvent,d)}return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function Wk(d){d.g=qk(()=>{d.g=null,d.i&&(d.i=!1,Wk(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}m(Yt,cn),Yt.prototype[Tu]=!0,Yt.prototype.removeEventListener=function(d,g,_,w){zk(this,d,g,_,w)},Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var g,d=this.i;for(g in d.g){for(var _=d.g[g],w=0;w<_.length;w++)xp(_[w]);delete d.g[g],d.h--}}this.F=null},Yt.prototype.K=function(d,g,_,w){return this.i.add(String(d),g,!1,_,w)},Yt.prototype.L=function(d,g,_,w){return this.i.add(String(d),g,!0,_,w)};class Lre extends cn{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Wk(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cu(d){cn.call(this),this.h=d,this.g={}}m(Cu,cn);var Kk=[];function Qk(d){k(d.g,function(g,_){this.g.hasOwnProperty(_)&&cw(g)},d),d.g={}}Cu.prototype.N=function(){Cu.aa.N.call(this),Qk(this)},Cu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hw=a.JSON.stringify,Bre=a.JSON.parse,jre=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function fw(){}function Xk(){}fw.prototype.h=null;var xu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pw(){ut.call(this,"d")}function gw(){ut.call(this,"c")}m(pw,ut),m(gw,ut);var no={},Jk=null;function Mp(){return Jk=Jk||new Yt}function Zk(d){ut.call(this,no.La,d)}function Su(d){const g=Mp();ln(g,new Zk(g))}function eF(d,g){ut.call(this,no.STAT_EVENT,d),this.stat=g}function un(d){const g=Mp();ln(g,new eF(g,d))}function tF(d,g){ut.call(this,no.Ma,d),this.size=g}function Au(d,g){if("function"!=typeof d)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function Mu(){this.g=!0}function nc(d,g,_,w){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+function zre(d,g){if(!d.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_)for(d=0;d<_.length;d++)if(Array.isArray(_[d])){var w=_[d];if(!(2>w.length)){var N=w[1];if(Array.isArray(N)&&!(1>N.length)){var V=N[0];if("noop"!=V&&"stop"!=V&&"close"!=V)for(var $=1;$<N.length;$++)N[$]=""}}}return hw(_)}catch{return g}}(d,_)+(w?" "+w:"")})}no.La="serverreachability",m(Zk,ut),no.STAT_EVENT="statevent",m(eF,ut),no.Ma="timingevent",m(tF,ut),Mu.prototype.xa=function(){this.g=!1},Mu.prototype.info=function(){};var mw,Pp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nF={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Rp(){}function Qi(d,g,_,w){this.j=d,this.i=g,this.l=_,this.R=w||1,this.U=new Cu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rF}function rF(){this.i=null,this.g="",this.h=!1}m(Rp,fw),Rp.prototype.g=function(){return new XMLHttpRequest},Rp.prototype.i=function(){return{}},mw=new Rp;var iF={},_w={};function yw(d,g,_){d.L=1,d.v=Fp(ai(g)),d.m=_,d.P=!0,sF(d,null)}function sF(d,g){d.F=Date.now(),Np(d),d.A=ai(d.v);var _=d.A,w=d.R;Array.isArray(w)||(w=[String(w)]),vF(_.i,"t",w),d.C=0,_=d.j.J,d.h=new rF,d.g=VF(d.j,_?g:null,!d.m),0<d.O&&(d.M=new Lre(f(d.Y,d,d.g),d.O)),g=d.U,_=d.g,w=d.ca;var N="readystatechange";Array.isArray(N)||(N&&(Kk[0]=N.toString()),N=Kk);for(var V=0;V<N.length;V++){var $=Hk(_,N[V],w||g.handleEvent,!1,g.h||g);if(!$)break;g.g[$.key]=$}g=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Su(),function Hre(d,g,_,w,N,V){d.info(function(){if(d.g)if(V)for(var $="",Oe=V.split("&"),Bt=0;Bt<Oe.length;Bt++){var we=Oe[Bt].split("=");if(1<we.length){var Xt=we[0];we=we[1];var Jt=Xt.split("_");$=2<=Jt.length&&"type"==Jt[1]?$+(Xt+"=")+we+"&":$+(Xt+"=redacted&")}}else $=null;else $=V;return"XMLHTTP REQ ("+w+") [attempt "+N+"]: "+g+"\n"+_+"\n"+$})}(d.i,d.u,d.A,d.l,d.R,d.m)}function oF(d){return!!d.g&&"GET"==d.u&&2!=d.L&&d.j.Ca}function Gre(d,g){var _=d.C,w=g.indexOf("\n",_);return-1==w?_w:(_=Number(g.substring(_,w)),isNaN(_)?iF:(w+=1)+_>g.length?_w:(g=g.slice(w,w+_),d.C=w+_,g))}function Np(d){d.S=Date.now()+d.I,aF(d,d.I)}function aF(d,g){if(null!=d.B)throw Error("WatchDog timer not null");d.B=Au(f(d.ba,d),g)}function vw(d){d.B&&(a.clearTimeout(d.B),d.B=null)}function Pu(d){0==d.j.G||d.J||NF(d.j,d)}function ro(d){vw(d);var g=d.M;g&&"function"==typeof g.ma&&g.ma(),d.M=null,Qk(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function bw(d,g){try{var _=d.j;if(0!=_.G&&(_.g==d||Ew(_.h,d)))if(!d.K&&Ew(_.h,d)&&3==_.G){try{var w=_.Da.g.parse(g)}catch{w=null}if(Array.isArray(w)&&3==w.length){var N=w;if(0==N[0]){e:if(!_.u){if(_.g){if(!(_.g.F+3e3<d.F))break e;Hp(_),Bp(_)}Tw(_),un(18)}}else _.za=N[1],0<_.za-_.T&&37500>N[2]&&_.F&&0==_.v&&!_.C&&(_.C=Au(f(_.Za,_),6e3));if(1>=uF(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else so(_,11)}else if((d.K||_.g==d)&&Hp(_),!E(g))for(N=_.Da.g.parse(g),g=0;g<N.length;g++){let we=N[g];if(_.T=we[0],we=we[1],2==_.G)if("c"==we[0]){_.K=we[1],_.ia=we[2];const Xt=we[3];null!=Xt&&(_.la=Xt,_.j.info("VER="+_.la));const Jt=we[4];null!=Jt&&(_.Aa=Jt,_.j.info("SVER="+_.Aa));const sc=we[5];null!=sc&&"number"==typeof sc&&0<sc&&(_.L=w=1.5*sc,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const nr=d.g;if(nr){const $p=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($p){var V=w.h;V.g||-1==$p.indexOf("spdy")&&-1==$p.indexOf("quic")&&-1==$p.indexOf("h2")||(V.j=V.l,V.g=new Set,V.h&&(ww(V,V.h),V.h=null))}if(w.D){const xw=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;xw&&(w.ya=xw,Ke(w.I,w.D,xw))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-d.F,_.j.info("Handshake RTT: "+_.R+"ms"));var $=d;if((w=_).qa=FF(w,w.J?w.ia:null,w.W),$.K){dF(w.h,$);var Oe=$,Bt=w.L;Bt&&(Oe.I=Bt),Oe.B&&(vw(Oe),Np(Oe)),w.g=$}else PF(w);0<_.i.length&&jp(_)}else"stop"!=we[0]&&"close"!=we[0]||so(_,7);else 3==_.G&&("stop"==we[0]||"close"==we[0]?"stop"==we[0]?so(_,7):Dw(_):"noop"!=we[0]&&_.l&&_.l.ta(we),_.v=0)}Su()}catch{}}function cF(d){this.l=d||10,d=a.PerformanceNavigationTiming?0<(d=a.performance.getEntriesByType("navigation")).length&&("hq"==d[0].nextHopProtocol||"h2"==d[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lF(d){return!!d.h||!!d.g&&d.g.size>=d.j}function uF(d){return d.h?1:d.g?d.g.size:0}function Ew(d,g){return d.h?d.h==g:!!d.g&&d.g.has(g)}function ww(d,g){d.g?d.g.add(g):d.h=g}function dF(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}function hF(d){if(null!=d.h)return d.i.concat(d.h.D);if(null!=d.g&&0!==d.g.size){let g=d.i;for(const _ of d.g.values())g=g.concat(_.D);return g}return y(d.i)}function fF(d,g){if(d.forEach&&"function"==typeof d.forEach)d.forEach(g,void 0);else if(c(d)||"string"==typeof d)Array.prototype.forEach.call(d,g,void 0);else for(var _=function Kre(d){if(d.na&&"function"==typeof d.na)return d.na();if(!d.V||"function"!=typeof d.V){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||"string"==typeof d){var g=[];d=d.length;for(var _=0;_<d;_++)g.push(_);return g}g=[],_=0;for(const w in d)g[_++]=w;return g}}}(d),w=function Wre(d){if(d.V&&"function"==typeof d.V)return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if("string"==typeof d)return d.split("");if(c(d)){for(var g=[],_=d.length,w=0;w<_;w++)g.push(d[w]);return g}for(w in g=[],_=0,d)g[_++]=d[w];return g}(d),N=w.length,V=0;V<N;V++)g.call(void 0,w[V],_&&_[V],d)}Qi.prototype.ca=function(d){d=d.target;const g=this.M;g&&3==ci(d)?g.j():this.Y(d)},Qi.prototype.Y=function(d){try{if(d==this.g)e:{const Jt=ci(this.g);var g=this.g.Ba();if(this.g.Z(),!(3>Jt)&&(3!=Jt||this.g&&(this.h.h||this.g.oa()||CF(this.g)))){this.J||4!=Jt||7==g||Su(),vw(this);var _=this.g.Z();this.X=_;t:if(oF(this)){var w=CF(this.g);d="";var N=w.length,V=4==ci(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ro(this),Pu(this);var $="";break t}this.h.i=new a.TextDecoder}for(g=0;g<N;g++)this.h.h=!0,d+=this.h.i.decode(w[g],{stream:!(V&&g==N-1)});w.length=0,this.h.g+=d,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=200==_,function Ure(d,g,_,w,N,V,$){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+N+"]: "+g+"\n"+_+"\n"+V+" "+$})}(this.i,this.u,this.A,this.l,this.R,Jt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,Bt=this.g;if((Oe=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Oe)){var we=Oe;break t}}we=null}if(!(_=we)){this.o=!1,this.s=3,un(12),ro(this),Pu(this);break e}nc(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bw(this,_)}if(this.P){let nr;for(_=!0;!this.J&&this.C<$.length;){if(nr=Gre(this,$),nr==_w){4==Jt&&(this.s=4,un(14),_=!1),nc(this.i,this.l,null,"[Incomplete Response]");break}if(nr==iF){this.s=4,un(15),nc(this.i,this.l,$,"[Invalid Chunk]"),_=!1;break}nc(this.i,this.l,nr,null),bw(this,nr)}if(oF(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Jt||0!=$.length||this.h.h||(this.s=1,un(16),_=!1),this.o=this.o&&_,_){if(0<$.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Cw(Xt),Xt.M=!0,un(11))}}else nc(this.i,this.l,$,"[Invalid Chunked Response]"),ro(this),Pu(this)}else nc(this.i,this.l,$,null),bw(this,$);4==Jt&&ro(this),this.o&&!this.J&&(4==Jt?NF(this.j,this):(this.o=!1,Np(this)))}else(function cie(d){const g={};d=(d.g&&2<=ci(d)&&d.g.getAllResponseHeaders()||"").split("\r\n");for(let w=0;w<d.length;w++){if(E(d[w]))continue;var _=A(d[w]);const N=_[0];if("string"!=typeof(_=_[1]))continue;_=_.trim();const V=g[N]||[];g[N]=V,V.push(_)}!function T(d,g){for(const _ in d)g.call(void 0,d[_],_,d)}(g,function(w){return w.join(", ")})})(this.g),400==_&&0<$.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),ro(this),Pu(this)}}}catch{}},Qi.prototype.cancel=function(){this.J=!0,ro(this)},Qi.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(function $re(d,g){d.info(function(){return"TIMEOUT: "+g})}(this.i,this.A),2!=this.L&&(Su(),un(17)),ro(this),this.s=2,Pu(this)):aF(this,this.S-d)},cF.prototype.cancel=function(){if(this.i=hF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const d of this.g.values())d.cancel();this.g.clear()}};var pF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function io(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof io){this.h=d.h,Op(this,d.j),this.o=d.o,this.g=d.g,kp(this,d.s),this.l=d.l;var g=d.i,_=new Ou;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),gF(this,_),this.m=d.m}else d&&(g=String(d).match(pF))?(this.h=!1,Op(this,g[1]||"",!0),this.o=Ru(g[2]||""),this.g=Ru(g[3]||"",!0),kp(this,g[4]),this.l=Ru(g[5]||"",!0),gF(this,g[6]||"",!0),this.m=Ru(g[7]||"")):(this.h=!1,this.i=new Ou(null,this.h))}function ai(d){return new io(d)}function Op(d,g,_){d.j=_?Ru(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function kp(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function gF(d,g,_){g instanceof Ou?(d.i=g,function tie(d,g){g&&!d.j&&(Yi(d),d.i=null,d.g.forEach(function(_,w){var N=w.toLowerCase();w!=N&&(_F(this,w),vF(this,N,_))},d)),d.j=g}(d.i,d.h)):(_||(g=Nu(g,Zre)),d.i=new Ou(g,d.h))}function Ke(d,g,_){d.i.set(g,_)}function Fp(d){return Ke(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ru(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Nu(d,g,_){return"string"==typeof d?(d=encodeURI(d).replace(g,Yre),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Yre(d){return"%"+((d=d.charCodeAt(0))>>4&15).toString(16)+(15&d).toString(16)}io.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Nu(g,mF,!0),":");var _=this.g;return(_||"file"==g)&&(d.push("//"),(g=this.o)&&d.push(Nu(g,mF,!0),"@"),d.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(_=this.s)&&d.push(":",String(_))),(_=this.l)&&(this.g&&"/"!=_.charAt(0)&&d.push("/"),d.push(Nu(_,"/"==_.charAt(0)?Jre:Xre,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",Nu(_,eie)),d.join("")};var d,mF=/[#\/\?@]/g,Xre=/[#\?:]/g,Jre=/[#\?]/g,Zre=/[#\?@]/g,eie=/#/g;function Ou(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Yi(d){d.g||(d.g=new Map,d.h=0,d.i&&function Qre(d,g){if(d){d=d.split("&");for(var _=0;_<d.length;_++){var w=d[_].indexOf("="),N=null;if(0<=w){var V=d[_].substring(0,w);N=d[_].substring(w+1)}else V=d[_];g(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}(d.i,function(g,_){d.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}function _F(d,g){Yi(d),g=rc(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function yF(d,g){return Yi(d),g=rc(d,g),d.g.has(g)}function vF(d,g,_){_F(d,g),0<_.length&&(d.i=null,d.g.set(rc(d,g),y(_)),d.h+=_.length)}function rc(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Xi(d,g,_,w,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),w(_)}catch{}}function iie(){this.g=new jre}function sie(d,g,_){const w=_||"";try{fF(d,function(N,V){let $=N;l(N)&&($=hw(N)),g.push(w+V+"="+encodeURIComponent($))})}catch(N){throw g.push(w+"type="+encodeURIComponent("_badmap")),N}}function ku(d){this.l=d.Ub||null,this.j=d.eb||!1}function Vp(d,g){Yt.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function bF(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}function Fu(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Vu(d)}function Vu(d){d.onreadystatechange&&d.onreadystatechange.call(d)}function EF(d){let g="";return k(d,function(_,w){g+=w,g+=":",g+=_,g+="\r\n"}),g}function Iw(d,g,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=EF(_),"string"==typeof d?null!=_&&encodeURIComponent(String(_)):Ke(d,g,_))}function dt(d){Yt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Ou.prototype).add=function(d,g){Yi(this),this.i=null,d=rc(this,d);var _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(g),this.h+=1,this},n.forEach=function(d,g){Yi(this),this.g.forEach(function(_,w){_.forEach(function(N){d.call(g,N,w,this)},this)},this)},n.na=function(){Yi(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let w=0;w<g.length;w++){const N=d[w];for(let V=0;V<N.length;V++)_.push(g[w])}return _},n.V=function(d){Yi(this);let g=[];if("string"==typeof d)yF(this,d)&&(g=g.concat(this.g.get(rc(this,d))));else{d=Array.from(this.g.values());for(let _=0;_<d.length;_++)g=g.concat(d[_])}return g},n.set=function(d,g){return Yi(this),this.i=null,yF(this,d=rc(this,d))&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d&&0<(d=this.V(d)).length?String(d[0]):g},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var w=g[_];const V=encodeURIComponent(String(w)),$=this.V(w);for(w=0;w<$.length;w++){var N=V;""!==$[w]&&(N+="="+encodeURIComponent(String($[w]))),d.push(N)}}return this.i=d.join("&")},m(ku,fw),ku.prototype.g=function(){return new Vp(this.l,this.j)},ku.prototype.i=(d={},function(){return d}),m(Vp,Yt),(n=Vp.prototype).open=function(d,g){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Vu(this)},n.send=function(d){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fu(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Vu(this)),this.g&&(this.readyState=3,Vu(this),this.g)))if("arraybuffer"===this.responseType)d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bF(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Fu(this):Vu(this),3==this.readyState&&bF(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Fu(this))},n.Qa=function(d){this.g&&(this.response=d,Fu(this))},n.ga=function(){this.g&&Fu(this)},n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var _=g.next();!_.done;)d.push((_=_.value)[0]+": "+_[1]),_=g.next();return d.join("\r\n")},Object.defineProperty(Vp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(d){this.m=d?"include":"same-origin"}}),m(dt,Yt);var oie=/^https?$/i,aie=["POST","PUT"];function wF(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,IF(d),Lp(d)}function IF(d){d.A||(d.A=!0,ln(d,"complete"),ln(d,"error"))}function DF(d){if(d.h&&typeof o<"u"&&(!d.v[1]||4!=ci(d)||2!=d.Z()))if(d.u&&4==ci(d))qk(d.Ea,0,d);else if(ln(d,"readystatechange"),4==ci(d)){d.h=!1;try{const $=d.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var w;if(w=0===$){var N=String(d.D).match(pF)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),w=!oie.test(N?N.toLowerCase():"")}_=w}if(_)ln(d,"complete"),ln(d,"success");else{d.m=6;try{var V=2<ci(d)?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.Z()+"]",IF(d)}}finally{Lp(d)}}}function Lp(d,g){if(d.g){TF(d);const _=d.g,w=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||ln(d,"ready");try{_.onreadystatechange=w}catch{}}}function TF(d){d.I&&(a.clearTimeout(d.I),d.I=null)}function ci(d){return d.g?d.g.readyState:0}function CF(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Lu(d,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||g}function xF(d){this.Aa=0,this.i=[],this.j=new Mu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lu("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lu("baseRetryDelayMs",5e3,d),this.cb=Lu("retryDelaySeedMs",1e4,d),this.Wa=Lu("forwardChannelMaxRetries",2,d),this.wa=Lu("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new cF(d&&d.concurrentRequestLimit),this.Da=new iie,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Dw(d){if(SF(d),3==d.G){var g=d.U++,_=ai(d.I);if(Ke(_,"SID",d.K),Ke(_,"RID",g),Ke(_,"TYPE","terminate"),Bu(d,_),(g=new Qi(d,d.j,g)).L=2,g.v=Fp(ai(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&a.Image&&((new Image).src=g.v,_=!0),_||(g.g=VF(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Np(g)}kF(d)}function Bp(d){d.g&&(Cw(d),d.g.cancel(),d.g=null)}function SF(d){Bp(d),d.u&&(a.clearTimeout(d.u),d.u=null),Hp(d),d.h.cancel(),d.s&&("number"==typeof d.s&&a.clearTimeout(d.s),d.s=null)}function jp(d){if(!lF(d.h)&&!d.s){d.s=!0;var g=d.Ga;Ne||oi(),Lt||(Ne(),Lt=!0),Et.add(g,d),d.B=0}}function AF(d,g){var _;_=g?g.l:d.U++;const w=ai(d.I);Ke(w,"SID",d.K),Ke(w,"RID",_),Ke(w,"AID",d.T),Bu(d,w),d.m&&d.o&&Iw(w,d.m,d.o),_=new Qi(d,d.j,_,d.B+1),null===d.m&&(_.H=d.o),g&&(d.i=g.D.concat(d.i)),g=MF(d,_,1e3),_.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ww(d.h,_),yw(_,w,g)}function Bu(d,g){d.H&&k(d.H,function(_,w){Ke(g,w,_)}),d.l&&fF({},function(_,w){Ke(g,w,_)})}function MF(d,g,_){_=Math.min(d.i.length,_);var w=d.l?f(d.l.Na,d.l,d):null;e:{var N=d.i;let V=-1;for(;;){const $=["count="+_];-1==V?0<_?(V=N[0].g,$.push("ofs="+V)):V=0:$.push("ofs="+V);let Oe=!0;for(let Bt=0;Bt<_;Bt++){let we=N[Bt].g;const Xt=N[Bt].map;if(we-=V,0>we)V=Math.max(0,N[Bt].g-100),Oe=!1;else try{sie(Xt,$,"req"+we+"_")}catch{w&&w(Xt)}}if(Oe){w=$.join("&");break e}}}return d=d.i.splice(0,_),g.D=d,w}function PF(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Ne||oi(),Lt||(Ne(),Lt=!0),Et.add(g,d),d.v=0}}function Tw(d){return!(d.g||d.u||3<=d.v||(d.Y++,d.u=Au(f(d.Fa,d),OF(d,d.v)),d.v++,0))}function Cw(d){null!=d.A&&(a.clearTimeout(d.A),d.A=null)}function RF(d){d.g=new Qi(d,d.j,"rpc",d.Y),null===d.m&&(d.g.H=d.o),d.g.O=0;var g=ai(d.qa);Ke(g,"RID","rpc"),Ke(g,"SID",d.K),Ke(g,"AID",d.T),Ke(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ke(g,"TO",d.ja),Ke(g,"TYPE","xmlhttp"),Bu(d,g),d.m&&d.o&&Iw(g,d.m,d.o),d.L&&(d.g.I=d.L);var _=d.g;d=d.ia,_.L=1,_.v=Fp(ai(g)),_.m=null,_.P=!0,sF(_,d)}function Hp(d){null!=d.C&&(a.clearTimeout(d.C),d.C=null)}function NF(d,g){var _=null;if(d.g==g){Hp(d),Cw(d),d.g=null;var w=2}else{if(!Ew(d.h,g))return;_=g.D,dF(d.h,g),w=1}if(0!=d.G)if(g.o)if(1==w){_=g.m?g.m.length:0,g=Date.now()-g.F;var N=d.B;ln(w=Mp(),new tF(w,_)),jp(d)}else PF(d);else if(3==(N=g.s)||0==N&&0<g.X||!(1==w&&function lie(d,g){return!(uF(d.h)>=d.h.j-(d.s?1:0)||(d.s?(d.i=g.D.concat(d.i),0):1==d.G||2==d.G||d.B>=(d.Va?0:d.Wa)||(d.s=Au(f(d.Ga,d,g),OF(d,d.B)),d.B++,0)))}(d,g)||2==w&&Tw(d)))switch(_&&0<_.length&&(g=d.h,g.i=g.i.concat(_)),N){case 1:so(d,5);break;case 4:so(d,10);break;case 3:so(d,6);break;default:so(d,2)}}function OF(d,g){let _=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(_*=2),_*g}function so(d,g){if(d.j.info("Error code "+g),2==g){var _=f(d.fb,d),w=d.Xa;const N=!w;w=new io(w||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Op(w,"https"),Fp(w),N?function nie(d,g){const _=new Mu;if(a.Image){const w=new Image;w.onload=p(Xi,_,"TestLoadImage: loaded",!0,g,w),w.onerror=p(Xi,_,"TestLoadImage: error",!1,g,w),w.onabort=p(Xi,_,"TestLoadImage: abort",!1,g,w),w.ontimeout=p(Xi,_,"TestLoadImage: timeout",!1,g,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else g(!1)}(w.toString(),_):function rie(d,g){new Mu;const w=new AbortController,N=setTimeout(()=>{w.abort(),Xi(0,0,!1,g)},1e4);fetch(d,{signal:w.signal}).then(V=>{clearTimeout(N),Xi(0,0,!!V.ok,g)}).catch(()=>{clearTimeout(N),Xi(0,0,!1,g)})}(w.toString(),_)}else un(2);d.G=0,d.l&&d.l.sa(g),kF(d),SF(d)}function kF(d){if(d.G=0,d.ka=[],d.l){const g=hF(d.h);(0!=g.length||0!=d.i.length)&&(v(d.ka,g),v(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function FF(d,g,_){var w=_ instanceof io?ai(_):new io(_);if(""!=w.g)g&&(w.g=g+"."+w.g),kp(w,w.s);else{var N=a.location;w=N.protocol,g=g?g+"."+N.hostname:N.hostname,N=+N.port;var V=new io(null);w&&Op(V,w),g&&(V.g=g),N&&kp(V,N),_&&(V.l=_),w=V}return g=d.ya,(_=d.D)&&g&&Ke(w,_,g),Ke(w,"VER",d.la),Bu(d,w),w}function VF(d,g,_){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return(g=new dt(d.Ca&&!d.pa?new ku({eb:_}):d.pa)).Ha(d.J),g}function LF(){}function Up(){}function Nn(d,g){Yt.call(this),this.g=new xF(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!E(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!E(g)&&(this.g.D=g,null!==(d=this.h)&&g in d&&g in(d=this.h)&&delete d[g]),this.j=new ic(this)}function BF(d){pw.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const _ in g){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,g=null!==g&&d in g?g[d]:void 0),this.data=g}else this.data=d}function jF(){gw.call(this),this.status=1}function ic(d){this.g=d}(n=dt.prototype).Ha=function(d){this.J=d},n.ea=function(d,g,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mw.g(),this.v=function Yk(d){return d.h||(d.h=d.i())}(this.o?this.o:mw),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(V){return void wF(this,V)}if(d=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var N in w)_.set(N,w[N]);else{if("function"!=typeof w.keys||"function"!=typeof w.get)throw Error("Unknown input type for opt_headers: "+String(w));for(const V of w.keys())_.set(V,w.get(V))}w=Array.from(_.keys()).find(V=>"content-type"==V.toLowerCase()),N=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(aie,g,void 0))||w||N||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of _)this.g.setRequestHeader(V,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{TF(this),this.u=!0,this.g.send(d),this.u=!1}catch(V){wF(this,V)}},n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ln(this,"complete"),ln(this,"abort"),Lp(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lp(this,!0)),dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?DF(this):this.bb())},n.bb=function(){DF(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&0==g.indexOf(d)&&(g=g.substring(d.length)),Bre(g)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=xF.prototype).la=8,n.G=1,n.connect=function(d,g,_,w){un(0),this.W=d,this.H=g||{},_&&void 0!==w&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=FF(this,null,this.W),jp(this)},n.Ga=function(d){if(this.s)if(this.s=null,1==this.G){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const N=new Qi(this,this.j,d);let V=this.o;if(this.S&&(V?(V=b(V),x(V,this.S)):V=this.S),null!==this.m||this.O||(N.H=V,V=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){var w=this.i[_];if(void 0===(w="__data__"in w.map&&"string"==typeof(w=w.map.__data__)?w.length:void 0))break;if(4096<(g+=w)){g=_;break e}if(4096===g||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=MF(this,N,g),Ke(_=ai(this.I),"RID",d),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),Bu(this,_),V&&(this.O?g="headers="+encodeURIComponent(String(EF(V)))+"&"+g:this.m&&Iw(_,this.m,V)),ww(this.h,N),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",g),Ke(_,"SID","null"),N.T=!0,yw(N,_,null)):yw(N,_,g),this.G=2}}else 3==this.G&&(d?AF(this,d):0==this.i.length||lF(this.h)||AF(this))},n.Fa=function(){if(this.u=null,RF(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Au(f(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),Bp(this),RF(this))},n.Za=function(){null!=this.C&&(this.C=null,Bp(this),Tw(this),un(19))},n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=LF.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},Up.prototype.g=function(d,g){return new Nn(d,g)},m(Nn,Yt),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Dw(this.g)},Nn.prototype.o=function(d){var g=this.g;if("string"==typeof d){var _={};_.__data__=d,d=_}else this.u&&((_={}).__data__=hw(d),d=_);g.i.push(new class{constructor(d,g){this.g=d,this.map=g}}(g.Ya++,d)),3==g.G&&jp(g)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Dw(this.g),delete this.g,Nn.aa.N.call(this)},m(BF,pw),m(jF,gw),m(ic,LF),ic.prototype.ua=function(){ln(this.g,"a")},ic.prototype.ta=function(d){ln(this.g,new BF(d))},ic.prototype.sa=function(d){ln(this.g,new jF)},ic.prototype.ra=function(){ln(this.g,"b")},Up.prototype.createWebChannel=Up.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,hM=$r.createWebChannelTransport=function(){return new Up},dM=$r.getStatEventTarget=function(){return Mp()},uM=$r.Event=no,By=$r.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pp.NO_ERROR=0,Pp.TIMEOUT=8,Pp.HTTP_ERROR=6,$h=$r.ErrorCode=Pp,nF.COMPLETE="complete",lM=$r.EventType=nF,Xk.EventType=xu,xu.OPEN="a",xu.CLOSE="b",xu.ERROR="c",xu.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,gl=$r.WebChannel=Xk,$r.FetchXmlHttpFactory=ku,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,cM=$r.XhrIo=dt}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});const fM="@firebase/firestore";class xt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");let ia="11.0.2";const Di=new zA("@firebase/firestore");function sa(){return Di.logLevel}function B(n,...e){if(Di.logLevel<=_e.DEBUG){const t=e.map(jy);Di.debug(`Firestore (${ia}): ${n}`,...t)}}function gt(n,...e){if(Di.logLevel<=_e.ERROR){const t=e.map(jy);Di.error(`Firestore (${ia}): ${n}`,...t)}}function Un(n,...e){if(Di.logLevel<=_e.WARN){const t=e.map(jy);Di.warn(`Firestore (${ia}): ${n}`,...t)}}function jy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function q(n="Unexpected state"){const e=`FIRESTORE (${ia}) INTERNAL ASSERTION FAILED: `+n;throw gt(e),new Error(e)}function K(n,e){n||q()}function U(n,e){return n}const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends ra{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class St{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class v8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}}class b8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class E8{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;K(void 0===this.o);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new St;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new St,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable(H(function*(){yield l.promise,yield s(r.currentUser)}))},c=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new St)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K("string"==typeof r.accessToken),new pM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return K(null===e||"string"==typeof e),new xt(e)}}class w8{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class I8{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new w8(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(void 0===this.o);const r=s=>{null!=s.error&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K("string"==typeof t.token),this.R=t.token,new gM(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function T8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class mM{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=T8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function J(n,e){return n<e?-1:n>e?1:0}function oa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Q{static fromTimestamp(e){return new Q(e)}static min(){return new Q(new et(0,0))}static max(){return new Q(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ml{constructor(e,t,r){void 0===t?t=0:t>e.length&&q(),void 0===r?r=e.length-t:r>e.length-t&&q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ml.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ue extends ml{construct(e,t,r){return new ue(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ue(t)}static emptyPath(){return new ue([])}}const C8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends ml{construct(e,t,r){return new Ye(e,t,r)}static isValidIdentifier(e){return C8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new j(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new j(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new j(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(t)}static emptyPath(){return new Ye([])}}class z{constructor(e){this.path=e}static fromPath(e){return new z(ue.fromString(e))}static fromName(e){return new z(ue.fromString(e).popFirst(5))}static empty(){return new z(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ue.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new z(new ue(e.slice()))}}function vM(n){return new An(n.readTime,n.key,-1)}class An{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new An(Q.min(),z.empty(),-1)}static max(){return new An(Q.max(),z.empty(),-1)}}function Uy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=z.comparator(n.documentKey,e.documentKey),0!==t?t:J(n.largestBatchId,e.largestBatchId))}const bM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ti(n){return $y.apply(this,arguments)}function $y(){return($y=H(function*(n){if(n.code!==F.FAILED_PRECONDITION||n.message!==bM)throw n;B("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof O?t:O.resolve(t)}catch(t){return O.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):O.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):O.reject(t)}static resolve(e){return new O((t,r)=>{t(e)})}static reject(e){return new O((t,r)=>{r(e)})}static waitFor(e){return new O((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=O.resolve(!1);for(const r of e)t=t.next(i=>i?O.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new O((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Ci(n){return"IndexedDbTransactionError"===n.name}let Mn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function yl(n){return null==n}function vl(n){return 0===n&&1/n==-1/0}function N8(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function TM(n){return n+"\x01\x01"}function PM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}class je{constructor(e,t){this.comparator=e,this.root=t||kt.EMPTY}insert(e,t){return new je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new kt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();const e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1,kt.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,t,r,i,s){return this}insert(e,t,r){return new kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Se{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OM(this.data.getIterator())}getIteratorFrom(e){return new OM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Se)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Se(this.comparator);return t.data=e,t}}class OM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vn{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new vn([])}unionWith(e){let t=new Se(Ye.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class kM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new kM("Invalid base64 string: "+s):s}}(e);return new ct(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const J8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(n){if(K(!!n),"string"==typeof n){let e=0;const t=J8.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(n.seconds),nanos:Xe(n.nanos)}}function Xe(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Gr(n){return"string"==typeof n?ct.fromBase64String(n):ct.fromUint8Array(n)}function Wh(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kh(n){const e=n.mapValue.fields.__previous_value__;return Wh(e)?Kh(e):e}function bl(n){const e=zr(n.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}class Z8{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Ts{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ts("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ts&&e.projectId===this.projectId&&e.database===this.database}}const Si={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ai(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wh(n)?4:jM(n)?9007199254740991:Jh(n)?10:11:q()}function vr(n,e){if(n===e)return!0;const t=Ai(n);if(t!==Ai(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bl(n).isEqual(bl(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=zr(i.timestampValue),a=zr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Gr(n.bytesValue).isEqual(Gr(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Xe(i.doubleValue),a=Xe(s.doubleValue);return o===a?vl(o)===vl(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return oa(n.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(PM(o)!==PM(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!vr(o[c],a[c])))return!1;return!0}(n,e);default:return q()}var s}function El(n,e){return void 0!==(n.values||[]).find(t=>vr(t,e))}function Mi(n,e){if(n===e)return 0;const t=Ai(n),r=Ai(e);if(t!==r)return J(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return J(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Xe(s.integerValue||s.doubleValue),c=Xe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return FM(n.timestampValue,e.timestampValue);case 4:return FM(bl(n),bl(e));case 5:return J(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Gr(s),c=Gr(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=J(a[l],c[l]);if(0!==u)return u}return J(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=J(Xe(s.latitude),Xe(o.latitude));return 0!==a?a:J(Xe(s.longitude),Xe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return VM(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,u;const p=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,m=null===(c=(o.fields||{}).value)||void 0===c?void 0:c.arrayValue,y=J((null===(l=p?.values)||void 0===l?void 0:l.length)||0,(null===(u=m?.values)||void 0===u?void 0:u.length)||0);return 0!==y?y:VM(p,m)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Si.mapValue&&o===Si.mapValue)return 0;if(s===Si.mapValue)return 1;if(o===Si.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const f=J(c[h],u[h]);if(0!==f)return f;const p=Mi(a[c[h]],l[u[h]]);if(0!==p)return p}return J(c.length,u.length)}(n.mapValue,e.mapValue);default:throw q()}}function FM(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return J(n,e);const t=zr(n),r=zr(e),i=J(t.seconds,r.seconds);return 0!==i?i:J(t.nanos,r.nanos)}function VM(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Mi(t[i],r[i]);if(s)return s}return J(t.length,r.length)}function ua(n){return Wy(n)}function Wy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=zr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Gr(n.bytesValue).toBase64():"referenceValue"in n?z.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Wy(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Wy(t.fields[o])}`;return i+"}"}(n.mapValue):q()}function Yh(n){switch(Ai(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(n);return e?16+Yh(e):16;case 5:return 2*n.stringValue.length;case 6:return Gr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(n.arrayValue.values||[]).reduce((i,s)=>i+Yh(s),0);case 10:case 11:return function(r){let i=0;return xi(r.fields,(s,o)=>{i+=s.length+Yh(o)}),i}(n.mapValue);default:throw q()}}function Ky(n){return!!n&&"integerValue"in n}function wl(n){return!!n&&"arrayValue"in n}function LM(n){return!!n&&"nullValue"in n}function BM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xh(n){return!!n&&"mapValue"in n}function Jh(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Il(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Il(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Il(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jM(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Il(t)}setAll(e){let t=Ye.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Il(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Xh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Xh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xi(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ft(Il(this.value))}}class $e{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $e(e,0,Q.min(),Q.min(),Q.min(),Ft.empty(),0)}static newFoundDocument(e,t,r,i){return new $e(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new $e(e,2,t,Q.min(),Q.min(),Ft.empty(),0)}static newUnknownDocument(e,t){return new $e(e,3,t,Q.min(),Q.min(),Ft.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pi{constructor(e,t){this.position=e,this.inclusive=t}}function GM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?z.comparator(z.fromName(o.referenceValue),t.key):Mi(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function qM(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vr(n.position[t],e.position[t]))return!1;return!0}class Dl{constructor(e,t="asc"){this.field=e,this.dir=t}}function nq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class WM{}class de extends WM{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new rq(e,t,r):"array-contains"===t?new oq(e,r):"in"===t?new ZM(e,r):"not-in"===t?new aq(e,r):"array-contains-any"===t?new cq(e,r):new de(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new iq(e,r):new sq(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mi(t,this.value)):null!==t&&Ai(this.value)===Ai(t)&&this.matchesComparison(Mi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ae extends WM{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ae(e,t)}matches(e){return da(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function da(n){return"and"===n.op}function Yy(n){return function KM(n){for(const e of n.filters)if(e instanceof Ae)return!1;return!0}(n)&&da(n)}function Xy(n){if(n instanceof de)return n.field.canonicalString()+n.op.toString()+ua(n.value);if(Yy(n))return n.filters.map(e=>Xy(e)).join(",");{const e=n.filters.map(t=>Xy(t)).join(",");return`${n.op}(${e})`}}function QM(n,e){return n instanceof de?(r=n,(i=e)instanceof de&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)):n instanceof Ae?function(r,i){return i instanceof Ae&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&QM(o,i.filters[a]),!0)}(n,e):void q();var r,i}function XM(n){return n instanceof de?`${(t=n).field.canonicalString()} ${t.op} ${ua(t.value)}`:n instanceof Ae?function(t){return t.op.toString()+" {"+t.getFilters().map(XM).join(" ,")+"}"}(n):"Filter";var t}class rq extends de{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){const t=z.comparator(e.key,this.key);return this.matchesComparison(t)}}class iq extends de{constructor(e,t){super(e,"in",t),this.keys=JM(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sq extends de{constructor(e,t){super(e,"not-in",t),this.keys=JM(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function JM(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}class oq extends de{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wl(t)&&El(t.arrayValue,this.value)}}class ZM extends de{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&El(this.value.arrayValue,t)}}class aq extends de{constructor(e,t){super(e,"not-in",t)}matches(e){if(El(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!El(this.value.arrayValue,t)}}class cq extends de{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>El(this.value.arrayValue,r))}}class lq{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Jy(n,e=null,t=[],r=[],i=null,s=null,o=null){return new lq(n,e,t,r,i,s,o)}function xs(n){const e=U(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Xy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),yl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ua(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ua(r)).join(",")),e.ue=t}return e.ue}function Tl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!QM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qM(n.startAt,e.startAt)&&qM(n.endAt,e.endAt)}function Zh(n){return z.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class qr{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function ha(n){return new qr(n)}function rP(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function fa(n){const e=U(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Se(Ye.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Dl(s,r))}),t.has(Ye.keyField().canonicalString())||e.ce.push(new Dl(Ye.keyField(),r))}return e.ce}function zt(n){const e=U(n);return e.le||(e.le=function sP(n,e){if("F"===n.limitType)return Jy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Dl(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Pi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Pi(n.startAt.position,n.startAt.inclusive):null;return Jy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,fa(n))),e.le}function tf(n,e,t){return new qr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cl(n,e){return Tl(zt(n),zt(e))&&n.limitType===e.limitType}function oP(n){return`${xs(zt(n))}|lt:${n.limitType}`}function pa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>XM(i)).join(", ")}]`),yl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ua(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ua(i)).join(",")),`Target(${r})`}(zt(n))}; limitType=${n.limitType})`}function xl(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of fa(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const l=GM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,fa(r),i)||r.endAt&&!function(o,a,c){const l=GM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,fa(r),i)));var r,i}function cP(n){return(e,t)=>{let r=!1;for(const i of fa(n)){const s=uq(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function uq(n,e,t){const r=n.field.isKeyField()?z.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return null!==c&&null!==l?Mi(c,l):q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}class Wr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return function NM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const dq=new je(z.comparator);function bn(){return dq}const lP=new je(z.comparator);function Sl(...n){let e=lP;for(const t of n)e=e.insert(t.key,t);return e}function uP(n){let e=lP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function br(){return Al()}function dP(){return Al()}function Al(){return new Wr(n=>n.toString(),(n,e)=>n.isEqual(e))}new je(z.comparator);const fq=new Se(z.comparator);function se(...n){let e=fq;for(const t of n)e=e.add(t);return e}const pq=new Se(J);class nf{constructor(){this._=void 0}}function gq(n,e,t){return n instanceof ga?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wh(s)&&(s=Kh(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ss?gP(n,e):n instanceof As?mP(n,e):function(i,s){const o=function pP(n,e){return n instanceof ma?Ky(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}(i,s),a=_P(o)+_P(i.Pe);return Ky(o)&&Ky(i.Pe)?function hP(n){return{integerValue:""+n}}(a):function nv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}(i.serializer,a)}(n,e)}function mq(n,e,t){return n instanceof Ss?gP(n,e):n instanceof As?mP(n,e):t}class ga extends nf{}class Ss extends nf{constructor(e){super(),this.elements=e}}function gP(n,e){const t=yP(e);for(const r of n.elements)t.some(i=>vr(i,r))||t.push(r);return{arrayValue:{values:t}}}class As extends nf{constructor(e){super(),this.elements=e}}function mP(n,e){let t=yP(e);for(const r of n.elements)t=t.filter(i=>!vr(i,r));return{arrayValue:{values:t}}}class ma extends nf{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function _P(n){return Xe(n.integerValue||n.doubleValue)}function yP(n){return wl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Je{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Je}static exists(e){return new Je(void 0,e)}static updateTime(e){return new Je(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class sf{}function vP(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ya(n.key,Je.none()):new _a(n.key,n.data,Je.none());{const t=n.data,r=Ft.empty();let i=new Se(Ye.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Kr(n.key,r,new vn(i.toArray()),Je.none())}}function vq(n,e,t){n instanceof _a?function(i,s,o){const a=i.value.clone(),c=wP(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Kr?function(i,s,o){if(!rf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=wP(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(EP(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pl(n,e,t,r){return n instanceof _a?function(s,o,a,c){if(!rf(s.precondition,o))return a;const l=s.value.clone(),u=IP(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Kr?function(s,o,a,c){if(!rf(s.precondition,o))return a;const l=IP(s.fieldTransforms,c,o),u=o.data;return u.setAll(EP(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):(a=t,rf(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function bP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&oa(r,i,(s,o)=>function _q(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Ss&&i instanceof Ss||r instanceof As&&i instanceof As?oa(r.elements,i.elements,vr):r instanceof ma&&i instanceof ma?vr(r.Pe,i.Pe):r instanceof ga&&i instanceof ga);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class _a extends sf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Kr extends sf{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function EP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function wP(n,e,t){const r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,mq(o,a,t[i]))}return r}function IP(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,gq(s,o,e))}return r}class ya extends sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&vq(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Pl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dP();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=vP(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,(t,r)=>bP(t,r))&&oa(this.baseMutations,e.baseMutations,(t,r)=>bP(t,r))}}class ov{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Eq{constructor(e,t){this.count=e,this.unchangedNames=t}}var bt,ye;function CP(n){if(void 0===n)return gt("GRPC error has no .code"),F.UNKNOWN;switch(n){case bt.OK:return F.OK;case bt.CANCELLED:return F.CANCELLED;case bt.UNKNOWN:return F.UNKNOWN;case bt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case bt.INTERNAL:return F.INTERNAL;case bt.UNAVAILABLE:return F.UNAVAILABLE;case bt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case bt.NOT_FOUND:return F.NOT_FOUND;case bt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case bt.ABORTED:return F.ABORTED;case bt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case bt.DATA_LOSS:return F.DATA_LOSS;default:return q()}}(ye=bt||(bt={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";const wq=new Es([4294967295,4294967295],0);function SP(n){const e=function xP(){return new TextEncoder}().encode(n),t=new aM;return t.update(e),new Uint8Array(t.digest())}function AP(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Es([t,r],0),new Es([i,s],0)]}class av{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rl(`Invalid padding: ${t}`);if(r<0)throw new Rl(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Rl(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Rl(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Es.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(Es.fromNumber(r)));return 1===i.compare(wq)&&(i=new Es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=SP(e),[r,i]=AP(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new av(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=SP(e),[r,i]=AP(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nl{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Nl(Q.min(),i,new je(J),bn(),se())}}class Ol{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ol(r,t,se(),se(),se())}}class af{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class MP{constructor(e,t){this.targetId=e,this.me=t}}class PP{constructor(e,t,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class RP{constructor(){this.fe=0,this.ge=NP(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q()}}),new Ol(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=NP()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Iq{constructor(e){this.Le=e,this.Be=new Map,this.ke=bn(),this.qe=cf(),this.Qe=cf(),this.Ke=new je(J)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const s=i.target;if(Zh(s))if(0===r){const o=new z(s.path);this.We(t,o,$e.newNoDocument(o,Q.min()))}else K(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),c=a?this.et(a,e,o):1;0!==c&&(this.He(t),this.Ke=this.Ke.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Gr(r).toUint8Array()}catch(c){if(c instanceof kM)return Un("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new av(o,i,s)}catch(c){return Un(c instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Te?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Zh(a.target)){const c=new z(a.target.path);this.st(c).has(o)||this.ot(o,c)||this.We(o,c,$e.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=se();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ye(c);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Nl(e,t,this.Ke,this.ke,r);return this.ke=bn(),this.qe=cf(),this.Qe=cf(),this.Ke=new je(J),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new RP,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Se(J),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Se(J),this.qe=this.qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||B("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new RP),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function cf(){return new je(z.comparator)}function NP(){return new je(z.comparator)}const Dq={asc:"ASCENDING",desc:"DESCENDING"},Tq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cq={and:"AND",or:"OR"};class xq{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cv(n,e){return n.useProto3Json||yl(e)?e:{value:e}}function mt(n){return K(!!n),Q.fromTimestamp(function(t){const r=zr(t);return new et(r.seconds,r.nanos)}(n))}function uv(n,e){const t=(i=n,new ue(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function kP(n){const e=ue.fromString(n);return K(qP(e)),e}function Er(n,e){const t=kP(e);if(t.get(1)!==n.databaseId.projectId)throw new j(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(LP(t))}function FP(n,e){return function lv(n,e){return uv(n,e).canonicalString()}(n.databaseId,e)}function dv(n){return new ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LP(n){return K(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function HP(n,e){return{documents:[FP(n,e.path)]}}function lf(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=FP(n,i);const s=function(l){if(0!==l.length)return GP(Ae.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(u=>{return{field:Ri((f=u).field),direction:Nq(f.dir)};var f})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=cv(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ct:t,parent:i};var l}function $P(n){let e=function VP(n){const e=kP(n);return 4===e.length?ue.emptyPath():LP(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){K(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){const f=zP(h);return f instanceof Ae&&Yy(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(f=>{return new Dl(ba((m=f).field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction));var m}));let a=null;t.limit&&(a=function(h){let f;return f="object"==typeof h?h.value:h,yl(f)?null:f}(t.limit));let c=null;var h;t.startAt&&(c=new Pi((h=t.startAt).values||[],!!h.before));let l=null;return t.endAt&&(l=function(h){return new Pi(h.values||[],!h.before)}(t.endAt)),function nP(n,e,t,r,i,s,o,a){return new qr(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",c,l)}function zP(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ba(t.unaryFilter.field);return de.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ba(t.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ba(t.unaryFilter.field);return de.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ba(t.unaryFilter.field);return de.create(o,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(n):void 0!==n.fieldFilter?de.create(ba((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Ae.create(t.compositeFilter.filters.map(r=>zP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(t.compositeFilter.op))}(n):q();var t}function Nq(n){return Dq[n]}function Oq(n){return Tq[n]}function kq(n){return Cq[n]}function Ri(n){return{fieldPath:n.canonicalString()}}function ba(n){return Ye.fromServerFormat(n.fieldPath)}function GP(n){return n instanceof de?function(t){if("=="===t.op){if(BM(t.value))return{unaryFilter:{field:Ri(t.field),op:"IS_NAN"}};if(LM(t.value))return{unaryFilter:{field:Ri(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(BM(t.value))return{unaryFilter:{field:Ri(t.field),op:"IS_NOT_NAN"}};if(LM(t.value))return{unaryFilter:{field:Ri(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ri(t.field),op:Oq(t.op),value:t.value}}}(n):n instanceof Ae?function(t){const r=t.getFilters().map(i=>GP(i));return 1===r.length?r[0]:{compositeFilter:{op:kq(t.op),filters:r}}}(n):q()}function qP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Qr{constructor(e,t,r,i,s=Q.min(),o=Q.min(),a=ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WP{constructor(e){this.ht=e}}function fv(n){const e=$P({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tf(e,e.limit,"L"):e}class Ns{constructor(){}Et(e,t){this.dt(e,t),t.At()}dt(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(Xe(e.integerValue));else if("doubleValue"in e){const r=Xe(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),vl(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),"string"==typeof r&&(r=zr(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Gr(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?jM(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):Jh(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):q()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const r=e.fields||{};this.Rt(t,55);for(const i of Object.keys(r))this.gt(i,t),this.dt(r[i],t)}bt(e,t){var r,i;const s=e.fields||{};this.Rt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Rt(t,15),t.Vt(Xe(a)),this.gt(o,t),this.dt(s[o],t)}vt(e,t){const r=e.values||[];this.Rt(t,50);for(const i of r)this.dt(i,t)}St(e,t){this.Rt(t,37),z.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}Ns.Ft=new Ns;class Gq{constructor(){this.ln=new vv}addToCollectionParentIndex(e,t){return this.ln.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(An.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(An.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}}class vv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Se(ue.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Se(ue.comparator)).toArray()}}new Uint8Array(0);const cR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(41943040,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);class ks{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ks(0)}static Qn(){return new ks(-1)}}function fR([n,e],[t,r]){const i=J(n,t);return 0===i?J(e,r):i}class Kq{constructor(e){this.Gn=e,this.buffer=new Se(fR),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return null!==this.Jn}Yn(e){var t=this;B("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,H(function*(){t.Jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ci(r)?B("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ti(r)}yield t.Yn(3e5)}))}}class Qq{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return O.resolve(Mn.oe);const r=new Kq(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(cR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cR):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,s,o,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),sa()<=_e.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${h} documents in `+(l-c)+`ms\nTotal Duration: ${l-u}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}class mR{constructor(){this.changes=new Wr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ER{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Pl(r.mutation,i,vn.empty(),et.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){const i=br();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Sl();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=br();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=bn();const o=Al(),a=Al();return t.forEach((c,l)=>{const u=r.get(l.key);i.has(l.key)&&(void 0===u||u.mutation instanceof Kr)?s=s.insert(l.key,l):void 0!==u?(o.set(l.key,u.mutation.getFieldMask()),Pl(u.mutation,l,u.mutation.getFieldMask(),et.now())):o.set(l.key,vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new Zq(u,null!==(h=o.get(l))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Al();let i=new je((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=t.get(c);if(null===l)return;let u=r.get(c)||vn.empty();u=a.applyToLocalView(l,u),r.set(c,u);const h=(i.get(a.batchId)||se()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=dP();u.forEach(f=>{if(!s.has(f)){const p=vP(t.get(f),r.get(f));null!==p&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return z.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function Zy(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(br());let a=-1,c=s;return o.next(l=>O.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?O.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,se())).next(u=>({batchId:a,changes:uP(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=Sl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Sl();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{const l=(h=t,f=c.child(s),new qr(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,f;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{const u=l.getKey();null===o.get(u)&&(o=o.insert(u,$e.newInvalidDocument(u)))});let a=Sl();return o.forEach((c,l)=>{const u=s.get(c);void 0!==u&&Pl(u.mutation,l,vn.empty(),et.now()),xl(t,l)&&(a=a.insert(c,l))}),a})}}class eW{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return O.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,{id:(i=t).id,version:i.version,createTime:mt(i.createTime)}),O.resolve();var i}getNamedQuery(e,t){return O.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,{name:(i=t).name,query:fv(i.bundledQuery),readTime:mt(i.readTime)}),O.resolve();var i}}class tW{constructor(){this.overlays=new je(z.comparator),this.Er=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){const r=br();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Tt(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Er.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){const i=br(),s=t.length+1,o=new z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new je((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=s.get(l.largestBatchId);null===u&&(u=br(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=br(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return O.resolve(a)}Tt(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ov(t,r));let s=this.Er.get(t);void 0===s&&(s=se(),this.Er.set(t,s)),this.Er.set(t,s.add(r.key))}}class nW{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}}class bv{constructor(){this.dr=new Se(At.Ar),this.Rr=new Se(At.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new At(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new At(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new z(new ue([])),r=new At(t,e),i=new At(t,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new z(new ue([])),r=new At(t,e),i=new At(t,e+1);let s=se();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new At(e,0),r=this.dr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class At{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return z.comparator(e.key,t.key)||J(e.br,t.br)}static Vr(e,t){return J(e.br,t.br)||z.comparator(e.key,t.key)}}class rW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Se(At.Ar)}checkEmpty(e){return O.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Dr;this.Dr++;const o=new iv(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new At(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Fr(t+1),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(0===this.mutationQueue.length?-1:this.Dr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new At(t,0),i=new At(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(J);return t.forEach(i=>{const s=new At(i,0),o=new At(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),O.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;z.isDocumentKey(s)||(s=s.child(""));const o=new At(new z(s),0);let a=new Se(J);return this.vr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.br)),!0)},o),O.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){K(0===this.Or(t.batchId,"removed")),this.mutationQueue.shift();let r=this.vr;return O.forEach(t.mutations,i=>{const s=new At(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new At(t,0),i=this.vr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return O.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class iW{constructor(e){this.Nr=e,this.docs=new je(z.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():$e.newInvalidDocument(t))}getEntries(e,t){let r=bn();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$e.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=bn();const o=t.path,a=new z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Uy(vM(u),r)<=0||(i.has(u.key)||xl(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){q()}Lr(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sW(this)}getSize(e){return O.resolve(this.size)}}class sW extends mR{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}class oW{constructor(e){this.persistence=e,this.Br=new Wr(t=>xs(t),Tl),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.kr=0,this.qr=new bv,this.targetCount=0,this.Qr=ks.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),O.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new ks(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Un(t),O.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),O.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.qr.containsKey(t))}}class Ev{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Mn(0),this.Ur=!1,this.Ur=!0,this.Wr=new nW,this.referenceDelegate=e(this),this.Gr=new oW(this),this.indexManager=new Gq,this.remoteDocumentCache=new iW(r=>this.referenceDelegate.zr(r)),this.serializer=new WP(t),this.jr=new eW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new rW(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);const i=new aW(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,t){return O.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class aW extends EM{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Zr=new bv,this.Xr=null}static ei(e){return new _f(e)}get ti(){if(this.Xr)return this.Xr;throw q()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),O.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.ti,r=>{const i=z.fromPath(r);return this.ni(e,i).next(s=>{s||t.removeEntry(i,Q.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return O.or([()=>O.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class yf{constructor(e,t){this.persistence=e,this.ri=new Wr(r=>function $t(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=TM(e)),e=N8(n.get(t),e);return TM(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function gR(n,e){return new Qq(n,e)}(this,t)}static ei(e,t){return new yf(e,t)}Hr(){}Jr(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return O.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Q.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),O.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yh(e.data.value)),t}ir(e,t,r){return O.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return O.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Tv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=se(),i=se();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Tv(e,t.fromCache,r,i)}}class lW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IR{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function LA(){return!function K6(){var n;const e=null===(n=Vh())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function wM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}(function wi(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())>0?6:4}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Xi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new lW;return this.ts(e,t,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>s.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(sa()<=_e.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",pa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),O.resolve()):(sa()<=_e.DEBUG&&B("QueryEngine","Query:",pa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(sa()<=_e.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",pa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zt(t))):O.resolve())}Xi(e,t){if(rP(t))return O.resolve(null);let r=zt(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=tf(t,null,"F"),r=zt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.rs(t,a);return this.ss(t,l,o,c.readTime)?this.Xi(e,tf(t,null,"F")):this.os(e,l,t,c)}))})))}es(e,t,r,i){return rP(t)||i.isEqual(Q.min())?O.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(t,s);return this.ss(t,o,r,i)?O.resolve(null):(sa()<=_e.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pa(t)),this.os(e,o,t,function yM(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(1e9===r?new et(t+1,0):new et(t,r));return new An(i,z.empty(),e)}(i,-1)).next(a=>a))})}rs(e,t){let r=new Se(cP(e));return t.forEach((i,s)=>{xl(e,s)&&(r=r.add(s))}),r}ss(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,t,r){return sa()<=_e.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",pa(t)),this.Zi.getDocumentsMatchingQuery(e,t,An.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class uW{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new je(J),this.cs=new Wr(s=>xs(s),Tl),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ER(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function TR(n,e){return Cv.apply(this,arguments)}function Cv(){return(Cv=H(function*(n,e){const t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=se();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function CR(n){const e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function Ca(n,e,t){return xv.apply(this,arguments)}function xv(){return(xv=H(function*(n,e,t){const r=U(n),i=r.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ci(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})).apply(this,arguments)}function bf(n,e,t){const r=U(n);let i=Q.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const h=U(c),f=h.cs.get(u);return void 0!==f?O.resolve(h.us.get(f)):h.Gr.getTargetData(l,u)}(r,o,zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?i:Q.min(),t?s:se())).next(a=>(function MR(n,e,t){let r=n.ls.get(e)||Q.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ls.set(e,r)}(r,function aP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ds:s})))}class Rv{constructor(){this.activeTargetIds=function tv(){return pq}()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NR{constructor(){this._o=new Rv,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Rv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mW{uo(e){}shutdown(){}}class OR{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let If=null;function Ov(){return null===If?If=268435456+Math.round(2147483648*Math.random()):If++,"0x"+If.toString(16)}const _W={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yW{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}const qt="WebChannelConnection";class vW extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${s}`,this.xo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(t,r,i,s,o){const a=Ov(),c=this.No(t,r.toUriEncodedString());B("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(l,s,o),this.Bo(t,c,l,i).then(u=>(B("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw Un("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}ko(t,r,i,s,o,a){return this.Oo(t,r,i,s,o)}Lo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+ia,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}No(t,r){return`${this.Fo}/v1/${r}:${_W[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){const s=Ov();return new Promise((o,a)=>{const c=new cM;c.setWithCredentials(!0),c.listenOnce(lM.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case $h.NO_ERROR:const u=c.getResponseJson();B(qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case $h.TIMEOUT:B(qt,`RPC '${e}' ${s} timed out`),a(new j(F.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const h=c.getStatus();if(B(qt,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f?.error;if(p&&p.status&&p.message){const m=function(v){const I=v.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(I)>=0?I:F.UNKNOWN}(p.status);a(new j(m,p.message))}else a(new j(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new j(F.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{B(qt,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);B(qt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}qo(e,t,r){const i=Ov(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hM(),a=dM(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Lo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const u=s.join("");B(qt,`Creating RPC '${e}' stream ${i}: ${u}`,c);const h=o.createWebChannel(u,c);let f=!1,p=!1;const m=new yW({Eo:v=>{p?B(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(f||(B(qt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),B(qt,`RPC '${e}' stream ${i} sending:`,v),h.send(v))},Ao:()=>h.close()}),y=(v,I,E)=>{v.listen(I,S=>{try{E(S)}catch(P){setTimeout(()=>{throw P},0)}})};return y(h,gl.EventType.OPEN,()=>{p||(B(qt,`RPC '${e}' stream ${i} transport opened.`),m.So())}),y(h,gl.EventType.CLOSE,()=>{p||(p=!0,B(qt,`RPC '${e}' stream ${i} transport closed`),m.Do())}),y(h,gl.EventType.ERROR,v=>{p||(p=!0,Un(qt,`RPC '${e}' stream ${i} transport errored:`,v),m.Do(new j(F.UNAVAILABLE,"The operation could not be completed")))}),y(h,gl.EventType.MESSAGE,v=>{var I;if(!p){const E=v.data[0];K(!!E);const S=E,P=S?.error||(null===(I=S[0])||void 0===I?void 0:I.error);if(P){B(qt,`RPC '${e}' stream ${i} received error:`,P);const R=P.status;let k=function(D){const x=bt[D];if(void 0!==x)return CP(x)}(R),T=P.message;void 0===k&&(k=F.INTERNAL,T="Unknown error status: "+R+" with message "+P.message),p=!0,m.Do(new j(k,T)),h.close()}else B(qt,`RPC '${e}' stream ${i} received:`,E),m.vo(E)}}),y(a,uM.STAT_EVENT,v=>{v.stat===By.PROXY?B(qt,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===By.NOPROXY&&B(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.bo()},0),m}}function Df(){return typeof document<"u"?document:null}function zl(n){return new xq(n,!0)}class kv{constructor(e,t,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){null!==this.Wo&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){null!==this.Wo&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class FR{constructor(e,t,r,i,s,o,a,c){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new kv(e,t)}i_(){return 1===this.state||5===this.state||this.s_()}s_(){return 2===this.state||3===this.state}start(){this.n_=0,4!==this.state?this.auth():this.o_()}stop(){var e=this;return H(function*(){e.i_()&&(yield e.close(0))})()}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&null===this.e_&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){var e=this;return H(function*(){if(e.s_())return e.close(0)})()}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){var r=this;return H(function*(){r.l_(),r.h_(),r.r_.cancel(),r.Xo++,4!==e?r.r_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(gt(t.toString()),gt("Using maximum backoff delay to prevent overloading the backend."),r.r_.zo()):t&&t.code===F.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.P_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.po(t)})()}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new j(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.n_?this.A_(i):this.onNext(i))})}o_(){var e=this;this.state=5,this.r_.jo(H(function*(){e.state=0,e.start()}))}E_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bW extends FR{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=function Mq(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:q(),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(K(void 0===u||"string"==typeof u),ct.fromBase64String(u||"")):(K(void 0===u||u instanceof Buffer||u instanceof Uint8Array),ct.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=void 0===l.code?F.UNKNOWN:CP(l.code);return new j(u,l.message||"")}(o);t=new PP(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Er(n,r.document.name),s=mt(r.document.updateTime),o=r.document.createTime?mt(r.document.createTime):Q.min(),a=new Ft({mapValue:{fields:r.document.fields}}),c=$e.newFoundDocument(i,s,o,a);t=new af(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Er(n,r.document),s=r.readTime?mt(r.readTime):Q.min(),o=$e.newNoDocument(i,s);t=new af([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Er(n,r.document);t=new af([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return q();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Eq(i,s);t=new MP(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Q.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?mt(o.readTime):Q.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=dv(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=Zh(c)?{documents:HP(s,c)}:{query:lf(s,c).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=function OP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}(s,o.resumeToken);const l=cv(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Q.min())>0){a.readTime=function va(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(s,o.snapshotVersion.toTimestamp());const l=cv(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function Rq(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=dv(this.serializer),t.removeTarget=e,this.c_(t)}}class wW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new j(F.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,uv(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(F.UNKNOWN,s.toString())})}ko(e,t,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,uv(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(F.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class IW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){0===this.D_&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){"Online"===this.state?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,"Online"===e&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(gt(t),this.C_=!1):B("OnlineStateTracker",t)}N_(){null!==this.v_&&(this.v_.cancel(),this.v_=null)}}class DW{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(a=>{r.enqueueAndForget(H(function*(){var c;Fi(o)&&(B("RemoteStore","Restarting streams for network reachability change."),yield(c=H(function*(u){const h=U(u);h.k_.add(4),yield xa(h),h.K_.set("Unknown"),h.k_.delete(4),yield Gl(h)}),function l(u){return c.apply(this,arguments)})(o))}))}),this.K_=new IW(r,i)}}function Gl(n){return Fv.apply(this,arguments)}function Fv(){return(Fv=H(function*(n){if(Fi(n))for(const e of n.q_)yield e(!0)})).apply(this,arguments)}function xa(n){return Vv.apply(this,arguments)}function Vv(){return(Vv=H(function*(n){for(const e of n.q_)yield e(!1)})).apply(this,arguments)}function Tf(n,e){const t=U(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),jv(t)?Bv(t):Ma(t).s_()&&Lv(t,e))}function Sa(n,e){const t=U(n),r=Ma(t);t.B_.delete(e),r.s_()&&VR(t,e),0===t.B_.size&&(r.s_()?r.a_():Fi(t)&&t.K_.set("Unknown"))}function Lv(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ma(n).V_(e)}function VR(n,e){n.U_.xe(e),Ma(n).m_(e)}function Bv(n){n.U_=new Iq({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Ma(n).start(),n.K_.F_()}function jv(n){return Fi(n)&&!Ma(n).i_()&&n.B_.size>0}function Fi(n){return 0===U(n).k_.size}function LR(n){n.U_=void 0}function TW(n){return Hv.apply(this,arguments)}function Hv(){return(Hv=H(function*(n){n.K_.set("Online")})).apply(this,arguments)}function CW(n){return Uv.apply(this,arguments)}function Uv(){return(Uv=H(function*(n){n.B_.forEach((e,t)=>{Lv(n,e)})})).apply(this,arguments)}function xW(n,e){return $v.apply(this,arguments)}function $v(){return($v=H(function*(n,e){LR(n),jv(n)?(n.K_.O_(e),Bv(n)):n.K_.set("Unknown")})).apply(this,arguments)}function SW(n,e,t){return zv.apply(this,arguments)}function zv(){return zv=H(function*(n,e,t){if(n.K_.set("Online"),e instanceof PP&&2===e.state&&e.cause)try{yield(r=H(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.B_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.B_.delete(c),s.U_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cf(n,r)}else if(e instanceof af?n.U_.$e(e):e instanceof MP?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Q.min()))try{const r=yield CR(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=s.B_.get(l);u&&s.B_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=s.B_.get(c);if(!u)return;s.B_.set(c,u.withResumeToken(ct.EMPTY_BYTE_STRING,u.snapshotVersion)),VR(s,c);const h=new Qr(u.target,c,l,u.sequenceNumber);Lv(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){B("RemoteStore","Failed to raise snapshot:",r),yield Cf(n,r)}var r}),zv.apply(this,arguments)}function Cf(n,e,t){return Gv.apply(this,arguments)}function Gv(){return(Gv=H(function*(n,e,t){if(!Ci(e))throw e;n.k_.add(1),yield xa(n),n.K_.set("Offline"),t||(t=()=>CR(n.localStore)),n.asyncQueue.enqueueRetryable(H(function*(){B("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield Gl(n)}))})).apply(this,arguments)}function UR(n,e){return Xv.apply(this,arguments)}function Xv(){return(Xv=H(function*(n,e){const t=U(n);t.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");const r=Fi(t);t.k_.add(3),yield xa(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield Gl(t)})).apply(this,arguments)}function Jv(n,e){return Zv.apply(this,arguments)}function Zv(){return(Zv=H(function*(n,e){const t=U(n);e?(t.k_.delete(2),yield Gl(t)):e||(t.k_.add(2),yield xa(t),t.K_.set("Unknown"))})).apply(this,arguments)}function Ma(n){return n.W_||(n.W_=function(t,r,i){const s=U(t);return s.b_(),new bW(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:TW.bind(null,n),mo:CW.bind(null,n),po:xW.bind(null,n),R_:SW.bind(null,n)}),n.q_.push(function(){var e=H(function*(t){t?(n.W_.__(),jv(n)?Bv(n):n.K_.set("Unknown")):(yield n.W_.stop(),LR(n))});return function(t){return e.apply(this,arguments)}}())),n.W_}class eb{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new St,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new eb(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new j(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pa(n,e){if(gt("AsyncQueue",`${e}: ${n}`),Ci(n))return new j(F.UNAVAILABLE,`${e}: ${n}`);throw n}class Ra{static emptySet(e){return new Ra(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=Sl(),this.sortedSet=new je(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ra)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ra;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $R{constructor(){this.z_=new je(z.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?0!==e.type&&3===r.type?this.z_=this.z_.insert(t,e):3===e.type&&1!==r.type?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.z_=this.z_.remove(t):1===e.type&&2===r.type?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):q():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Na{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Na(e,t,Ra.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class kW{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class FW{constructor(){this.queries=zR(),this.onlineState="Unknown",this.X_=new Set}terminate(){!function(t,r){const i=U(t),s=i.queries;i.queries=zR(),s.forEach((o,a)=>{for(const c of a.J_)c.onError(r)})}(this,new j(F.ABORTED,"Firestore shutting down"))}}function zR(){return new Wr(n=>oP(n),Cl)}function nb(){return(nb=H(function*(n,e){const t=U(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new kW,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=yield t.onListen(i,!0);break;case 1:s.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Pa(o,`Initialization of query '${pa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&sb(t)})).apply(this,arguments)}function ib(){return(ib=H(function*(n,e){const t=U(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),0===s.J_.length?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function VW(n,e){const t=U(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&sb(t)}function LW(n,e,t){const r=U(n),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(t);r.queries.delete(e)}function sb(n){n.X_.forEach(e=>{e.next()})}var ob,GR;(GR=ob||(ob={})).na="default",GR.Cache="cache";class ab{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Na(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){return!e.fromCache||!this.Z_()||(!this.options.ua||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}oa(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}aa(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==ob.Cache}}class KR{constructor(e){this.key=e}}class QR{constructor(e){this.key=e}}class YR{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=se(),this.mutatedKeys=se(),this.Va=cP(e),this.ma=new Ra(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new $R,i=t?t.ma:this.ma;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const f=i.get(u),p=xl(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;f&&p?f.data.isEqual(p.data)?m!==y&&(r.track({type:3,doc:p}),v=!0):this.ya(f,p)||(r.track({type:2,doc:p}),v=!0,(c&&this.Va(p,c)>0||l&&this.Va(p,l)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),v=!0):f&&!p&&(r.track({type:1,doc:f}),v=!0,(c||l)&&(a=!0)),v&&(p?(o=o.add(p),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((u,h)=>function(p,m){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return y(p)-y(m)}(u.type,h.type)||this.Va(u.doc,h.doc)),this.wa(r),i=null!=i&&i;const a=t&&!i?this.Sa():[],c=0===this.Ra.size&&this.current&&!i?1:0,l=c!==this.Aa;return this.Aa=c,0!==o.length||l?{snapshot:new Na(this.query,e.ma,s,o,e.mutatedKeys,0===c,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ma:this.ma,pa:new $R,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=se(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new QR(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new KR(r))}),t}va(e){this.da=e.ds,this.Ra=se();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Na.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,0===this.Aa,this.hasCachedResults)}}class HW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UW{constructor(e){this.key=e,this.Fa=!1}}class $W{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Wr(a=>oP(a),Cl),this.Oa=new Map,this.Na=new Set,this.La=new je(z.comparator),this.Ba=new Map,this.ka=new bv,this.qa={},this.Qa=new Map,this.Ka=ks.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return!0===this.$a}}function zW(n,e){return cb.apply(this,arguments)}function cb(){return(cb=H(function*(n,e,t=!0){const r=xf(n);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=yield XR(r,e,t,!0),i})).apply(this,arguments)}function GW(n,e){return lb.apply(this,arguments)}function lb(){return(lb=H(function*(n,e){const t=xf(n);yield XR(t,e,!0,!1)})).apply(this,arguments)}function XR(n,e,t,r){return ub.apply(this,arguments)}function ub(){return(ub=H(function*(n,e,t,r){const i=yield function Ta(n,e){const t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Gr.allocateTargetId(r).next(o=>(i=new Qr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}(n.localStore,zt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield function db(n,e,t,r,i){return hb.apply(this,arguments)}(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Tf(n.remoteStore,i),a})).apply(this,arguments)}function hb(){return hb=H(function*(n,e,t,r,i){n.Ua=(h,f,p)=>{return(m=H(function*(v,I,E,S){let P=I.view.ga(E);P.ss&&(P=yield bf(v.localStore,I.query,!1).then(({documents:b})=>I.view.ga(b,P)));const R=S&&S.targetChanges.get(I.targetId),k=S&&null!=S.targetMismatches.get(I.targetId),T=I.view.applyChanges(P,v.isPrimaryClient,R,k);return Ib(v,I.targetId,T.ba),T.snapshot}),function y(v,I,E,S){return m.apply(this,arguments)})(n,h,f,p);var m};const s=yield bf(n.localStore,e,!0),o=new YR(e,s.ds),a=o.ga(s.documents),c=Ol.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,c);Ib(n,t,l.ba);const u=new HW(e,t,o);return n.xa.set(e,u),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),l.snapshot}),hb.apply(this,arguments)}function qW(n,e,t){return fb.apply(this,arguments)}function fb(){return(fb=H(function*(n,e,t){const r=U(n),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Cl(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ca(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Sa(r.remoteStore,i.targetId),Oa(r,i.targetId)}).catch(Ti))):(Oa(r,i.targetId),yield Ca(r.localStore,i.targetId,!0))})).apply(this,arguments)}function WW(n,e){return pb.apply(this,arguments)}function pb(){return(pb=H(function*(n,e){const t=U(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sa(t.remoteStore,r.targetId))})).apply(this,arguments)}function JR(n,e){return mb.apply(this,arguments)}function mb(){return(mb=H(function*(n,e){const t=U(n);try{const r=yield function hW(n,e){const t=U(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const a=[];e.targetChanges.forEach((u,h)=>{const f=i.get(h);if(!f)return;a.push(t.Gr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.Gr.addMatchingKeys(s,u.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);var y,v,I;null!==e.targetMismatches.get(h)?p=p.withResumeToken(ct.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(h,p),v=p,I=u,(0===(y=f).resumeToken.approximateByteSize()||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8||I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0)&&a.push(t.Gr.updateTargetData(s,p))});let c=bn(),l=se();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(function xR(n,e,t){let r=se(),i=se();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=bn();return t.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Q.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):B("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Is:o,Es:i}})}(s,o,e.documentUpdates).next(u=>{c=u.Is,l=u.Es})),!r.isEqual(Q.min())){const u=t.Gr.getLastRemoteSnapshotVersion(s).next(h=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.us=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ba.get(s);o&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?K(o.Fa):i.removedDocuments.size>0&&(K(o.Fa),o.Fa=!1))}),yield Yr(t,r,e)}catch(r){yield Ti(r)}})).apply(this,arguments)}function ZR(n,e,t){const r=U(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=U(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const f of h.J_)f.ea(a)&&(l=!0)}),l&&sb(c)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QW(n,e,t){return _b.apply(this,arguments)}function _b(){return(_b=H(function*(n,e,t){const r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new je(z.comparator);o=o.insert(s,$e.newNoDocument(s,Q.min()));const a=se().add(s),c=new Nl(Q.min(),new Map,new je(J),o,a);yield JR(r,c),r.La=r.La.remove(s),r.Ba.delete(e),Db(r)}else yield Ca(r.localStore,e,!1).then(()=>Oa(r,e,t)).catch(Ti)})).apply(this,arguments)}function Oa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||e1(n,r)})}function e1(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);null!==t&&(Sa(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),Db(n))}function Ib(n,e,t){for(const r of t)r instanceof KR?(n.ka.addReference(r.key,e),ZW(n,r)):r instanceof QR?(B("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||e1(n,r.key)):q()}function ZW(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(B("SyncEngine","New document in limbo: "+t),n.Na.add(r),Db(n))}function Db(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new z(ue.fromString(e)),r=n.Ka.next();n.Ba.set(r,new UW(t)),n.La=n.La.insert(t,r),Tf(n.remoteStore,new Qr(zt(ha(t.path)),r,"TargetPurposeLimboResolution",Mn.oe))}}function Yr(n,e,t){return Tb.apply(this,arguments)}function Tb(){return Tb=H(function*(n,e,t){const r=U(n),i=[],s=[],o=[];var a;r.xa.isEmpty()||(r.xa.forEach((a,c)=>{o.push(r.Ua(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){const h=l?!l.fromCache:null===(u=t?.targetChanges.get(c.targetId))||void 0===u?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);const h=Tv.zi(c.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Ma.R_(i),yield(a=H(function*(l,u){const h=U(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(u,p=>O.forEach(p.Wi,m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>O.forEach(p.Gi,m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Ci(f))throw f;B("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const m=h.us.get(p),v=m.withLastLimboFreeSnapshotVersion(m.snapshotVersion);h.us=h.us.insert(p,v)}}}),function c(l,u){return a.apply(this,arguments)})(r.localStore,s))}),Tb.apply(this,arguments)}function e7(n,e){return Cb.apply(this,arguments)}function Cb(){return(Cb=H(function*(n,e){const t=U(n);if(!t.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());const r=yield TR(t.localStore,e);t.currentUser=e,(s=t).Qa.forEach(a=>{a.forEach(c=>{c.reject(new j(F.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Qa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Yr(t,r.Ts)}var s})).apply(this,arguments)}function t7(n,e){const t=U(n),r=t.Ba.get(e);if(r&&r.Fa)return se().add(r.key);{let i=se();const s=t.Oa.get(e);if(!s)return i;for(const o of s){const a=t.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function xf(n){const e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QW.bind(null,e),e.Ma.R_=VW.bind(null,e.eventManager),e.Ma.Wa=LW.bind(null,e.eventManager),e}let Sf=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return H(function*(){r.serializer=zl(t.databaseInfo.databaseId),r.sharedClientState=r.za(t),r.persistence=r.ja(t),yield r.persistence.start(),r.localStore=r.Ha(t),r.gcScheduler=r.Ja(t,r.localStore),r.indexBackfillerScheduler=r.Ya(t,r.localStore)})()}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return function DR(n,e,t,r){return new uW(n,e,t,r)}(this.persistence,new IR,t.initialUser,this.serializer)}ja(t){return new Ev(_f.ei,this.serializer)}za(t){return new NR}terminate(){var t=this;return H(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class kb extends Sf{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){return K(this.persistence.referenceDelegate instanceof yf),new pR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}ja(e){const t=void 0!==this.cacheSizeBytes?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new Ev(r=>yf.ei(r,t),this.serializer)}}let ka=(()=>{class n{initialize(t,r){var i=this;return H(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>ZR(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=e7.bind(null,i.syncEngine),yield Jv(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new FW}createDatastore(t){const r=zl(t.databaseInfo.databaseId),i=new vW(t.databaseInfo);return new wW(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>ZR(this.syncEngine,r,0),c=OR.p()?new OR:new mW,new DW(i,s,o,a,c);var i,s,o,a,c}createSyncEngine(t,r){return function(s,o,a,c,l,u,h){const f=new $W(s,o,a,c,l,u);return h&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return H(function*(){var r,i,s;yield(s=H(function*(a){const c=U(a);B("RemoteStore","RemoteStore shutting down."),c.k_.add(5),yield xa(c),c.Q_.shutdown(),c.K_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();class Af{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):gt("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class f7{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=mM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=H(function*(c){B("FirestoreClient","Received user=",c.uid),yield o.authCredentialListener(c),o.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(B("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new St;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(H(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Pa(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Vb(n,e){return Lb.apply(this,arguments)}function Lb(){return Lb=H(function*(n,e){n.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=H(function*(s){r.isEqual(s)||(yield TR(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Lb.apply(this,arguments)}function s1(n,e){return Bb.apply(this,arguments)}function Bb(){return(Bb=H(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function jb(n){return Hb.apply(this,arguments)}(n);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>UR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>UR(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function Hb(){return(Hb=H(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vb(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Un("Error using user provided cache. Falling back to memory cache: "+e),yield Vb(n,new Sf)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield Vb(n,new kb(void 0));var i;return n._offlineComponents})).apply(this,arguments)}function Ub(){return(Ub=H(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield s1(n,n._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield s1(n,new ka))),n._onlineComponents})).apply(this,arguments)}function zb(){return(zb=H(function*(n){const e=yield function Mf(n){return Ub.apply(this,arguments)}(n),t=e.eventManager;return t.onListen=zW.bind(null,e.syncEngine),t.onUnlisten=qW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WW.bind(null,e.syncEngine),t})).apply(this,arguments)}function u1(n,e,t={}){const r=new St;return n.asyncQueue.enqueueAndForget(H(function*(){return function(s,o,a,c,l){const u=new Af({next:f=>{u.eu(),o.enqueueAndForget(()=>function rb(n,e){return ib.apply(this,arguments)}(s,h)),f.fromCache&&"server"===c.source?l.reject(new j(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new ab(a,u,{includeMetadataChanges:!0,ua:!0});return function tb(n,e){return nb.apply(this,arguments)}(s,h)}(yield function Va(n){return zb.apply(this,arguments)}(n),n.asyncQueue,e,t,r)})),r.promise}function d1(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const h1=new Map;function p1(n){if(z.isDocumentKey(n))throw new j(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function le(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function Pf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":q()}(n);throw new j(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class m1{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new j(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new j(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function T7(n,e,t,r){if(!0===e&&!0===r)throw new j(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=d1(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ql{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new j(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m1(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new v8;switch(r.type){case"firstParty":return new I8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return H(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=h1.get(t);r&&(B("ComponentProvider","Removing Datastore"),h1.delete(t),r.terminate())}(this),Promise.resolve()}}class Vt{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vt(this.firestore,e,this._query)}}class _t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}}class wr extends Vt{constructor(e,t,r){super(e,t,ha(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new z(e))}withConverter(e){return new wr(this.firestore,e,this._path)}}function _1(n,e,...t){if(n=function mr(n){return n&&n._delegate?n._delegate:n}(n),function Gb(n,e,t){if(!t)throw new j(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}("collection","path",e),n instanceof ql){const r=ue.fromString(e,...t);return p1(r),new wr(n,null,r)}{if(!(n instanceof _t||n instanceof wr))throw new j(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ue.fromString(e,...t));return p1(r),new wr(n.firestore,null,r)}}class v1{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new kv(this,"async_queue_retry"),this.fu=()=>{const r=Df();r&&B("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Df();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Df();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new St;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){var e=this;return H(function*(){if(0!==e.Iu.length){try{yield e.Iu[0](),e.Iu.shift(),e.r_.reset()}catch(t){if(!Ci(t))throw t;B("AsyncQueue","Operation failed with retryable error: "+t)}e.Iu.length>0&&e.r_.jo(()=>e.wu())}})()}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{throw this.Au=r,this.Ru=!1,gt("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=eb.createAndSchedule(this,e,t,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&q()}verifyOperationInProgress(){}bu(){var e=this;return H(function*(){let t;do{t=e.gu,yield t}while(t!==e.gu)})()}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Re extends ql{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new v1,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return H(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new v1(t),e._firestoreClient=void 0,yield t}})()}}function A7(n,e){const t="object"==typeof n?n:function s8(n=jh){const e=vs.get(n);if(!e&&n===jh&&FA())return ZA();if(!e)throw Hn.create("no-app",{appName:n});return e}(),r="string"==typeof n?n:e||"(default)",i=function XA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(n=>{const e=(n=>{var e,t;return null===(t=null===(e=Vh())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})("firestore");s&&function C7(n,e,t,r={}){var i;const s=(n=le(n,ql))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Un("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=xt.MOCK_USER;else{a=function W6(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Fh(JSON.stringify({alg:"none",type:"JWT"})),Fh(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new xt(l)}n._authCredentials=new b8(new pM(a,c))}}(i,...s)}return i}function tt(n){if(n._terminated)throw new j(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||function b1(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Z8(n._databaseId,c,n._persistenceKey,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,d1(u.experimentalLongPollingOptions),u.useFetchStreams));var c,u;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new f7(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}(n),n._firestoreClient}class Vs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vs(ct.fromBase64String(e))}catch(t){throw new j(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vs(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ls{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new j(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}class Rf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const O7=new RegExp("[~\\*/\\[\\]]");function Ff(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new j(F.INVALID_ARGUMENT,a+n+c)}class Yl{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new k7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class k7 extends Yl{data(){return super.data()}}function Vf(n,e){return"string"==typeof e?function kf(n,e,t){if(e.search(O7)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ls(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}(n,e):e instanceof Ls?e._internalPath:e._delegate._internalPath}class k1{convertValue(e,t="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return xi(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Xe(o.doubleValue));return new Rf(s)}convertGeoPoint(e){return new Kb(Xe(e.latitude),Xe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Kh(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){const t=zr(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ue.fromString(e);K(qP(r));const i=new Ts(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(t)||gt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Hs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ja extends Yl{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Uf extends ja{data(e={}){return super.data(e)}}class Ha{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uf(this._firestore,this._userDataWriter,r.key,r,new Hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Uf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new Uf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,u=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:L7(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function L7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}class Li extends k1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function F1(n){n=le(n,Vt);const e=le(n.firestore,Re),t=tt(e),r=new Li(e);return function A1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new j(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),u1(t,n._query).then(i=>new Ha(e,r,n,i))}!function(e,t=!0){ia="11.0.2",Hh(new dl("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Re(new E8(r.getProvider("auth-internal")),new D8(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ts(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),bs(fM,"4.7.5",e),bs(fM,"4.7.5","esm2017")}();let j1=(()=>{class n{constructor(){this._allCt="AllCountries",this._usedCt="UsedCountries",this.RawUsedCountries=["Afghanistan","Bangladesh","Bolivia","Fiji","Brazil","Chad","Croatia","Cuba","Cyprus","Czechia","Denmark","El Salvador","Equatorial Guinea","Ethiopia","France","French Polynesia (France)","Honduras","India","Iraq","Ireland","Jamaica","South Korea","Latvia","Lebanon","Laos","Luxembourg","Mexico","Micronesia","Myanmar","Nepal","Nicaragua","Palestine","Papua New Guinea","Peru","Portugal","Saudi Arabia","Sri Lanka","Sudan","Sweden","Thailand","Togo","Turkmenistan","United Kingdom","Uruguay","Vietnam","Yemen","Zambia","Zimbabwe"],this.RawAllCountries=["India","China","United States","Indonesia","Pakistan","Nigeria","Brazil","Bangladesh","Russia","Mexico","Ethiopia","Japan","Philippines","Egypt","DR Congo","Vietnam","Iran","Turkey","Germany","Thailand","United Kingdom","Tanzania","France","South Africa","Italy","Kenya","Myanmar","Colombia","South Korea","Sudan","Uganda","Spain","Algeria","Argentina","Iraq","Afghanistan","Yemen","Canada","Poland","Ukraine","Morocco","Angola","Uzbekistan","Malaysia","Peru","Ghana","Mozambique","Saudi Arabia","Madagascar","Ivory Coast","Nepal","Cameroon","Venezuela","Australia","North Korea","Niger","Mali","Syria","Taiwan","Burkina Faso","Sri Lanka","Malawi","Zambia","Kazakhstan","Chile","Chad","Romania","Somalia","Guatemala","Senegal","Netherlands","Ecuador","Cambodia","Zimbabwe","Guinea","Benin","Rwanda","Burundi","Bolivia","Tunisia","Belgium","Haiti","South Sudan","Jordan","Dominican Republic","Cuba","Czechia","Honduras","United Arab Emirates","Sweden","Portugal","Tajikistan","Papua New Guinea","Azerbaijan","Greece","Hungary","Togo","Israel","Austria","Belarus","Switzerland","Sierra Leone","Laos","Hong Kong (China)","Turkmenistan","Libya","Kyrgyzstan","Paraguay","Nicaragua","Bulgaria","Serbia","El Salvador","Congo","Denmark","Singapore","Lebanon","Finland","Norway","Slovakia","Liberia","Palestine","Ireland","New Zealand","Central African Republic","Costa Rica","Oman","Mauritania","Kuwait","Panama","Croatia","Georgia","Eritrea","Mongolia","Uruguay","Puerto Rico (United States)","Bosnia and Herzegovina","Moldova","Qatar","Namibia","Armenia","Lithuania","Jamaica","Albania","Gambia","Gabon","Botswana","Lesotho","Guinea-Bissau","Slovenia","Latvia","Equatorial Guinea","North Macedonia","Kosovo","Bahrain","Trinidad and Tobago","East Timor","Estonia","Cyprus","Mauritius","Eswatini","Djibouti","Fiji","R\xe9union (France)","Comoros","Guyana","Solomon Islands","Bhutan","Macao (China)","Luxembourg","Montenegro","Suriname","Western Sahara (disputed)","Malta","Maldives","Cape Verde","Brunei","Belize","Bahamas","Iceland","Guadeloupe (France)","Martinique (France)","Vanuatu","Mayotte (France)","French Guiana (France)","New Caledonia (France)","Barbados","French Polynesia (France)","S\xe3o Tom\xe9 and Pr\xedncipe","Samoa","Cura\xe7ao (Netherlands)","Saint Lucia","Guam (United States)","Kiribati","Seychelles","Grenada","Micronesia","Tonga","Aruba (Netherlands)","Jersey (United Kingdom)","Saint Vincent and the Grenadines"],this._app=ZA({apiKey:"AIzaSyDTK0_hUigo0chPsil_hbrciJocj_yqDoQ",authDomain:"cultural-dinners-f837a.firebaseapp.com",projectId:"cultural-dinners-f837a",storageBucket:"cultural-dinners-f837a.firebasestorage.app",messagingSenderId:"268612424958",appId:"1:268612424958:web:7adfbab8a6a3c77aaa01af"}),this._db=A7(this._app)}Upload(){return H(function*(){})()}GetConflicts(){return this.RawUsedCountries.filter(t=>!this.RawAllCountries.includes(t))}GetCountriesList(){var t=this;return H(function*(){const r=yield F1(_1(t._db,t._allCt)),i=new Array;r.forEach(a=>{i.push(a.data().Name)});const s=yield F1(_1(t._db,t._usedCt)),o=new Array;return s.forEach(a=>{o.push(a.data().Name)}),i.filter(a=>!o.includes(a)).sort()})()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function X7(n,e){if(1&n&&(Kn(0,"li",9)(1,"div",10),fs(2),Qn()()),2&n){const t=e.$implicit,r=e.index;p_("color1",r%5==0)("color2",r%5==1)("color3",r%5==2)("color4",r%5==3)("color5",r%5==4),us(2),ch(" ",t," ")}}function J7(n,e){if(1&n&&(Kn(0,"div"),fs(1),Qn()),2&n){const t=e.$implicit,r=e.index;us(1),__(" ",r+1,". ",t," ")}}function Z7(n,e){if(1&n&&(ih(0),Kn(1,"div",11),fs(2,"Your 2025 Countries:"),Qn(),rh(3,J7,2,2,"div",12),sh()),2&n){const t=aC();us(3),Wc("ngForOf",t.CountriesThisSession)}}let eK=(()=>{class n{constructor(t){this._firebaseSvc=t,this.Countries=[],this.CountriesThisSession=[],this._previousEndDegree=0,this._currentDegrees=0,this._mostRecentCountry="",this._isSpinning=!1,this._duplicateCountry=""}ngOnInit(){var t=this;return H(function*(){t.Countries=yield t._firebaseSvc.GetCountriesList(),document.body.style.setProperty("--_items",t.Countries.length.toString()),setTimeout(()=>{document.querySelectorAll(".wheelWedge").forEach((i,s)=>{i.style.setProperty("--_idx",(s+1).toString())})},5)})()}get HeaderDisplay(){return this._isSpinning?"Spinning...":this._mostRecentCountry.length?this._duplicateCountry.length?`You Already Selected ${this._duplicateCountry}, Please Spin Again!`:`Your Next Country Is ${this._mostRecentCountry.toUpperCase()}!!!!!`:"Click Spin To Pick Your First Country!!"}wheelOfFortune(){const t=document.querySelector("ul");let r;r&&r.cancel();const i=360*Math.random(),o=this._previousEndDegree+(i+1800);this._currentDegrees=this._currentDegrees+i,this._duplicateCountry="",this._isSpinning=!0,r=t.animate([{transform:`rotate(${o}deg)`}],{duration:4e3,direction:"normal",easing:"cubic-bezier(0.440, -0.205, 0.000, 1.130)",fill:"forwards",iterations:1}),this._previousEndDegree=o;const a=Math.abs(-1*this._currentDegrees+90)%360/360,c=Math.round(this.Countries.length*a);setTimeout(()=>{this._isSpinning=!1;const l=this.Countries[this.Countries.length-c];this.CountriesThisSession.includes(l)?this._duplicateCountry=l:(this._mostRecentCountry=l,this.CountriesThisSession.push(l)),console.log(l)},4e3)}static{this.\u0275fac=function(r){return new(r||n)(ae(j1))}}static{this.\u0275cmp=vg({type:n,selectors:[["app-wheel"]],decls:13,vars:3,consts:[[1,"header1"],[1,"header2"],[2,"display","inline-block"],[1,"ui-wheel-of-fortune"],[1,"wheel-of-fortune"],["class","wheelWedge",3,"color1","color2","color3","color4","color5",4,"ngFor","ngForOf"],["type","button",1,"spinButton",3,"click"],[1,"itemsList",2,"display","inline-block"],[4,"ngIf"],[1,"wheelWedge"],[2,"padding-left","10px"],[1,"selectedHeader"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(Kn(0,"div",0),fs(1,"Welcome To The Cult Dining Country Selector!"),Qn(),Kn(2,"div",1),fs(3),Qn(),Kn(4,"div")(5,"div",2)(6,"div",3)(7,"ul",4),rh(8,X7,3,11,"li",5),Qn(),Kn(9,"button",6),l_("click",function(){return i.wheelOfFortune()}),fs(10,"SPIN"),Qn()()(),Kn(11,"div",7),rh(12,Z7,4,1,"ng-container",8),Qn()()),2&r&&(us(3),m_(i.HeaderDisplay),us(5),Wc("ngForOf",i.Countries),us(4),Wc("ngIf",null==i.CountriesThisSession?null:i.CountriesThisSession.length))},dependencies:[iA,oA],styles:['.itemsList[_ngcontent-%COMP%]{vertical-align:top;padding-left:100px}.selectedHeader[_ngcontent-%COMP%]{font-size:24px;padding-bottom:15px}.header1[_ngcontent-%COMP%]{padding-top:5px;height:5vh;width:auto;font-size:24px;text-align:center;background-color:#60b8bf;color:#fff}.header2[_ngcontent-%COMP%]{height:5vh;width:auto;text-align:center;background-color:#60b8bf;color:#fff}.ui-wheel-of-fortune[_ngcontent-%COMP%]{margin:30px;padding-top:15px;height:80vh;width:auto}[_ngcontent-%COMP%]:where(.ui-wheel-of-fortune){all:unset;aspect-ratio:1 / 1;container-type:inline-size;direction:ltr;display:grid;position:relative;width:100%;button {aspect-ratio: 1 / 1; background: hsla(0,0%,100%,.8); border: 0; border-radius: 50%; cursor: pointer; font-size: 5cqi; place-self: center; width: 20cqi;} ul {all: unset; clip-path: inset(0 0 0 0 round 50%); display: grid; inset: 0; place-content: center start; li {align-content: center; aspect-ratio: 1 / calc(2*tan(180deg / var(--_items))); background: hsl(calc(360deg / var(--_items) * calc(var(--_idx))),100%,75%); clip-path: polygon(0% 0%,100% 50%,0% 100%); display: grid; font-size: 2cqi; grid-area: 1 / -1; rotate: calc(360deg / var(--_items) * calc(var(--_idx) - 1)); transform-origin: center right; -webkit-user-select: none; user-select: none; width: 50cqi;}}}[_ngcontent-%COMP%]:where(.ui-wheel-of-fortune):after{aspect-ratio:1/cos(30deg);background-color:#dc143c;opacity:.7;clip-path:polygon(50% 100%,100% 0,0 0);content:"";height:4cqi;position:absolute;place-self:start center;scale:1.4}[_ngcontent-%COMP%]:where(.ui-wheel-of-fortune) > *[_ngcontent-%COMP%]{position:absolute}.color1[_ngcontent-%COMP%]{background-color:#60b8bf}.color2[_ngcontent-%COMP%]{background-color:#e0b5bd}.color3[_ngcontent-%COMP%]{background-color:#c9b74a}.color4[_ngcontent-%COMP%]{background-color:#f49405}.color5[_ngcontent-%COMP%]{background-color:#f13d05}.indicator[_ngcontent-%COMP%]{background-color:red;position:absolute;top:0;left:50cqi;height:10px;width:10px}']})}}return n})(),tK=(()=>{class n{constructor(t){this._firebase=t,this.Configuration=new O6,this.DataSets=new Array,this.Labels=new Array}ngOnInit(){var t=this;return H(function*(){yield t.PopulateChart(),console.log(t._firebase.GetConflicts())})()}UploadCountries(){var t=this;return H(function*(){yield t._firebase.Upload()})()}PopulateChart(){var t=this;return H(function*(){const r=yield t._firebase.GetCountriesList(),i=new Array,s=new Array;r.forEach((o,a)=>{t.Labels.push(o),i.push(1),s.push(a%2==0?"#94C950":"#F15A2C")}),t.DataSets.push({data:i})})()}OnClickChart(){}OnHoverChart(){}static{this.\u0275fac=function(r){return new(r||n)(ae(j1))}}static{this.\u0275cmp=vg({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&a_(0,"app-wheel")},dependencies:[eK],styles:["body[_ngcontent-%COMP%]{--_items: 4}"]})}}return n})();function Ua(n){return n+.5|0}const Xr=(n,e,t)=>Math.max(Math.min(n,t),e);function eu(n){return Xr(Ua(2.55*n),0,255)}function ji(n){return Xr(Ua(255*n),0,255)}function Jr(n){return Xr(Ua(n/2.55)/100,0,1)}function H1(n){return Xr(Ua(100*n),0,100)}const $n={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},oE=[..."0123456789ABCDEF"],nK=n=>oE[15&n],rK=n=>oE[(240&n)>>4]+oE[15&n],zf=n=>(240&n)>>4==(15&n);const cK=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function U1(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function lK(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function uK(n,e,t){const r=U1(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function aE(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2;let c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=function dK(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}(t,r,i,u,s),c=60*c+.5),[0|c,l||0,a]}function cE(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(ji)}function lE(n,e,t){return cE(U1,n,e,t)}function $1(n){return(n%360+360)%360}const z1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},G1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Gf;const vK=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,uE=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,$a=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function qf(n,e,t){if(n){let r=aE(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,0===e?360:1)),r=lE(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function q1(n,e){return n&&Object.assign(e||{},n)}function W1(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ji(n[3]))):(e=q1(n,{r:0,g:0,b:0,a:1})).a=ji(e.a),e}function IK(n){return"r"===n.charAt(0)?function bK(n){const e=vK.exec(n);let r,i,s,t=255;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?eu(o):Xr(255*o,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?eu(r):Xr(r,0,255)),i=255&(e[4]?eu(i):Xr(i,0,255)),s=255&(e[6]?eu(s):Xr(s,0,255)),{r,g:i,b:s,a:t}}}(n):function pK(n){const e=cK.exec(n);let r,t=255;if(!e)return;e[5]!==r&&(t=e[6]?eu(+e[5]):ji(+e[5]));const i=$1(+e[2]),s=+e[3]/100,o=+e[4]/100;return r="hwb"===e[1]?function hK(n,e,t){return cE(uK,n,e,t)}(i,s,o):"hsv"===e[1]?function fK(n,e,t){return cE(lK,n,e,t)}(i,s,o):lE(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}(n)}class za{constructor(e){if(e instanceof za)return e;const t=typeof e;let r;"object"===t?r=W1(e):"string"===t&&(r=function sK(n){var t,e=n.length;return"#"===n[0]&&(4===e||5===e?t={r:255&17*$n[n[1]],g:255&17*$n[n[2]],b:255&17*$n[n[3]],a:5===e?17*$n[n[4]]:255}:(7===e||9===e)&&(t={r:$n[n[1]]<<4|$n[n[2]],g:$n[n[3]]<<4|$n[n[4]],b:$n[n[5]]<<4|$n[n[6]],a:9===e?$n[n[7]]<<4|$n[n[8]]:255})),t}(e)||function yK(n){Gf||(Gf=function _K(){const n={},e=Object.keys(G1),t=Object.keys(z1);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,z1[s]);s=parseInt(G1[o],16),n[a]=[s>>16&255,s>>8&255,255&s]}return n}(),Gf.transparent=[0,0,0,0]);const e=Gf[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||IK(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=q1(this._rgb);return e&&(e.a=Jr(e.a)),e}set rgb(e){this._rgb=W1(e)}rgbString(){return this._valid?function EK(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Jr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function aK(n){var e=(n=>zf(n.r)&&zf(n.g)&&zf(n.b)&&zf(n.a))(n)?nK:rK;return n?"#"+e(n.r)+e(n.g)+e(n.b)+((n,e)=>n<255?e(n):"")(n.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function mK(n){if(!n)return;const e=aE(n),t=e[0],r=H1(e[1]),i=H1(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Jr(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,c=r.a-i.a,l=((a*c==-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,r.r=255&l*r.r+s*i.r+.5,r.g=255&l*r.g+s*i.g+.5,r.b=255&l*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function wK(n,e,t){const r=$a(Jr(n.r)),i=$a(Jr(n.g)),s=$a(Jr(n.b));return{r:ji(uE(r+t*($a(Jr(e.r))-r))),g:ji(uE(i+t*($a(Jr(e.g))-i))),b:ji(uE(s+t*($a(Jr(e.b))-s))),a:n.a+t*(e.a-n.a)}}(this._rgb,e._rgb,t)),this}clone(){return new za(this.rgb)}alpha(e){return this._rgb.a=ji(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Ua(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return qf(this._rgb,2,e),this}darken(e){return qf(this._rgb,2,-e),this}saturate(e){return qf(this._rgb,1,e),this}desaturate(e){return qf(this._rgb,1,-e),this}rotate(e){return function gK(n,e){var t=aE(n);t[0]=$1(t[0]+e),t=lE(t),n.r=t[0],n.g=t[1],n.b=t[2]}(this._rgb,e),this}}function Zr(){}const DK=(()=>{let n=0;return()=>n++})();function be(n){return null===n||typeof n>"u"}function ze(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function he(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function lt(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function Pn(n,e){return lt(n)?n:e}function oe(n,e){return typeof n>"u"?e:n}const K1=(n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*e:+n;function He(n,e,t){if(n&&"function"==typeof n.call)return n.apply(t,e)}function Me(n,e,t,r){let i,s,o;if(ze(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(he(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function Wf(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Kf(n){if(ze(n))return n.map(Kf);if(he(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=Kf(n[t[i]]);return e}return n}function Q1(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function CK(n,e,t,r){if(!Q1(n))return;const i=e[n],s=t[n];he(i)&&he(s)?tu(i,s,r):e[n]=Kf(s)}function tu(n,e,t){const r=ze(e)?e:[e],i=r.length;if(!he(n))return n;const s=(t=t||{}).merger||CK;let o;for(let a=0;a<i;++a){if(o=r[a],!he(o))continue;const c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function nu(n,e){return tu(n,e,{merger:xK})}function xK(n,e,t){if(!Q1(n))return;const r=e[n],i=t[n];he(r)&&he(i)?nu(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Kf(i))}const Y1={"":n=>n,x:n=>n.x,y:n=>n.y};function Hi(n,e){return(Y1[e]||(Y1[e]=function AK(n){const e=function SK(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}(n);return t=>{for(const r of e){if(""===r)break;t=t&&t[r]}return t}}(e)))(n)}function dE(n){return n.charAt(0).toUpperCase()+n.slice(1)}const ru=n=>typeof n<"u",Ui=n=>"function"==typeof n,X1=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0},Ge=Math.PI,qe=2*Ge,PK=qe+Ge,Qf=Number.POSITIVE_INFINITY,RK=Ge/180,yt=Ge/2,Us=Ge/4,J1=2*Ge/3,$i=Math.log10,Ir=Math.sign;function iu(n,e,t){return Math.abs(n-e)<t}function Z1(n){const e=Math.round(n);n=iu(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor($i(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function Ga(n){return!isNaN(parseFloat(n))&&isFinite(n)}function eN(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function er(n){return n*(Ge/180)}function hE(n){return n*(180/Ge)}function tN(n){if(!lt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function nN(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*Ge&&(s+=qe),{angle:s,distance:i}}function fE(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function kK(n,e){return(n-e+PK)%qe-Ge}function Rn(n){return(n%qe+qe)%qe}function su(n,e,t,r){const i=Rn(n),s=Rn(e),o=Rn(t),a=Rn(s-i),c=Rn(o-i),l=Rn(i-s),u=Rn(i-o);return i===s||i===o||r&&s===o||a>c&&l<u}function Mt(n,e,t){return Math.max(e,Math.min(t,n))}function ei(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function pE(n,e,t){t=t||(o=>n[o]<e);let s,r=n.length-1,i=0;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const ti=(n,e,t,r)=>pE(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),VK=(n,e,t)=>pE(n,t,r=>n[r][e]>=t),rN=["push","pop","shift","splice","unshift"];function iN(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),!(r.length>0)&&(rN.forEach(s=>{delete n[s]}),delete n._chartjs)}function sN(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const oN=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function aN(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,oN.call(window,()=>{r=!1,n.apply(e,t)}))}}const gE=n=>"start"===n?"left":"end"===n?"right":"center",Wt=(n,e,t)=>"start"===n?e:"end"===n?t:(e+t)/2;function cN(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,_parsed:a}=n,c=o.axis,{min:l,max:u,minDefined:h,maxDefined:f}=o.getUserBounds();h&&(i=Mt(Math.min(ti(a,c,l).lo,t?r:ti(e,c,o.getPixelForValue(l)).lo),0,r-1)),s=f?Mt(Math.max(ti(a,o.axis,u,!0).hi+1,t?0:ti(e,c,o.getPixelForValue(u),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function lN(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const Yf=n=>0===n||1===n,uN=(n,e,t)=>-Math.pow(2,10*(n-=1))*Math.sin((n-e)*qe/t),dN=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*qe/t)+1,ou={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*yt),easeOutSine:n=>Math.sin(n*yt),easeInOutSine:n=>-.5*(Math.cos(Ge*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>Yf(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Yf(n)?n:uN(n,.075,.3),easeOutElastic:n=>Yf(n)?n:dN(n,.075,.3),easeInOutElastic:n=>Yf(n)?n:n<.5?.5*uN(2*n,.1125,.45):.5+.5*dN(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let e=1.70158;return(n/=.5)<1?n*n*((1+(e*=1.525))*n-e)*.5:.5*((n-=2)*n*((1+(e*=1.525))*n+e)+2)},easeInBounce:n=>1-ou.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*ou.easeInBounce(2*n):.5*ou.easeOutBounce(2*n-1)+.5};function mE(n){if(n&&"object"==typeof n){const e=n.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function hN(n){return mE(n)?n:new za(n)}function _E(n){return mE(n)?n:new za(n).saturate(.5).darken(.1).hexString()}const UK=["x","y","borderWidth","radius","tension"],$K=["color","borderColor","backgroundColor"],fN=new Map;function au(n,e,t){return function qK(n,e){e=e||{};const t=n+JSON.stringify(e);let r=fN.get(t);return r||(r=new Intl.NumberFormat(n,e),fN.set(t,r)),r}(e,t).format(n)}const pN={values:n=>ze(n)?n:""+n,numeric(n,e,t){if(0===n)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),s=function WK(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}(n,t)}const o=$i(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),au(n,r,c)},logarithmic(n,e,t){if(0===n)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor($i(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?pN.numeric.call(this,n,e,t):""}};var Xf={formatters:pN};const $s=Object.create(null),yE=Object.create(null);function cu(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function vE(n,e,t){return"string"==typeof e?tu(cu(n,e),t):tu(cu(n,""),e)}class QK{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>_E(i.backgroundColor),this.hoverBorderColor=(r,i)=>_E(i.borderColor),this.hoverColor=(r,i)=>_E(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return vE(this,e,t)}get(e){return cu(this,e)}describe(e,t){return vE(yE,e,t)}override(e,t){return vE($s,e,t)}route(e,t,r,i){const s=cu(this,e),o=cu(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[a],l=o[i];return he(c)?Object.assign({},l,c):oe(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}}var nt=new QK({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function zK(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),n.set("animations",{colors:{type:"color",properties:$K},numbers:{type:"number",properties:UK}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function GK(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function KK(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Jf(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function XK(n,e,t,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0;const a=t.length;let c,l,u,h,f;for(c=0;c<a;c++)if(h=t[c],null==h||ze(h)){if(ze(h))for(l=0,u=h.length;l<u;l++)f=h[l],null!=f&&!ze(f)&&(o=Jf(n,i,s,o,f))}else o=Jf(n,i,s,o,h);n.restore();const p=s.length/2;if(p>t.length){for(c=0;c<p;c++)delete i[s[c]];s.splice(0,p)}return o}function zs(n,e,t){const r=n.currentDevicePixelRatio,i=0!==t?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function gN(n,e){(e=e||n.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function bE(n,e,t,r){mN(n,e,t,r,null)}function mN(n,e,t,r,i){let s,o,a,c,l,u,h,f;const p=e.pointStyle,m=e.rotation,y=e.radius;let v=(m||0)*RK;if(p&&"object"==typeof p&&(s=p.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(t,r),n.rotate(v),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void n.restore();if(!(isNaN(y)||y<=0)){switch(n.beginPath(),p){default:i?n.ellipse(t,r,i/2,y,0,0,qe):n.arc(t,r,y,0,qe),n.closePath();break;case"triangle":u=i?i/2:y,n.moveTo(t+Math.sin(v)*u,r-Math.cos(v)*y),v+=J1,n.lineTo(t+Math.sin(v)*u,r-Math.cos(v)*y),v+=J1,n.lineTo(t+Math.sin(v)*u,r-Math.cos(v)*y),n.closePath();break;case"rectRounded":l=.516*y,c=y-l,o=Math.cos(v+Us)*c,h=Math.cos(v+Us)*(i?i/2-l:c),a=Math.sin(v+Us)*c,f=Math.sin(v+Us)*(i?i/2-l:c),n.arc(t-h,r-a,l,v-Ge,v-yt),n.arc(t+f,r-o,l,v-yt,v),n.arc(t+h,r+a,l,v,v+yt),n.arc(t-f,r+o,l,v+yt,v+Ge),n.closePath();break;case"rect":if(!m){c=Math.SQRT1_2*y,u=i?i/2:c,n.rect(t-u,r-c,2*u,2*c);break}v+=Us;case"rectRot":h=Math.cos(v)*(i?i/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,f=Math.sin(v)*(i?i/2:y),n.moveTo(t-h,r-a),n.lineTo(t+f,r-o),n.lineTo(t+h,r+a),n.lineTo(t-f,r+o),n.closePath();break;case"crossRot":v+=Us;case"cross":h=Math.cos(v)*(i?i/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,f=Math.sin(v)*(i?i/2:y),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-o),n.lineTo(t-f,r+o);break;case"star":h=Math.cos(v)*(i?i/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,f=Math.sin(v)*(i?i/2:y),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-o),n.lineTo(t-f,r+o),v+=Us,h=Math.cos(v)*(i?i/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,f=Math.sin(v)*(i?i/2:y),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-o),n.lineTo(t-f,r+o);break;case"line":o=i?i/2:Math.cos(v)*y,a=Math.sin(v)*y,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(v)*(i?i/2:y),r+Math.sin(v)*y);break;case!1:n.closePath()}n.fill(),e.borderWidth>0&&n.stroke()}}function ni(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Zf(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function ep(n){n.restore()}function JK(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if("middle"===i){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else"after"===i!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function ZK(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function tQ(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t+s.actualBoundingBoxDescent,u=i.strikethrough?(t-s.actualBoundingBoxAscent+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function nQ(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Gs(n,e,t,r,i,s={}){const o=ze(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let c,l;for(n.save(),n.font=i.string,function eQ(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),be(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&nQ(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),be(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,r,s.maxWidth)),n.fillText(l,t,r,s.maxWidth),tQ(n,t,r,l,s),r+=Number(i.lineHeight);n.restore()}function lu(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ge,Ge,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Ge,yt,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,yt,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-yt,!0),n.lineTo(t+o.topLeft,r)}const rQ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,iQ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function sQ(n,e){const t=(""+n).match(rQ);if(!t||"normal"===t[1])return 1.2*e;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100}return e*n}const oQ=n=>+n||0;function EE(n,e){const t={},r=he(e),i=r?Object.keys(e):e,s=he(n)?r?o=>oe(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=oQ(s(o));return t}function _N(n){return EE(n,{top:"y",right:"x",bottom:"y",left:"x"})}function qs(n){return EE(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Kt(n){const e=_N(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ct(n,e){let t=oe((n=n||{}).size,(e=e||nt.font).size);"string"==typeof t&&(t=parseInt(t,10));let r=oe(n.style,e.style);r&&!(""+r).match(iQ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:oe(n.family,e.family),lineHeight:sQ(oe(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:oe(n.weight,e.weight),string:""};return i.string=function YK(n){return!n||be(n.size)||be(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(i),i}function uu(n,e,t,r){let s,o,a,i=!0;for(s=0,o=n.length;s<o;++s)if(a=n[s],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),i=!1),void 0!==t&&ze(a)&&(a=a[t%a.length],i=!1),void 0!==a))return r&&!i&&(r.cacheable=!1),a}function zi(n,e){return Object.assign(Object.create(n),e)}function wE(n,e=[""],t,r,i=(()=>n[0])){const s=t||n;typeof r>"u"&&(r=wN("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>wE([a,...n],e,s,r)};return new Proxy(o,{deleteProperty:(a,c)=>(delete a[c],delete a._keys,delete n[0][c],!0),get:(a,c)=>vN(a,c,()=>function gQ(n,e,t,r){let i;for(const s of e)if(i=wN(cQ(s,n),t),typeof i<"u")return IE(n,i)?DE(t,r,n,i):i}(c,e,n,a)),getOwnPropertyDescriptor:(a,c)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],c),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(a,c)=>IN(a).includes(c),ownKeys:a=>IN(a),set(a,c,l){const u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function qa(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:yN(n,r),setContext:s=>qa(n,s,t,r),override:s=>qa(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty:(s,o)=>(delete s[o],delete n[o],!0),get:(s,o,a)=>vN(s,o,()=>function lQ(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let a=r[e];return Ui(a)&&o.isScriptable(e)&&(a=function uQ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||r);return a.delete(n),IE(n,c)&&(c=DE(i._scopes,i,n,c)),c}(e,a,n,t)),ze(a)&&a.length&&(a=function dQ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(he(e[0])){const c=e,l=i._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=DE(l,i,n,u);e.push(qa(h,s,o&&o[n],a))}}return e}(e,a,n,o.isIndexable)),IE(e,a)&&(a=qa(a,i,s&&s[e],o)),a}(s,o,a)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(s,o,a)=>(n[o]=a,delete s[o],!0)})}function yN(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Ui(t)?t:()=>t,isIndexable:Ui(r)?r:()=>r}}const cQ=(n,e)=>n?n+dE(e):e,IE=(n,e)=>he(e)&&"adapters"!==n&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function vN(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const r=t();return n[e]=r,r}function bN(n,e,t){return Ui(n)?n(e,t):n}const hQ=(n,e)=>!0===n?e:"string"==typeof n?Hi(e,n):void 0;function fQ(n,e,t,r,i){for(const s of e){const o=hQ(t,s);if(o){n.add(o);const a=bN(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(!1===o&&typeof r<"u"&&t!==r)return null}return!1}function DE(n,e,t,r){const i=e._rootScopes,s=bN(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let c=EN(a,o,t,s||t,r);return!(null===c||typeof s<"u"&&s!==t&&(c=EN(a,o,s,c,r),null===c))&&wE(Array.from(a),[""],i,s,()=>function pQ(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return ze(i)&&he(t)?t:i||{}}(e,t,r))}function EN(n,e,t,r,i){for(;t;)t=fQ(n,e,t,r,i);return t}function wN(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function IN(n){let e=n._keys;return e||(e=n._keys=function mQ(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}(n._scopes)),e}function DN(n,e,t,r){const{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r);let a,c,l,u;for(a=0,c=r;a<c;++a)l=a+t,u=e[l],o[a]={r:i.parse(Hi(u,s),l)};return o}const _Q=Number.EPSILON||1e-14,Wa=(n,e)=>e<n.length&&!n[e].skip&&n[e],TN=n=>"x"===n?"y":"x";function yQ(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,a=fE(s,i),c=fE(o,s);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=r*l,f=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function tp(n,e,t){return Math.max(Math.min(n,t),e)}function IQ(n,e,t,r,i){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),"monotone"===e.cubicInterpolationMode)!function EQ(n,e="x"){const t=TN(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,a,c,l=Wa(n,0);for(o=0;o<r;++o)if(a=c,c=l,l=Wa(n,o+1),c){if(l){const u=l[e]-c[e];i[o]=0!==u?(l[t]-c[t])/u:0}s[o]=a?l?Ir(i[o-1])!==Ir(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}(function vQ(n,e,t){const r=n.length;let i,s,o,a,c,l=Wa(n,0);for(let u=0;u<r-1;++u)if(c=l,l=Wa(n,u+1),c&&l){if(iu(e[u],0,_Q)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=i*o*e[u],t[u+1]=s*o*e[u])}})(n,i,s),function bQ(n,e,t="x"){const r=TN(t),i=n.length;let s,o,a,c=Wa(n,0);for(let l=0;l<i;++l){if(o=a,a=c,c=Wa(n,l+1),!a)continue;const u=a[t],h=a[r];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${r}`]=h-s*e[l]),c&&(s=(c[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${r}`]=h+s*e[l])}}(n,s,e)}(n,i);else{let l=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=yQ(l,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&function wQ(n,e){let t,r,i,s,o,a=ni(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&ni(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=tp(i.cp1x,e.left,e.right),i.cp1y=tp(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=tp(i.cp2x,e.left,e.right),i.cp2y=tp(i.cp2y,e.top,e.bottom)))}(n,t)}function CN(){return typeof window<"u"&&typeof document<"u"}function TE(n){let e=n.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function np(n,e,t){let r;return"string"==typeof n?(r=parseInt(n,10),-1!==n.indexOf("%")&&(r=r/100*e.parentNode[t])):r=n,r}const rp=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),TQ=["top","right","bottom","left"];function Ws(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=TQ[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const CQ=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Ks(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=rp(t),s="border-box"===i.boxSizing,o=Ws(i,"padding"),a=Ws(i,"border","width"),{x:c,y:l,box:u}=function xQ(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let a,c,o=!1;if(CQ(i,s,n.target))a=i,c=s;else{const l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,o=!0}return{x:a,y:c,box:o}}(n,t),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:m}=e;return s&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((c-h)/p*t.width/r),y:Math.round((l-f)/m*t.height/r)}}const ip=n=>Math.round(10*n)/10;function xN(n,e,t){const r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0)}const MQ=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function SN(n,e){const t=function DQ(n,e){return rp(n).getPropertyValue(e)}(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Qs(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function PQ(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:"middle"===r?t<.5?n.y:e.y:"after"===r?t<1?n.y:e.y:t>0?e.y:n.y}}function RQ(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Qs(n,i,t),a=Qs(i,s,t),c=Qs(s,e,t),l=Qs(o,a,t),u=Qs(a,c,t);return Qs(l,u,t)}function Ka(n,e,t){return n?function(n,e){return{x:t=>n+n+e-t,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,r)=>t-r,leftForLtr:(t,r)=>t-r}}(e,t):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,e)=>n+e,leftForLtr:(n,e)=>n}}function AN(n,e){let t,r;("ltr"===e||"rtl"===e)&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function MN(n,e){void 0!==e&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function PN(n){return"angle"===n?{between:su,compare:kK,normalize:Rn}:{between:ei,compare:(e,t)=>e-t,normalize:e=>e}}function RN({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t==0,style:i}}function NN(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=PN(r),{start:u,end:h,loop:f,style:p}=function kQ(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:a}=PN(r),c=e.length;let f,p,{start:l,end:u,loop:h}=n;if(h){for(l+=c,u+=c,f=0,p=c;f<p&&o(a(e[l%c][r]),i,s);++f)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:h,style:n.style}}(n,e,t),m=[];let I,E,S,y=!1,v=null;for(let b=u,D=u;b<=h;++b)E=e[b%o],!E.skip&&(I=l(E[r]),I!==S&&(y=c(I,i,s),null===v&&(y||c(i,S,I)&&0!==a(i,S))&&(v=0===a(I,i)?b:D),null!==v&&(!y||0===a(s,I)||c(s,S,I))&&(m.push(RN({start:v,end:b,loop:f,count:o,style:p})),v=null),D=b,S=I));return null!==v&&m.push(RN({start:v,end:h,loop:f,count:o,style:p})),m}function ON(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=NN(r[i],n.points,e);s.length&&t.push(...s)}return t}function FN(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function jQ(n,e){if(!e)return!1;const t=[],r=function(i,s){return mE(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}class HQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.duration;t.listeners[i].forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=oN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let c,o=s.length-1,a=!1;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ri=new HQ;const VN="transparent",UQ={boolean:(n,e,t)=>t>.5?e:n,color(n,e,t){const r=hN(n||VN),i=r.valid&&hN(e||VN);return i&&i.valid?i.mix(r,t).hexString():e},number:(n,e,t)=>n+(e-n)*t};class $Q{constructor(e,t,r,i){const s=t[r];i=uu([e.to,i,s,e.from]);const o=uu([e.from,s,i]);this._active=!0,this._fn=e.fn||UQ[e.type||typeof o],this._easing=ou[e.easing]||ou.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=uu([e.to,t,i,e.from]),this._from=uu([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let c;if(this._active=s!==a&&(o||t<r),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=s:(c=t/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,a,c))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class LN{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!he(e))return;const t=Object.keys(nt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!he(s))return;const o={};for(const a of t)o[a]=s[a];(ze(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){const r=t.options,i=function GQ(n,e){if(!e)return;let t=n.options;if(t)return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;n.options=e}(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&function zQ(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const l=o[c];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const u=t[l];let h=s[l];const f=r.get(l);if(h){if(f&&h.active()){h.update(f,u,a);continue}h.cancel()}f&&f.duration?(s[l]=h=new $Q(f,e,l,u),i.push(h)):e[l]=u}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(ri.add(this._chart,r),!0):void 0}}function BN(n,e){const t=n&&n.options||{},r=t.reverse,i=void 0===t.min?e:0,s=void 0===t.max?e:0;return{start:r?s:i,end:r?i:s}}function jN(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function HN(n,e,t,r={}){const i=n.keys,s="single"===r.mode;let o,a,c,l;if(null!==e){for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===t){if(r.all)continue;break}l=n.values[c],lt(l)&&(s||0===e||Ir(e)===Ir(l))&&(e+=l)}return e}}function UN(n,e){const t=n&&n.options.stacked;return t||void 0===t&&void 0!==e.stack}function XQ(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function $N(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function zN(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,c=s.axis,l=o.axis,u=function QQ(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}(s,o,r),h=e.length;let f;for(let p=0;p<h;++p){const m=e[p],{[c]:y,[l]:v}=m;f=(m._stacks||(m._stacks={}))[l]=XQ(i,u,y),f[a]=v,f._top=$N(f,o,!0,r.type),f._bottom=$N(f,o,!1,r.type),(f._visualValues||(f._visualValues={}))[a]=v}}function CE(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function du(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||void 0===s[r]||void 0===s[r][t])return;delete s[r][t],void 0!==s[r]._visualValues&&void 0!==s[r]._visualValues[t]&&delete s[r]._visualValues[t]}}}const xE=n=>"reset"===n||"none"===n,GN=(n,e)=>e?n:Object.assign({},n);let Gi=(()=>class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=UN(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&du(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(f,p,m,y)=>"x"===f?p:"r"===f?y:m,o=r.xAxisID=oe(i.xAxisID,CE(t,"x")),a=r.yAxisID=oe(i.yAxisID,CE(t,"y")),c=r.rAxisID=oe(i.rAxisID,CE(t,"r")),l=r.indexAxis,u=r.iAxisID=s(l,o,a,c),h=r.vAxisID=s(l,a,o,c);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&iN(this._data,this),t._stacked&&du(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(he(r))this._data=function KQ(n){const e=Object.keys(n),t=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],t[r]={x:s,y:n[s]};return t}(r);else if(i!==r){if(i){iN(i,this);const s=this._cachedMeta;du(s),s._parsed=[]}r&&Object.isExtensible(r)&&function BK(n,e){n._chartjs?n._chartjs.listeners.push(e):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),rN.forEach(t=>{const r="_onData"+dE(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{"function"==typeof a[r]&&a[r](...s)}),o}})}))}(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=r._stacked;r._stacked=UN(r.vScale,r),r.stack!==i.stack&&(s=!0,du(r),r.stack=i.stack),this._resyncElements(t),(s||o!==r._stacked)&&zN(this,r._parsed)}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,c=o.axis;let h,f,p,l=0===t&&r===s.length||i._sorted,u=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,p=s;else{p=ze(s[t])?this.parseArrayData(i,s,t,r):he(s[t])?this.parseObjectData(i,s,t,r):this.parsePrimitiveData(i,s,t,r);const m=()=>null===f[c]||u&&f[c]<u[c];for(h=0;h<r;++h)i._parsed[h+t]=f=p[h],l&&(m()&&(l=!1),u=f);i._sorted=l}a&&zN(this,p)}parsePrimitiveData(t,r,i,s){const{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),h=o===a,f=new Array(s);let p,m,y;for(p=0,m=s;p<m;++p)y=p+i,f[p]={[c]:h||o.parse(u[y],y),[l]:a.parse(r[y],y)};return f}parseArrayData(t,r,i,s){const{xScale:o,yScale:a}=t,c=new Array(s);let l,u,h,f;for(l=0,u=s;l<u;++l)h=l+i,f=r[h],c[l]={x:o.parse(f[0],h),y:a.parse(f[1],h)};return c}parseObjectData(t,r,i,s){const{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s);let h,f,p,m;for(h=0,f=s;h<f;++h)p=h+i,m=r[p],u[h]={x:o.parse(Hi(m,c),p),y:a.parse(Hi(m,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){const o=this._cachedMeta,a=r[t.axis];return HN({keys:jN(this.chart,!0),values:r._stacks[t.axis]._visualValues},a,o.index,{mode:i})}updateRangeFromParsed(t,r,i,s){const o=i[r.axis];let a=null===o?NaN:o;const c=s&&i._stacks[r.axis];s&&c&&(s.values=c,a=HN(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,a=s.length,c=this._getOtherScale(t),l=((n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:jN(this.chart,!0),values:null})(r,i),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=function YQ(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}(c);let p,m;function y(){m=s[p];const v=m[c.axis];return!lt(m[t.axis])||h>v||f<v}for(p=0;p<a&&(y()||(this.updateRangeFromParsed(u,t,m,l),!o));++p);if(o)for(p=a-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(u,t,m,l);break}return u}getAllParsedValues(t){const r=this._cachedMeta._parsed,i=[];let s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][t.axis],lt(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=function WQ(n){let e,t,r,i;return he(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:!1===n}}(oe(this.options.clip,function qQ(n,e,t){if(!1===t)return!1;const r=BN(n,t),i=BN(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this._cachedMeta,s=i.data||[],o=this.chart.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,o,c,l),h=c;h<c+l;++h){const f=s[h];f.hidden||(f.active&&u?a.push(f):f.draw(t,o))}for(h=0;h<a.length;++h)a[h].draw(t,o)}getStyle(t,r){const i=r?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];o=a.$context||(a.$context=function ZQ(n,e,t){return zi(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function JQ(n,e){return zi(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){const s="active"===r,o=this._cachedDataOpts,a=t+"-"+r,c=o[a],l=this.enableOptionSharing&&ru(i);if(c)return GN(c,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),f=s?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),m=Object.keys(nt.elements[t]),v=u.resolveNamedOptions(p,m,()=>this.getContext(i,s,r),f);return v.$shared&&(v.$shared=l,o[a]=Object.freeze(GN(v,l))),v}_resolveAnimations(t,r,i){const s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,c=o[a];if(c)return c;let l;if(!1!==s.options.animation){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,r),p=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(p,this.getContext(t,i,r))}const u=new LN(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||xE(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const i=this.resolveDataElementOptions(t,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(t,r,i,s){xE(s)?Object.assign(t,i):this._resolveAnimations(r,s).update(t,i)}updateSharedOptions(t,r,i){t&&!xE(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,s){t.active=s;const o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,i=this._cachedMeta.data;for(const[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];const s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,r,i=!0){const s=this._cachedMeta,o=s.data,a=t+r;let c;const l=u=>{for(u.length+=r,c=u.length-1;c>=a;c--)u[c]=u[c-r]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,r),i&&this.updateElements(o,t,r,"reset")}updateElements(t,r,i,s){}_removeElements(t,r){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,r);i._stacked&&du(i,s)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,i,s]=t;this[r](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}})();function nY(n){const e=n.iScale,t=function tY(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=sN(r.sort((i,s)=>i-s))}return n._cache.$bar}(e,n.type);let i,s,o,a,r=e._length;const c=()=>{32767===o||-32768===o||(ru(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),c();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),c();return r}function qN(n,e,t,r){return ze(n)?function sY(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s);let c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:s,min:o,max:a}}(n,e,t,r):e[t.axis]=t.parse(n,r),e}function WN(n,e,t,r){const i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,c=[];let l,u,h,f;for(l=t,u=t+r;l<u;++l)f=e[l],h={},h[i.axis]=a||i.parse(o[l],l),c.push(qN(f,h,s,l));return c}function SE(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function cY(n,e,t,r){let i=e.borderSkipped;const s={};if(!i)return void(n.borderSkipped=s);if(!0===i)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:c,top:l,bottom:u}=function aY(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}(n);"middle"===i&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=l:(t._bottom||0)===r?i=u:(s[KN(u,o,a,c)]=!0,i=l)),s[KN(i,o,a,c)]=!0,n.borderSkipped=s}function KN(n,e,t,r){return r?(n=function lY(n,e,t){return n===e?t:n===t?e:n}(n,e,t),n=QN(n,t,e)):n=QN(n,e,t),n}function QN(n,e,t){return"start"===n?e:"end"===n?t:n}function uY(n,{inflateAmount:e},t){n.inflateAmount="auto"===e?1===t?.33:0:e}let dY=(()=>class n extends Gi{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,s){return WN(t,r,i,s)}parseArrayData(t,r,i,s){return WN(t,r,i,s)}parseObjectData(t,r,i,s){const{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u="x"===o.axis?c:l,h="x"===a.axis?c:l,f=[];let p,m,y,v;for(p=i,m=i+s;p<m;++p)v=r[p],y={},y[o.axis]=o.parse(Hi(v,u),p),f.push(qN(Hi(v,h),y,a,p));return f}updateRangeFromParsed(t,r,i,s){super.updateRangeFromParsed(t,r,i,s);const o=i._custom;o&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(t),a=o._custom,c=SE(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,s){const o="reset"===s,{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,s);for(let m=r;m<r+i;m++){const y=this.getParsed(m),v=o||be(y[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),I=this._calculateBarIndexPixels(m,h),E=(y._stacks||{})[c.axis],S={horizontal:u,base:v.base,enableBorderRadius:!E||SE(y._custom)||a===E._top||a===E._bottom,x:u?v.head:I.center,y:u?I.center:v.head,height:u?I.size:Math.abs(v.size),width:u?Math.abs(v.size):I.size};p&&(S.options=f||this.resolveDataElementOptions(m,t[m].active?"active":s));const P=S.options||t[m].options;cY(S,P,E,a),uY(S,P,h.ratio),this.updateElement(t[m],m,S,s)}}_getStacks(t,r){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=i.options.stacked,a=[],c=l=>{const u=l.controller.getParsed(r),h=u&&u[l.vScale.axis];if(be(h)||isNaN(h))return!0};for(const l of s)if((void 0===r||!c(l))&&((!1===o||-1===a.indexOf(l.stack)||void 0===o&&void 0===l.stack)&&a.push(l.stack),l.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,r,i){const s=this._getStacks(t,i),o=void 0!==r?s.indexOf(r):-1;return-1===o?s.length-1:o}_getRuler(){const t=this.options,r=this._cachedMeta,i=r.iScale,s=[];let o,a;for(o=0,a=r.data.length;o<a;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const c=t.barThickness;return{min:c||nY(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),u=l._custom,h=SE(u);let y,v,f=l[r.axis],p=0,m=i?this.applyStack(r,l,i):f;m!==f&&(p=m-f,m=f),h&&(f=u.barStart,m=u.barEnd-u.barStart,0!==f&&Ir(f)!==Ir(u.barEnd)&&(p=0),p+=f);const I=be(o)||h?p:o;let E=r.getPixelForValue(I);if(y=this.chart.getDataVisibility(t)?r.getPixelForValue(p+m):E,v=y-E,Math.abs(v)<a){v=function oY(n,e,t){return 0!==n?Ir(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}(v,r,c)*a,f===c&&(E-=v/2);const S=r.getPixelForDecimal(0),P=r.getPixelForDecimal(1),R=Math.min(S,P),k=Math.max(S,P);E=Math.max(Math.min(E,k),R),y=E+v,i&&!h&&(l._stacks[r.axis]._visualValues[s]=r.getValueForPixel(y)-r.getValueForPixel(E))}if(E===r.getPixelForValue(c)){const S=Ir(v)*r.getLineWidthForValue(c)/2;E+=S,v-=S}return{size:v,base:E,head:y,center:y+v/2}}_calculateBarIndexPixels(t,r){const i=r.scale,s=this.options,o=s.skipNull,a=oe(s.maxBarThickness,1/0);let c,l;if(r.grouped){const u=o?this._getStackCount(t):r.stackCount,h="flex"===s.barThickness?function iY(n,e,t,r){const i=e.pixels,s=i[n];let o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null;const c=t.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/r,ratio:t.barPercentage,start:l}}(t,r,s,u):function rY(n,e,t,r){const i=t.barThickness;let s,o;return be(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}(t,r,s,u),f=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);c=h.start+h.chunk*f+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){const t=this._cachedMeta,r=t.vScale,i=t.data,s=i.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[r.axis]&&i[o].draw(this._ctx)}})(),hY=(()=>class n extends Gi{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,s){const o=super.parsePrimitiveData(t,r,i,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+i).radius;return o}parseArrayData(t,r,i,s){const o=super.parseArrayData(t,r,i,s);for(let a=0;a<o.length;a++)o[a]._custom=oe(r[i+a][2],this.resolveDataElementOptions(a+i).radius);return o}parseObjectData(t,r,i,s){const o=super.parseObjectData(t,r,i,s);for(let a=0;a<o.length;a++){const c=r[i+a];o[a]._custom=oe(c&&c.r&&+c.r,this.resolveDataElementOptions(a+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y),u=a._custom;return{label:i[t]||"",value:"("+c+", "+l+(u?", "+u:"")+")"}}update(t){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,s){const o="reset"===s,{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(r,s),h=a.axis,f=c.axis;for(let p=r;p<r+i;p++){const m=t[p],y=!o&&this.getParsed(p),v={},I=v[h]=o?a.getPixelForDecimal(.5):a.getPixelForValue(y[h]),E=v[f]=o?c.getBasePixel():c.getPixelForValue(y[f]);v.skip=isNaN(I)||isNaN(E),u&&(v.options=l||this.resolveDataElementOptions(p,m.active?"active":s),o&&(v.options.radius=0)),this.updateElement(m,p,v,s)}}resolveDataElementOptions(t,r){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==r&&(s.radius=0),s.radius+=oe(i&&i._custom,o),s}})(),AE=(()=>class n extends Gi{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return r.labels.map((o,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let a,c,o=l=>+i[l];if(he(i[t])){const{key:l="value"}=this._parsing;o=u=>+Hi(i[u],l)}for(a=t,c=t+r;a<c;++a)s._parsed[a]=o(a)}}_getRotation(){return er(this.options.rotation-90)}_getCircumference(){return er(this.options.circumference)}_getRotationExtents(){let t=qe,r=-qe;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),r=Math.max(r,o+a)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(((n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/e)(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:y,offsetY:v}=function fY(n,e,t){let r=1,i=1,s=0,o=0;if(e<qe){const a=n,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),f=Math.sin(c),p=(S,P,R)=>su(S,a,c,!0)?1:Math.max(P,P*t,R,R*t),m=(S,P,R)=>su(S,a,c,!0)?-1:Math.min(P,P*t,R,R*t),y=p(0,l,h),v=p(yt,u,f),I=m(Ge,l,h),E=m(Ge+yt,u,f);r=(y-I)/2,i=(v-E)/2,s=-(y+I)/2,o=-(v+E)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(f,h,l),S=Math.max(Math.min((i.width-a)/p,(i.height-a)/m)/2,0),P=K1(this.options.radius,S),k=(P-Math.max(P*l,0))/this._getVisibleDatasetWeightTotal();this.offsetX=y*P,this.offsetY=v*P,s.total=this.calculateTotal(),this.outerRadius=P-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,r){const i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/qe)}updateElements(t,r,i,s){const o="reset"===s,a=this.chart,c=a.chartArea,h=(c.left+c.right)/2,f=(c.top+c.bottom)/2,p=o&&a.options.animation.animateScale,m=p?0:this.innerRadius,y=p?0:this.outerRadius,{sharedOptions:v,includeOptions:I}=this._getSharedOptions(r,s);let S,E=this._getRotation();for(S=0;S<r;++S)E+=this._circumference(S,o);for(S=r;S<r+i;++S){const P=this._circumference(S,o),R=t[S],k={x:h+this.offsetX,y:f+this.offsetY,startAngle:E,endAngle:E+P,circumference:P,outerRadius:y,innerRadius:m};I&&(k.options=v||this.resolveDataElementOptions(S,R.active?"active":s)),E+=P,this.updateElement(R,S,k,s)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let s,i=0;for(s=0;s<r.length;s++){const o=t._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?qe*(Math.abs(t)/r):0}getLabelAndValue(t){const i=this.chart,s=i.data.labels||[],o=au(this._cachedMeta._parsed[t],i.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let r=0;const i=this.chart;let s,o,a,c,l;if(!t)for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),t=a.data,c=a.controller;break}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=c.resolveDataElementOptions(s),"inner"!==l.borderAlign&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,s=t.length;i<s;++i){const o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(oe(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}})(),pY=(()=>class n extends Gi{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,a=this.chart._animationsDisabled;let{start:c,count:l}=cN(r,s,a);this._drawStart=c,this._drawCount=l,lN(r)&&(c=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},t),this.updateElements(s,c,l,t)}updateElements(t,r,i,s){const o="reset"===s,{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,s),p=a.axis,m=c.axis,{spanGaps:y,segment:v}=this.options,I=Ga(y)?y:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||"none"===s,S=r+i,P=t.length;let R=r>0&&this.getParsed(r-1);for(let k=0;k<P;++k){const T=t[k],b=E?T:{};if(k<r||k>=S){b.skip=!0;continue}const D=this.getParsed(k),x=be(D[m]),A=b[p]=a.getPixelForValue(D[p],k),M=b[m]=o||x?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,D,l):D[m],k);b.skip=isNaN(A)||isNaN(M)||x,b.stop=k>0&&Math.abs(D[p]-R[p])>I,v&&(b.parsed=D,b.raw=u.data[k]),f&&(b.options=h||this.resolveDataElementOptions(k,T.active?"active":s)),E||this.updateElement(T,k,b,s),R=D}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}})(),YN=(()=>class n extends Gi{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return r.labels.map((o,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this.chart,s=i.data.labels||[],o=au(this._cachedMeta._parsed[t].r,i.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,r,i,s){return DN.bind(this)(t,r,i,s)}update(t){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){const r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((i,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){const t=this.chart,r=t.chartArea,i=t.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),c=(o-Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,r,i,s){const o="reset"===s,a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,f=u.yCenter,p=u.getIndexAngle(0)-.5*Ge;let y,m=p;const v=360/this.countVisibleElements();for(y=0;y<r;++y)m+=this._computeAngle(y,s,v);for(y=r;y<r+i;y++){const I=t[y];let E=m,S=m+this._computeAngle(y,s,v),P=a.getDataVisibility(y)?u.getDistanceFromCenterForValue(this.getParsed(y).r):0;m=S,o&&(l.animateScale&&(P=0),l.animateRotate&&(E=S=p));const R={x:h,y:f,innerRadius:0,outerRadius:P,startAngle:E,endAngle:S,options:this.resolveDataElementOptions(y,I.active?"active":s)};this.updateElement(I,y,R,s)}}countVisibleElements(){let r=0;return this._cachedMeta.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?er(this.resolveDataElementOptions(t,r).angle||i):0}})();var gY=Object.freeze({__proto__:null,BarController:dY,BubbleController:hY,DoughnutController:AE,LineController:pY,PieController:(()=>class n extends AE{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}})(),PolarAreaController:YN,RadarController:(()=>class n extends Gi{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,s){return DN.bind(this)(t,r,i,s)}update(t){const r=this._cachedMeta,i=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(i.points=s,"resize"!==t){const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0),this.updateElement(i,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:a},t)}this.updateElements(s,0,s.length,t)}updateElements(t,r,i,s){const o=this._cachedMeta.rScale,a="reset"===s;for(let c=r;c<r+i;c++){const l=t[c],u=this.resolveDataElementOptions(c,l.active?"active":s),h=o.getPointPositionForValue(c,this.getParsed(c).r),f=a?o.xCenter:h.x,p=a?o.yCenter:h.y,m={x:f,y:p,angle:h.angle,skip:isNaN(f)||isNaN(p),options:u};this.updateElement(l,c,m,s)}}})(),ScatterController:(()=>class n extends Gi{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:i[t]||"",value:"("+c+", "+l+")"}}update(t){const r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled;let{start:o,count:a}=cN(r,i,s);if(this._drawStart=o,this._drawCount=a,lN(r)&&(o=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:c,_dataset:l}=r;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=i;const u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:u},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,o,a,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,s){const o="reset"===s,{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(r,s),f=this.getSharedOptions(h),p=this.includeOptions(s,f),m=a.axis,y=c.axis,{spanGaps:v,segment:I}=this.options,E=Ga(v)?v:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||o||"none"===s;let P=r>0&&this.getParsed(r-1);for(let R=r;R<r+i;++R){const k=t[R],T=this.getParsed(R),b=S?k:{},D=be(T[y]),x=b[m]=a.getPixelForValue(T[m],R),A=b[y]=o||D?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,T,l):T[y],R);b.skip=isNaN(x)||isNaN(A)||D,b.stop=R>0&&Math.abs(T[m]-P[m])>E,I&&(b.parsed=T,b.raw=u.data[R]),p&&(b.options=f||this.resolveDataElementOptions(R,k.active?"active":s)),S||this.updateElement(k,R,b,s),P=T}this.updateSharedOptions(f,s,h)}getMaxOverflow(){const t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let c=0;for(let l=r.length-1;l>=0;--l)c=Math.max(c,r[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}})()});function Ys(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ME{static override(e){Object.assign(ME.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ys()}parse(){return Ys()}format(){return Ys()}add(){return Ys()}diff(){return Ys()}startOf(){return Ys()}endOf(){return Ys()}}var mY__date=ME;function _Y(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const c=a._reversePixels?VK:ti;if(!r)return c(s,e,t);if(i._sharedOptions){const l=s[0],u="function"==typeof l.getRange&&l.getRange(e);if(u){const h=c(s,e,t-u),f=c(s,e,t+u);return{lo:h.lo,hi:f.hi}}}}return{lo:0,hi:s.length-1}}function hu(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){const{index:l,data:u}=s[a],{lo:h,hi:f}=_Y(s[a],e,o,i);for(let p=h;p<=f;++p){const m=u[p];m.skip||r(m,l,p)}}}function PE(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||hu(n,t,e,function(a,c,l){!i&&!ni(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function RE(n,e,t,r,i,s){return s||n.isPointInArea(e)?"r"!==t||r?function bY(n,e,t,r,i,s){let o=[];const a=function yY(n){const e=-1!==n.indexOf("x"),t=-1!==n.indexOf("y");return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(t);let c=Number.POSITIVE_INFINITY;return hu(n,t,e,function l(u,h,f){const p=u.inRange(e.x,e.y,i);if(r&&!p)return;const m=u.getCenterPoint(i);if(!s&&!n.isPointInArea(m)&&!p)return;const v=a(e,m);v<c?(o=[{element:u,datasetIndex:h,index:f}],c=v):v===c&&o.push({element:u,datasetIndex:h,index:f})}),o}(n,e,t,r,i,s):function vY(n,e,t,r){let i=[];return hu(n,t,e,function s(o,a,c){const{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=nN(o,{x:e.x,y:e.y});su(h,l,u)&&i.push({element:o,datasetIndex:a,index:c})}),i}(n,e,t,i):[]}function XN(n,e,t,r,i){const s=[],o="x"===t?"inXRange":"inYRange";let a=!1;return hu(n,t,e,(c,l,u)=>{c[o](e[t],i)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:s}var EY={evaluateInteractionItems:hu,modes:{index(n,e,t,r){const i=Ks(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?PE(n,i,s,r,o):RE(n,i,s,!1,r,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{const u=a[0].index,h=l.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,r){const i=Ks(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?PE(n,i,s,r,o):RE(n,i,s,!1,r,o);if(a.length>0){const c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point:(n,e,t,r)=>PE(n,Ks(e,n),t.axis||"xy",r,t.includeInvisible||!1),nearest:(n,e,t,r)=>RE(n,Ks(e,n),t.axis||"xy",t.intersect,r,t.includeInvisible||!1),x:(n,e,t,r)=>XN(n,Ks(e,n),"x",t.intersect,r),y:(n,e,t,r)=>XN(n,Ks(e,n),"y",t.intersect,r)}};const JN=["left","top","right","bottom"];function fu(n,e){return n.filter(t=>t.pos===e)}function ZN(n,e){return n.filter(t=>-1===JN.indexOf(t.pos)&&t.box.axis===e)}function pu(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function eO(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function tO(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function CY(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!he(i)){t.size&&(n[i]-=t.size);const h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,n[i]+=t.size}s.getPadding&&tO(o,s.getPadding());const a=Math.max(0,e.outerWidth-eO(o,n,"left","right")),c=Math.max(0,e.outerHeight-eO(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function SY(n,e){const t=e.maxPadding;return function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}(n?["left","right"]:["top","bottom"])}function gu(n,e,t,r){const i=[];let s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,SY(a.horizontal,e));const{same:h,other:f}=CY(e,t,a,r);l|=h&&i.length,u=u||f,c.fullSize||i.push(a)}return l&&gu(i,e,t,r)||u}function sp(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function nO(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const a of n){const c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){const h=e.w*u,f=l.size||c.height;ru(l.start)&&(o=l.start),c.fullSize?sp(c,i.left,o,t.outerWidth-i.right-i.left,f):sp(c,e.left+l.placed,o,h,f),l.start=o,l.placed+=h,o=c.bottom}else{const h=e.h*u,f=l.size||c.width;ru(l.start)&&(s=l.start),c.fullSize?sp(c,s,i.top,f,t.outerHeight-i.bottom-i.top):sp(c,s,e.top+l.placed,f,h),l.start=s,l.placed+=h,s=c.right}}e.x=s,e.y=o}var Qt={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;-1!==t&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=Kt(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=function TY(n){const e=function wY(n){const e=[];let t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],({position:s,options:{stack:o,stackWeight:a=1}}=i),e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}(n),t=pu(e.filter(l=>l.box.fullSize),!0),r=pu(fu(e,"left"),!0),i=pu(fu(e,"right")),s=pu(fu(e,"top"),!0),o=pu(fu(e,"bottom")),a=ZN(e,"x"),c=ZN(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:fu(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(a)}}(n.boxes),c=a.vertical,l=a.horizontal;Me(n.boxes,y=>{"function"==typeof y.beforeLayout&&y.beforeLayout()});const u=c.reduce((y,v)=>v.box.options&&!1===v.box.options.display?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);tO(f,Kt(r));const p=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),m=function DY(n,e){const t=function IY(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!JN.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:c&&e.availableHeight)}return t}(c.concat(l),h);gu(a.fullSize,p,h,m),gu(c,p,h,m),gu(l,p,h,m)&&gu(c,p,h,m),function xY(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(p),nO(a.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,nO(a.rightAndBottom,p,h,m),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Me(a.chartArea,y=>{const v=y.box;Object.assign(v,n.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class rO{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class AY extends rO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const op="$chartjs",MY={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},iO=n=>null===n||""===n,sO=!!MQ&&{passive:!0};function NY(n,e,t){n.canvas.removeEventListener(e,t,sO)}function ap(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function kY(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ap(a.addedNodes,r),o=o&&!ap(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function FY(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ap(a.removedNodes,r),o=o&&!ap(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const mu=new Map;let oO=0;function aO(){const n=window.devicePixelRatio;n!==oO&&(oO=n,mu.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function BY(n,e,t){const r=n.canvas,i=r&&TE(r);if(!i)return;const s=aN((a,c)=>{const l=i.clientWidth;t(a,c),l<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{const c=a[0],l=c.contentRect.width,u=c.contentRect.height;0===l&&0===u||s(l,u)});return o.observe(i),function VY(n,e){mu.size||window.addEventListener("resize",aO),mu.set(n,e)}(n,s),o}function NE(n,e,t){t&&t.disconnect(),"resize"===e&&function LY(n){mu.delete(n),mu.size||window.removeEventListener("resize",aO)}(n)}function jY(n,e,t){const r=n.canvas,i=aN(s=>{null!==n.ctx&&t(function OY(n,e){const t=MY[n.type]||n.type,{x:r,y:i}=Ks(n,e);return{type:t,chart:e,native:n,x:void 0!==r?r:null,y:void 0!==i?i:null}}(s,n))},n);return function RY(n,e,t){n.addEventListener(e,t,sO)}(r,e,i),i}class HY extends rO{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function PY(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[op]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",iO(i)){const s=SN(n,"width");void 0!==s&&(n.width=s)}if(iO(r))if(""===n.style.height)n.height=n.width/(e||2);else{const s=SN(n,"height");void 0!==s&&(n.height=s)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[op])return!1;const r=t[op].initial;["height","width"].forEach(s=>{const o=r[s];be(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[op],!0}addEventListener(e,t,r){this.removeEventListener(e,t),(e.$proxies||(e.$proxies={}))[t]=({attach:kY,detach:FY,resize:BY}[t]||jY)(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];i&&(({attach:NE,detach:NE,resize:NE}[t]||NY)(e,t,i),r[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return function AQ(n,e,t,r){const i=rp(n),s=Ws(i,"margin"),o=np(i.maxWidth,n,"clientWidth")||Qf,a=np(i.maxHeight,n,"clientHeight")||Qf,c=function SQ(n,e,t){let r,i;if(void 0===e||void 0===t){const s=TE(n);if(s){const o=s.getBoundingClientRect(),a=rp(s),c=Ws(a,"border","width"),l=Ws(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,r=np(a.maxWidth,s,"clientWidth"),i=np(a.maxHeight,s,"clientHeight")}else e=n.clientWidth,t=n.clientHeight}return{width:e,height:t,maxWidth:r||Qf,maxHeight:i||Qf}}(n,e,t);let{width:l,height:u}=c;if("content-box"===i.boxSizing){const f=Ws(i,"border","width"),p=Ws(i,"padding");l-=p.width+f.width,u-=p.height+f.height}return l=Math.max(0,l-s.width),u=Math.max(0,r?l/r:u-s.height),l=ip(Math.min(l,o,c.maxWidth)),u=ip(Math.min(u,a,c.maxHeight)),l&&!u&&(u=ip(l/2)),(void 0!==e||void 0!==t)&&r&&c.height&&u>c.height&&(u=c.height,l=ip(Math.floor(u*r))),{width:l,height:u}}(e,t,r,i)}isAttached(e){const t=TE(e);return!(!t||!t.isConnected)}}class ii{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Ga(this.x)&&Ga(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function cp(n,e,t,r,i){const s=oe(r,0),o=Math.min(oe(i,n.length),n.length);let c,l,u,a=0;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}const cO=(n,e,t)=>"top"===e||"left"===e?n[e]+t:n[e]-t,lO=(n,e)=>Math.min(e||n,n);function uO(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function YY(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l,c=n.getPixelForTick(i);if(!(t&&(l=1===r?Math.max(c-s,o-c):0===e?(n.getPixelForTick(1)-c)/2:(c-n.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function _u(n){return n.drawTicks?n.tickLength:0}function dO(n,e){if(!n.display)return 0;const t=Ct(n.font,e),r=Kt(n.padding);return(ze(n.text)?n.text.length:1)*t.lineHeight+r.height}function eX(n,e,t){let r=gE(n);return(t&&"right"!==e||!t&&"right"===e)&&(r=(n=>"left"===n?"right":"right"===n?"left":n)(r)),r}class Xs extends ii{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Pn(e,Number.POSITIVE_INFINITY),t=Pn(t,Number.NEGATIVE_INFINITY),r=Pn(r,Number.POSITIVE_INFINITY),i=Pn(i,Number.NEGATIVE_INFINITY),{min:Pn(e,r),max:Pn(t,i),minDefined:lt(e),maxDefined:lt(t)}}getMinMax(e){let o,{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:t,max:r};const a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:Pn(t,Pn(r,t)),max:Pn(r,Pn(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){He(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function aQ(n,e,t){const{min:r,max:i}=n,s=K1(e,(i-r)/2),o=(a,c)=>t&&0===a?0:a+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?uO(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function $Y(n,e){const t=n.options.ticks,r=function zY(n){const e=n.options.offset,t=n._tickSize();return Math.floor(Math.min(n._length/t+(e?0:1),n._maxLength/t))}(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?function qY(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>i)return function WY(n,e,t,r){let o,i=0,s=t[0];for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}(e,l,s,o/i),l;const u=function GY(n,e,t){const r=function KY(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}(n),i=e.length/t;if(!r)return Math.max(i,1);const s=function NK(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r==0&&(e.push(r),e.push(n/r));return t===(0|t)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}(r);for(let o=0,a=s.length-1;o<a;o++){const c=s[o];if(c>i)return c}return Math.max(i,1)}(s,e,i);if(o>0){let h,f;const p=o>1?Math.round((c-a)/(o-1)):null;for(cp(e,l,u,be(p)?0:a-p,a),h=0,f=o-1;h<f;h++)cp(e,l,u,s[h],s[h+1]);return cp(e,l,u,c,be(p)?e.length:c+p),l}return cp(e,l,u),l}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,r,e=this.options.reverse;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){He(this.options.afterUpdate,[this])}beforeSetDimensions(){He(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){He(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),He(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){He(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=He(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){He(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){He(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=lO(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let a,c,l,o=i;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal())return void(this.labelRotation=i);const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=Mt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),h+6>a&&(a=p/(r-(e.offset?.5:1)),c=this.maxHeight-_u(e.grid)-t.padding-dO(e.title,this.chart.options.font),l=Math.sqrt(h*h+f*f),o=hE(Math.min(Math.asin(Mt((u.highest.height+6)/a,-1,1)),Math.asin(Mt(c/l,-1,1))-Math.asin(Mt(f/l,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){He(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){He(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=dO(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=_u(s)+c):(e.height=this.maxHeight,e.width=_u(s)+c),r.display&&this.ticks.length){const{first:l,last:u,widest:h,highest:f}=this._getLabelSizes(),p=2*r.padding,m=er(this.labelRotation),y=Math.cos(m),v=Math.sin(m);a?e.height=Math.min(this.maxHeight,e.height+(r.mirror?0:v*h.width+y*f.height)+p):e.width=Math.min(this.maxWidth,e.width+(r.mirror?0:y*h.width+v*f.height)+p),this._calculatePadding(l,u,v,y)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,c=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?l?(f=i*e.width,p=r*t.height):(f=r*e.height,p=i*t.width):"start"===s?p=t.width:"end"===s?f=e.width:"inner"!==s&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;"start"===s?(u=0,h=e.height):"end"===s&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){He(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)be(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=uO(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/lO(t,r));let h,f,p,m,y,v,I,E,S,P,R,l=0,u=0;for(h=0;h<t;h+=c){if(m=e[h].label,y=this._resolveTickFontOptions(h),i.font=v=y.string,I=s[v]=s[v]||{data:{},gc:[]},E=y.lineHeight,S=P=0,be(m)||ze(m)){if(ze(m))for(f=0,p=m.length;f<p;++f)R=m[f],!be(R)&&!ze(R)&&(S=Jf(i,I.data,I.gc,S,R),P+=E)}else S=Jf(i,I.data,I.gc,S,m),P=E;o.push(S),a.push(P),l=Math.max(S,l),u=Math.max(P,u)}!function XY(n,e){Me(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}(s,t);const k=o.indexOf(l),T=a.indexOf(u),b=D=>({width:o[D]||0,height:a[D]||0});return{first:b(0),last:b(t-1),widest:b(k),highest:b(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function FK(n){return Mt(n,-32768,32767)}(this._alignToPixels?zs(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function ZY(n,e,t){return zi(n,{tick:t,index:e,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=function JY(n,e){return zi(n,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=er(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,c=s.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=_u(s),p=[],m=a.setContext(this.getContext()),y=m.display?m.width:0,v=y/2,I=function(Ue){return zs(r,Ue,y)};let E,S,P,R,k,T,b,D,x,A,M,C;if("top"===o)E=I(this.bottom),T=this.bottom-f,D=E-v,A=I(e.top)+v,C=e.bottom;else if("bottom"===o)E=I(this.top),A=e.top,C=I(e.bottom)-v,T=E+v,D=this.top+f;else if("left"===o)E=I(this.right),k=this.right-f,b=E-v,x=I(e.left)+v,M=e.right;else if("right"===o)E=I(this.left),x=e.left,M=I(e.right)-v,k=E+v,b=this.left+f;else if("x"===t){if("center"===o)E=I((e.top+e.bottom)/2+.5);else if(he(o)){const Ue=Object.keys(o)[0];E=I(this.chart.scales[Ue].getPixelForValue(o[Ue]))}A=e.top,C=e.bottom,T=E+v,D=T+f}else if("y"===t){if("center"===o)E=I((e.left+e.right)/2);else if(he(o)){const Ue=Object.keys(o)[0];E=I(this.chart.scales[Ue].getPixelForValue(o[Ue]))}k=E-v,b=k-f,x=e.left,M=e.right}const rt=oe(i.ticks.maxTicksLimit,h),ve=Math.max(1,Math.ceil(h/rt));for(S=0;S<h;S+=ve){const Ue=this.getContext(S),Ne=s.setContext(Ue),Lt=a.setContext(Ue),Et=Ne.lineWidth,oi=Ne.color,tc=Lt.dash||[],cn=Lt.dashOffset,ut=Ne.tickWidth,eo=Ne.tickColor,tr=Ne.tickBorderDash||[],to=Ne.tickBorderDashOffset;P=YY(this,S,c),void 0!==P&&(R=zs(r,P,Et),l?k=b=x=M=R:T=D=A=C=R,p.push({tx1:k,ty1:T,tx2:b,ty2:D,x1:x,y1:A,x2:M,y2:C,width:Et,color:oi,borderDash:tc,borderDashOffset:cn,tickWidth:ut,tickColor:eo,tickBorderDash:tr,tickBorderDashOffset:to}))}return this._ticksLength=h,this._borderValue=E,p}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:h}=s,f=_u(r.grid),p=f+u,m=h?-u:p,y=-er(this.labelRotation),v=[];let I,E,S,P,R,k,T,b,D,x,A,M,C="middle";if("top"===i)k=this.bottom-m,T=this._getXAxisLabelAlignment();else if("bottom"===i)k=this.top+m,T=this._getXAxisLabelAlignment();else if("left"===i){const ve=this._getYAxisLabelAlignment(f);T=ve.textAlign,R=ve.x}else if("right"===i){const ve=this._getYAxisLabelAlignment(f);T=ve.textAlign,R=ve.x}else if("x"===t){if("center"===i)k=(e.top+e.bottom)/2+p;else if(he(i)){const ve=Object.keys(i)[0];k=this.chart.scales[ve].getPixelForValue(i[ve])+p}T=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)R=(e.left+e.right)/2-p;else if(he(i)){const ve=Object.keys(i)[0];R=this.chart.scales[ve].getPixelForValue(i[ve])}T=this._getYAxisLabelAlignment(f).textAlign}"y"===t&&("start"===c?C="top":"end"===c&&(C="bottom"));const rt=this._getLabelSizes();for(I=0,E=a.length;I<E;++I){S=a[I],P=S.label;const ve=s.setContext(this.getContext(I));b=this.getPixelForTick(I)+s.labelOffset,D=this._resolveTickFontOptions(I),x=D.lineHeight,A=ze(P)?P.length:1;const Ue=A/2,Ne=ve.color,Lt=ve.textStrokeColor,Et=ve.textStrokeWidth;let tc,oi=T;if(o?(R=b,"inner"===T&&(oi=I===E-1?this.options.reverse?"left":"right":0===I?this.options.reverse?"right":"left":"center"),M="top"===i?"near"===l||0!==y?-A*x+x/2:"center"===l?-rt.highest.height/2-Ue*x+x:x/2-rt.highest.height:"near"===l||0!==y?x/2:"center"===l?rt.highest.height/2-Ue*x:rt.highest.height-A*x,h&&(M*=-1),0!==y&&!ve.showLabelBackdrop&&(R+=x/2*Math.sin(y))):(k=b,M=(1-A)*x/2),ve.showLabelBackdrop){const cn=Kt(ve.backdropPadding),ut=rt.heights[I],eo=rt.widths[I];let tr=M-cn.top,to=0-cn.left;switch(C){case"middle":tr-=ut/2;break;case"bottom":tr-=ut}switch(T){case"center":to-=eo/2;break;case"right":to-=eo}tc={left:to,top:tr,width:eo+cn.width,height:ut+cn.height,color:ve.backdropColor}}v.push({label:P,font:D,textOffset:M,options:{rotation:y,color:Ne,strokeColor:Lt,strokeWidth:Et,textAlign:oi,textBaseline:C,translation:[R,k],backdrop:tc}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-er(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=e+s,c=this._getLabelSizes().widest.width;let l,u;return"left"===t?i?(u=this.right+s,"near"===r?l="left":"center"===r?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,"near"===r?l="right":"center"===r?(l="center",u-=c/2):(l="left",u=this.left)):"right"===t?i?(u=this.left+s,"near"===r?l="right":"center"===r?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,"near"===r?l="left":"center"===r?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(c,l,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const c=i[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let l,u,h,f;this.isHorizontal()?(l=zs(e,this.left,o)-o/2,u=zs(e,this.right,a)+a/2,h=f=c):(h=zs(e,this.top,o)-o/2,f=zs(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Zf(r,i);const s=this.getLabelItems(e);for(const o of s)Gs(r,o.label,0,o.textOffset,o.font,o.options);i&&ep(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=Ct(r.font),o=Kt(r.padding),a=r.align;let c=s.lineHeight/2;"bottom"===t||"center"===t||he(t)?(c+=o.bottom,ze(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:l,titleY:u,maxWidth:h,rotation:f}=function tX(n,e,t,r){const{top:i,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c;let f,p,m,h=0;const y=o-i,v=a-s;if(n.isHorizontal()){if(p=Wt(r,s,a),he(t)){const I=Object.keys(t)[0];m=u[I].getPixelForValue(t[I])+y-e}else m="center"===t?(l.bottom+l.top)/2+y-e:cO(n,t,e);f=a-s}else{if(he(t)){const I=Object.keys(t)[0];p=u[I].getPixelForValue(t[I])-v+e}else p="center"===t?(l.left+l.right)/2-v+e:cO(n,t,e);m=Wt(r,o,i),h="left"===t?-yt:yt}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}(this,c,t,a);Gs(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:f,textAlign:eX(a,t,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=oe(e.grid&&e.grid.z,-1),i=oe(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Xs.prototype.draw?[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]:[{z:t,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){return Ct(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class lp{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function iX(n){return"id"in n&&"defaults"in n})(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,function nX(n,e,t){const r=tu(Object.create(null),[t?nt.get(t):{},nt.get(e),n.defaults]);nt.set(e,r),n.defaultRoutes&&function rX(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");nt.route(s,i,c,a)})}(e,n.defaultRoutes),n.descriptors&&nt.describe(e,n.descriptors)}(e,o,r),this.override&&nt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in nt[i]&&(delete nt[i][r],this.override&&delete $s[r])}}class sX{constructor(){this.controllers=new lp(Gi,"datasets",!0),this.elements=new lp(ii,"elements"),this.plugins=new lp(Object,"plugins"),this.scales=new lp(Xs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Me(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){const i=dE(e);He(r["before"+i],[],r),t[e](r),He(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Dr=new sX;class oX{constructor(){this._init=[]}notify(e,t,r,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin;if(!1===He(o[r],[t,i,s.options],o)&&i.cancelable)return!1}return!0}invalidate(){be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=oe(r.options&&r.options.plugins,{}),s=function aX(n){const e={},t=[],r=Object.keys(Dr.plugins.items);for(let s=0;s<r.length;s++)t.push(Dr.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];-1===t.indexOf(o)&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}(r);return!1!==i||t?function lX(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const a of e){const c=a.id,l=cX(r[c],i);null!==l&&s.push({plugin:a,options:uX(n.config,{plugin:a,local:t[c]},l,o)})}return s}(e,s,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function cX(n,e){return e||!1!==n?!0===n?{}:n:null}function uX(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function OE(n,e){return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||(nt.datasets[n]||{}).indexAxis||"x"}function hO(n){if("x"===n||"y"===n||"r"===n)return n}function fX(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}function kE(n,...e){if(hO(n))return n;for(const t of e){const r=t.axis||fX(t.position)||n.length>1&&hO(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function fO(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function pO(n){const e=n.options||(n.options={});e.plugins=oe(e.plugins,{}),e.scales=function gX(n,e){const t=$s[n.type]||{scales:{}},r=e.scales||{},i=OE(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!he(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=kE(o,a,function pX(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return fO(n,"x",t[0])||fO(n,"y",t[0])}return{}}(o,n),nt.scales[a.type]),l=function hX(n,e){return n===e?"_index_":"_value_"}(c,i),u=t.scales||{};s[o]=nu(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,c=o.indexAxis||OE(a,e),u=($s[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=function dX(n,e){let t=n;return"_index_"===n?t=e:"_value_"===n&&(t="x"===e?"y":"x"),t}(h,c),p=o[f+"AxisID"]||f;s[p]=s[p]||Object.create(null),nu(s[p],[{axis:f},r[p],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];nu(a,[nt.scales[a.type],nt.scale])}),s}(n,e)}function gO(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const mO=new Map,_O=new Set;function up(n,e){let t=mO.get(n);return t||(t=e(),mO.set(n,t),_O.add(t)),t}const yu=(n,e,t)=>{const r=Hi(e,t);void 0!==r&&n.add(r)};class _X{constructor(e){this._config=function mX(n){return(n=n||{}).data=gO(n.data),pO(n),n}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=gO(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),pO(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return up(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return up(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return up(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return up(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;const c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>yu(c,e,h))),u.forEach(h=>yu(c,i,h)),u.forEach(h=>yu(c,$s[s]||{},h)),u.forEach(h=>yu(c,nt,h)),u.forEach(h=>yu(c,yE,h))});const l=Array.from(c);return 0===l.length&&l.push(Object.create(null)),_O.has(t)&&o.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,$s[t]||{},nt.datasets[t]||{},{type:t},nt,yE]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=yO(this._resolverCache,e,i);let c=o;(function vX(n,e){const{isScriptable:t,isIndexable:r}=yN(n);for(const i of e){const s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(Ui(a)||yX(a))||o&&ze(a))return!0}return!1})(o,t)&&(s.$shared=!1,c=qa(o,r=Ui(r)?r():r,this.createResolver(e,r,a)));for(const l of t)s[l]=c[l];return s}createResolver(e,t,r=[""],i){const{resolver:s}=yO(this._resolverCache,e,r);return he(t)?qa(s,t,void 0,i):s}}function yO(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:wE(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const yX=n=>he(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||Ui(n[t]),!1),EX=["top","bottom","left","right","chartArea"];function vO(n,e){return"top"===n||"bottom"===n||-1===EX.indexOf(n)&&"x"===e}function bO(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function EO(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),He(t&&t.onComplete,[n],e)}function wX(n){const e=n.chart,t=e.options.animation;He(t&&t.onProgress,[n],e)}function wO(n){return CN()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const dp={},IO=n=>{const e=wO(n);return Object.values(dp).filter(t=>t.canvas===e).pop()};function IX(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function hp(n,e,t){return n.options.clip?n[t]:e[t]}let FE=(()=>class n{static defaults=nt;static instances=dp;static overrides=$s;static registry=Dr;static version="4.4.0";static getChart=IO;static register(...t){Dr.add(...t),DO()}static unregister(...t){Dr.remove(...t),DO()}constructor(t,r){const i=this.config=new _X(r),s=wO(t),o=IO(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function UY(n){return!CN()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?AY:HY}(s)),this.platform.updateConfig(i);const c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,h=l&&l.width;this.id=DK(),this.ctx=c,this.canvas=l,this.width=h,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new oX,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function jK(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],dp[this.id]=this,c&&l?(ri.listen(this,"complete",EO),ri.listen(this,"progress",wX),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return be(t)?r&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Dr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xN(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gN(this.canvas,this.ctx),this}stop(){return ri.stop(this),this}resize(t,r){ri.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const i=this.options,a=this.platform.getMaximumSize(this.canvas,t,r,i.maintainAspectRatio&&this.aspectRatio),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,xN(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),He(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){Me(this.options.scales||{},(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,r=t.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{});let o=[];r&&(o=o.concat(Object.keys(r).map(a=>{const c=r[a],l=kE(a,c),u="r"===l,h="x"===l;return{options:c,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Me(o,a=>{const c=a.options,l=c.id,u=kE(l,c),h=oe(c.type,a.dtype);(void 0===c.position||vO(c.position,u)!==vO(a.dposition))&&(c.position=a.dposition),s[l]=!0;let f=null;l in i&&i[l].type===h?f=i[l]:(f=new(Dr.getScale(h))({id:l,type:h,ctx:this.ctx,chart:this}),i[f.id]=f),f.init(c,t)}),Me(s,(a,c)=>{a||delete i[c]}),Me(i,a=>{Qt.configure(this,a,a.options),Qt.addBox(this,a)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(bO("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,s)=>{0===r.filter(o=>o===i._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){const o=r[i];let a=this.getDatasetMeta(i);const c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=o.indexAxis||OE(c,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const l=Dr.getController(c),{datasetElementType:u,dataElementType:h}=nt.datasets[c];Object.assign(l,{dataElementType:Dr.getElement(h),datasetElementType:u&&Dr.getElement(u)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Me(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:f}=this.getDatasetMeta(u),p=!s&&-1===o.indexOf(f);f.buildOrUpdateElements(p),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||Me(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(bO("z","_idx"));const{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Me(this.scales,t=>{Qt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!X1(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of r)IX(t,s,"_removeElements"===i?-o:o)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,i=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!X1(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Qt.update(this,this.width,this.height,t);const r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],Me(this.boxes,s=>{i&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Ui(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:r,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ri.has(this)?this.attached&&!ri.running(this)&&ri.start(this):(this.draw(),EO({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,i=[];let s,o;for(s=0,o=r.length;s<o;++s){const a=r[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,i=t._clip,s=!i.disabled,o=function TX(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:hp(t,e,"left"),right:hp(t,e,"right"),top:hp(r,e,"top"),bottom:hp(r,e,"bottom")}:e}(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(s&&Zf(r,{left:!1===i.left?0:o.left-i.left,right:!1===i.right?this.width:o.right+i.right,top:!1===i.top?0:o.top-i.top,bottom:!1===i.bottom?this.height:o.bottom+i.bottom}),t.controller.draw(),s&&ep(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return ni(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,s){const o=EY.modes[r];return"function"==typeof o?o(this,t,i,s):[]}getDatasetMeta(t){const r=this.data.datasets[t],i=this._metasets;let s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=zi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!r.hidden}setDatasetVisibility(t,r){this.getDatasetMeta(t).hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){const s=i?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);ru(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(o,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),ri.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),gN(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete dp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};Me(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,i=(l,u)=>{r.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(r.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)};let a;const c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){Me(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Me(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){const s=i?"set":"remove";let o,a,c,l;for("dataset"===r&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],i=t.map(({datasetIndex:o,index:a})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!Wf(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter(r=>r.plugin.id===t).length}_updateHoverStyles(t,r,i){const s=this.options.hover,o=(l,u)=>l.filter(h=>!u.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),a=o(r,t),c=i?t:o(t,r);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,r){const i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const o=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,r,i){const{_active:s=[],options:o}=this,c=this._getActiveElements(t,s,i,r),l=function MK(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(t),u=function DX(n,e,t,r){return t&&"mouseout"!==n.type?r?e:n:null}(t,this._lastEvent,i,l);i&&(this._lastEvent=null,He(o.onHover,[t,c,this],this),l&&He(o.onClick,[t,c,this],this));const h=!Wf(c,s);return(h||r)&&(this._active=c,this._updateHoverStyles(c,s,r)),this._lastEvent=u,h}_getActiveElements(t,r,i,s){if("mouseout"===t.type)return[];if(!i)return r;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}})();function DO(){return Me(FE.instances,n=>n._plugins.invalidate())}function Qa(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function fp(n,e,t,r,i,s){const{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+r+t-l,0),f=u>0?u+r+t+l:0;let p=0;const m=i-c;if(r){const Ne=((u>0?u-r:0)+(h>0?h-r:0))/2;p=(m-(0!==Ne?m*Ne/(Ne+r):m))/2}const v=(m-Math.max(.001,m*h-t/Ge)/h)/2,I=c+v+p,E=i-v-p,{outerStart:S,outerEnd:P,innerStart:R,innerEnd:k}=function SX(n,e,t,r){const i=function xX(n){return EE(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),a=c=>{const l=(t-Math.min(s,c))*r/2;return Mt(c,0,Math.min(s,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Mt(i.innerStart,0,o),innerEnd:Mt(i.innerEnd,0,o)}}(e,f,h,E-I),T=h-S,b=h-P,D=I+S/T,x=E-P/b,A=f+R,M=f+k,C=I+R/A,rt=E-k/M;if(n.beginPath(),s){const ve=(D+x)/2;if(n.arc(o,a,h,D,ve),n.arc(o,a,h,ve,x),P>0){const Et=Qa(b,x,o,a);n.arc(Et.x,Et.y,P,x,E+yt)}const Ue=Qa(M,E,o,a);if(n.lineTo(Ue.x,Ue.y),k>0){const Et=Qa(M,rt,o,a);n.arc(Et.x,Et.y,k,E+yt,rt+Math.PI)}const Ne=(E-k/f+(I+R/f))/2;if(n.arc(o,a,f,E-k/f,Ne,!0),n.arc(o,a,f,Ne,I+R/f,!0),R>0){const Et=Qa(A,C,o,a);n.arc(Et.x,Et.y,R,C+Math.PI,I-yt)}const Lt=Qa(T,I,o,a);if(n.lineTo(Lt.x,Lt.y),S>0){const Et=Qa(T,D,o,a);n.arc(Et.x,Et.y,S,I-yt,D)}}else{n.moveTo(o,a);const ve=Math.cos(D)*h+o,Ue=Math.sin(D)*h+a;n.lineTo(ve,Ue);const Ne=Math.cos(x)*h+o,Lt=Math.sin(x)*h+a;n.lineTo(Ne,Lt)}n.closePath()}function TO(n,e,t=e){n.lineCap=oe(t.borderCapStyle,e.borderCapStyle),n.setLineDash(oe(t.borderDash,e.borderDash)),n.lineDashOffset=oe(t.borderDashOffset,e.borderDashOffset),n.lineJoin=oe(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=oe(t.borderWidth,e.borderWidth),n.strokeStyle=oe(t.borderColor,e.borderColor)}function RX(n,e,t){n.lineTo(t.x,t.y)}function CO(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,c=Math.max(i,o),l=Math.min(s,a);return{count:r,start:c,loop:e.loop,ilen:l<c&&!(i<o&&s<o||i>a&&s>a)?r+l-c:l-c}}function OX(n,e,t,r){const{points:i,options:s}=e,{count:o,start:a,loop:c,ilen:l}=CO(i,t,r),u=function NX(n){return n.stepped?JK:n.tension||"monotone"===n.cubicInterpolationMode?ZK:RX}(s);let p,m,y,{move:h=!0,reverse:f}=r||{};for(p=0;p<=l;++p)m=i[(a+(f?l-p:p))%o],!m.skip&&(h?(n.moveTo(m.x,m.y),h=!1):u(n,y,m,f,s.stepped),y=m);return c&&(m=i[(a+(f?l:0))%o],u(n,y,m,f,s.stepped)),!!c}function kX(n,e,t,r){const i=e.points,{count:s,start:o,ilen:a}=CO(i,t,r),{move:c=!0,reverse:l}=r||{};let f,p,m,y,v,I,u=0,h=0;const E=P=>(o+(l?a-P:P))%s,S=()=>{y!==v&&(n.lineTo(u,v),n.lineTo(u,y),n.lineTo(u,I))};for(c&&(p=i[E(0)],n.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[E(f)],p.skip)continue;const P=p.x,R=p.y,k=0|P;k===m?(R<y?y=R:R>v&&(v=R),u=(h*u+P)/++h):(S(),n.lineTo(P,R),m=k,h=0,y=v=R),I=R}S()}function VE(n){const e=n.options;return n._decimated||n._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?OX:kX}const BX="function"==typeof Path2D;let pp=(()=>class n extends ii{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const i=this.options;!i.tension&&"monotone"!==i.cubicInterpolationMode||i.stepped||this._pointsUpdated||(IQ(this._points,i,t,i.spanGaps?this._loop:this._fullLoop,r),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function LQ(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:a}=function FQ(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}(t,i,s,r);return function kN(n,e,t,r){return r&&r.setContext&&t?function BQ(n,e,t,r){const i=n._chart.getContext(),s=FN(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[];let u=s,h=e[0].start,f=h;function p(m,y,v,I){const E=a?-1:1;if(m!==y){for(m+=c;t[m%c].skip;)m-=E;for(;t[y%c].skip;)y+=E;m%c!=y%c&&(l.push({start:m%c,end:y%c,loop:v,style:I}),u=I,h=y%c)}}for(const m of e){h=a?h:m.start;let v,y=t[h%c];for(f=h+1;f<=m.end;f++){const I=t[f%c];v=FN(r.setContext(zi(i,{type:"segment",p0:y,p1:I,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),jQ(v,u)&&p(h,f-1,m.loop,u),y=I,u=v}h<f-1&&p(h,f-1,m.loop,u)}return l}(n,e,t,r):e}(n,!0===r?[{start:o,end:a,loop:s}]:function VQ(n,e,t,r){const i=n.length,s=[];let c,o=e,a=n[e];for(c=e+1;c<=t;++c){const l=n[c%i];l.skip||l.stop?a.skip||(s.push({start:e%i,end:(c-1)%i,loop:r=!1}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return null!==o&&s.push({start:e%i,end:o%i,loop:r}),s}(t,o,a<o?a+i:a,!!n._fullLoop&&0===o&&a===i-1),t,e)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,i=t.length;return i&&this.points[t[i-1].end]}interpolate(t,r){const i=this.options,s=t[r],o=this.points,a=ON(this,{property:r,start:s,end:s});if(!a.length)return;const c=[],l=function FX(n){return n.stepped?PQ:n.tension||"monotone"===n.cubicInterpolationMode?RQ:Qs}(i);let u,h;for(u=0,h=a.length;u<h;++u){const{start:f,end:p}=a[u],m=o[f],y=o[p];if(m===y){c.push(m);continue}const I=l(m,y,Math.abs((s-m[r])/(y[r]-m[r])),i.stepped);I[r]=t[r],c.push(I)}return 1===c.length?c[0]:c}pathSegment(t,r,i){return VE(this)(t,this,r,i)}path(t,r,i){const s=this.segments,o=VE(this);let a=this._loop;r=r||0,i=i||this.points.length-r;for(const c of s)a&=o(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function jX(n,e,t,r){BX&&!e.options.segment?function VX(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),TO(n,e.options),n.stroke(i)}(n,e,t,r):function LX(n,e,t,r){const{segments:i,options:s}=e,o=VE(e);for(const a of i)TO(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}(n,e,t,r)}(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}})();function xO(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}let HX=(()=>class n extends ii{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return xO(this,t,"x",r)}inYRange(t,r){return xO(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){let r=(t=t||this.options||{}).radius||0;return r=Math.max(r,r&&t.hoverRadius||0),2*(r+(r&&t.borderWidth||0))}draw(t,r){const i=this.options;this.skip||i.radius<.1||!ni(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,bE(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}})();function SO(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let a,c,l,u,h;return n.horizontal?(h=o/2,a=Math.min(t,i),c=Math.max(t,i),l=r-h,u=r+h):(h=s/2,a=t-h,c=t+h,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function qi(n,e,t,r){return n?0:Mt(e,t,r)}function LE(n,e,t,r){const i=null===e,s=null===t,a=n&&!(i&&s)&&SO(n,r);return a&&(i||ei(e,a.left,a.right))&&(s||ei(t,a.top,a.bottom))}function qX(n,e){n.rect(e.x,e.y,e.w,e.h)}function BE(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0;return{x:n.x+r,y:n.y+i,w:n.w+((n.x+n.w!==t.x+t.w?e:0)-r),h:n.h+((n.y+n.h!==t.y+t.h?e:0)-i),radius:n.radius}}var KX=Object.freeze({__proto__:null,ArcElement:class PX extends ii{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.getProps(["x","y"],r),{angle:s,distance:o}=nN(i,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,m=oe(h,c-a)>=qe||su(s,a,c),y=ei(o,l+f,u+f);return m&&y}getCenterPoint(e){const{x:t,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,u=(i+s)/2,h=(o+a+l+c)/2;return{x:t+Math.cos(u)*h,y:r+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>qe?Math.floor(r/qe):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const l=i*(1-Math.sin(Math.min(Ge,r||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function AX(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let c=e.endAngle;if(s){fp(n,e,t,r,c,i);for(let l=0;l<s;++l)n.fill();isNaN(a)||(c=o+(a%qe||qe))}fp(n,e,t,r,c,i),n.fill()}(e,this,l,s,o),function MX(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=c,p="inner"===c.borderAlign;if(!l)return;n.setLineDash(h||[]),n.lineDashOffset=f,p?(n.lineWidth=2*l,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let m=e.endAngle;if(s){fp(n,e,t,r,m,i);for(let y=0;y<s;++y)n.stroke();isNaN(a)||(m=o+(a%qe||qe))}p&&function CX(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:c}=e;let l=i/a;n.beginPath(),n.arc(s,o,a,r-l,t+l),c>i?(l=i/c,n.arc(s,o,c,t+l,r-l,!0)):n.arc(s,o,i,t+yt,r-yt),n.closePath(),n.clip()}(n,e,m),s||(fp(n,e,t,r,m,i),n.stroke())}(e,this,l,s,o),e.restore()}},BarElement:class WX extends ii{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=function zX(n){const e=SO(n),t=e.right-e.left,r=e.bottom-e.top,i=function UX(n,e,t){const i=n.borderSkipped,s=_N(n.options.borderWidth);return{t:qi(i.top,s.top,0,t),r:qi(i.right,s.right,0,e),b:qi(i.bottom,s.bottom,0,t),l:qi(i.left,s.left,0,e)}}(n,t/2,r/2),s=function $X(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=qs(i),o=Math.min(e,t),a=n.borderSkipped,c=r||he(i);return{topLeft:qi(!c||a.top||a.left,s.topLeft,0,o),topRight:qi(!c||a.top||a.right,s.topRight,0,o),bottomLeft:qi(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:qi(!c||a.bottom||a.right,s.bottomRight,0,o)}}(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}(this),a=function GX(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?lu:qX;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,BE(o,t,s)),e.clip(),a(e,BE(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,BE(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return LE(this,e,t,r)}inXRange(e,t){return LE(this,e,null,t)}inYRange(e,t){return LE(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},LineElement:pp,PointElement:HX});const jE=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],AO=jE.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function MO(n){return jE[n%jE.length]}function PO(n){return AO[n%AO.length]}function RO(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}var eJ={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=n.config,{elements:s}=i;if(!t.forceOverride&&(RO(r)||function ZX(n){return n&&(n.borderColor||n.backgroundColor)}(i)||s&&RO(s)))return;const o=function JX(n){let e=0;return(t,r)=>{const i=n.getDatasetMeta(r).controller;i instanceof AE?e=function YX(n,e){return n.backgroundColor=n.data.map(()=>MO(e++)),e}(t,e):i instanceof YN?e=function XX(n,e){return n.backgroundColor=n.data.map(()=>PO(e++)),e}(t,e):i&&(e=function QX(n,e){return n.borderColor=MO(e),n.backgroundColor=PO(e),++e}(t,e))}}(n);r.forEach(o)}};function NO(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function OO(n){n.data.datasets.forEach(e=>{NO(e)})}var iJ={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled)return void OO(n);const r=n.width;n.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,c=n.getDatasetMeta(s),l=o||i.data;if("y"===uu([a,n.options.indexAxis])||!c.controller.supportsDecimation)return;const u=n.scales[c.xAxisID];if("linear"!==u.type&&"time"!==u.type||n.options.parsing)return;let m,{start:h,count:f}=function rJ(n,e){const t=e.length;let i,r=0;const{iScale:s}=n,{min:o,max:a,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(r=Mt(ti(e,s.axis,o).lo,0,t-1)),i=l?Mt(ti(e,s.axis,a).hi+1,r,t)-r:t-r,{start:r,count:i}}(c,l);if(f<=(t.threshold||4*r))NO(i);else{switch(be(o)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}})),t.algorithm){case"lttb":m=function tJ(n,e,t,r,i){const s=i.samples||r;if(s>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(s-2);let c=0;const l=e+t-1;let h,f,p,m,y,u=e;for(o[c++]=n[u],h=0;h<s-2;h++){let E,v=0,I=0;const S=Math.floor((h+1)*a)+1+e,P=Math.min(Math.floor((h+2)*a)+1,t)+e,R=P-S;for(E=S;E<P;E++)v+=n[E].x,I+=n[E].y;v/=R,I/=R;const k=Math.floor(h*a)+1+e,T=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:b,y:D}=n[u];for(p=m=-1,E=k;E<T;E++)m=.5*Math.abs((b-v)*(n[E].y-D)-(b-n[E].x)*(I-D)),m>p&&(p=m,f=n[E],y=E);o[c++]=f,u=y}return o[c++]=n[l],o}(l,h,f,r,t);break;case"min-max":m=function nJ(n,e,t,r){let o,a,c,l,u,h,f,p,m,y,i=0,s=0;const v=[],E=n[e].x,P=n[e+t-1].x-E;for(o=e;o<e+t;++o){a=n[o],c=(a.x-E)/P*r,l=a.y;const R=0|c;if(R===u)l<m?(m=l,h=o):l>y&&(y=l,f=o),i=(s*i+a.x)/++s;else{const k=o-1;if(!be(h)&&!be(f)){const T=Math.min(h,f),b=Math.max(h,f);T!==p&&T!==k&&v.push({...n[T],x:i}),b!==p&&b!==k&&v.push({...n[b],x:i})}o>0&&k!==p&&v.push(n[k]),v.push(a),u=R,s=0,m=y=l,h=f=p=o}}return v}(l,h,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=m}})},destroy(n){OO(n)}};function HE(n,e,t,r){if(r)return;let i=e[n],s=t[n];return"angle"===n&&(i=Rn(i),s=Rn(s)),{property:n,start:i,end:s}}function UE(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function kO(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function FO(n,e){let t=[],r=!1;return ze(n)?(r=!0,t=n):t=function oJ(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=UE(o,a,i);const c=i[o],l=i[a];null!==r?(s.push({x:c.x,y:r}),s.push({x:l.x,y:r})):null!==t&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}(n,e),t.length?new pp({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function VO(n){return n&&!1!==n.fill}function aJ(n,e,t){let i=n[e].fill;const s=[e];let o;if(!t)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!lt(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function cJ(n,e,t){const r=function hJ(n){const e=n.options,t=e.fill;let r=oe(t&&t.target,t);return void 0===r&&(r=!!e.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(n);if(he(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return lt(i)&&Math.floor(i)===i?function lJ(n,e,t,r){return("-"===n||"+"===n)&&(t=e+t),!(t===e||t<0||t>=r)&&t}(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function gJ(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:o,last:a,point:c}=mJ(s,e,"x");if(!(!c||o&&a))if(o)r.unshift(c);else if(n.push(c),!a)break}n.push(...r)}function mJ(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,o=n.points;let a=!1,c=!1;for(let l=0;l<s.length;l++){const u=s[l],h=o[u.start][t],f=o[u.end][t];if(ei(i,h,f)){a=i===h,c=i===f;break}}return{first:a,last:c,point:r}}class LO{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:o}=this;return e.arc(i,s,o,(t=t||{start:0,end:qe}).end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function $E(n,e,t){const r=function _J(n){const{chart:e,fill:t,line:r}=n;if(lt(t))return function yJ(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}(e,t);if("stack"===t)return function fJ(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,a=function pJ(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}(e,t);a.push(FO({x:null,y:e.bottom},r));for(let c=0;c<s.length;c++){const l=s[c];for(let u=l.start;u<=l.end;u++)gJ(i,o[u],a)}return new pp({points:i,options:{}})}(n);if("shape"===t)return!0;const i=function vJ(n){return(n.scale||{}).getPointPositionForValue?function EJ(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=function dJ(n,e,t){let r;return r="start"===n?t:"end"===n?e.options.reverse?e.min:e.max:he(n)?n.value:e.getBaseValue(),r}(t,e,s),a=[];if(r.grid.circular){const c=e.getPointPositionForValue(0,s);return new LO({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,o));return a}(n):function bJ(n){const{scale:e={},fill:t}=n,r=function uJ(n,e){let t=null;return"start"===n?t=e.bottom:"end"===n?t=e.top:he(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}(t,e);if(lt(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}(n)}(n);return i instanceof LO?i:FO(i,r)}(e),{line:i,scale:s,axis:o}=e,a=i.options,c=a.fill,l=a.backgroundColor,{above:u=l,below:h=l}=c||{};r&&i.points.length&&(Zf(n,t),function wJ(n,e){const{line:t,target:r,above:i,below:s,area:o,scale:a}=e,c=t._loop?"angle":e.axis;n.save(),"x"===c&&s!==i&&(BO(n,r,o.top),jO(n,{line:t,target:r,color:i,scale:a,property:c}),n.restore(),n.save(),BO(n,r,o.bottom)),jO(n,{line:t,target:r,color:s,scale:a,property:c}),n.restore()}(n,{line:i,target:r,above:u,below:h,area:t,scale:s,axis:o}),ep(n))}function BO(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const a of r){const{start:c,end:l}=a,u=i[c],h=i[UE(c,l,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function jO(n,e){const{line:t,target:r,property:i,color:s,scale:o}=e,a=function sJ(n,e,t){const r=n.segments,i=n.points,s=e.points,o=[];for(const a of r){let{start:c,end:l}=a;l=UE(c,l,i);const u=HE(t,i[c],i[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[c],end:i[l]});continue}const h=ON(e,u);for(const f of h){const p=HE(t,s[f.start],s[f.end],f.loop),m=NN(a,i,p);for(const y of m)o.push({source:y,target:f,start:{[t]:kO(u,p,"start",Math.max)},end:{[t]:kO(u,p,"end",Math.min)}})}}return o}(t,r,i);for(const{source:c,target:l,start:u,end:h}of a){const{style:{backgroundColor:f=s}={}}=c,p=!0!==r;n.save(),n.fillStyle=f,IJ(n,o,p&&HE(i,u,h)),n.beginPath();const m=!!t.pathSegment(n,c);let y;if(p){m?n.closePath():HO(n,r,h,i);const v=!!r.pathSegment(n,l,{move:m,reverse:!0});y=m&&v,y||HO(n,r,u,i)}n.closePath(),n.fill(y?"evenodd":"nonzero"),n.restore()}}function IJ(n,e,t){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};"x"===s&&(n.beginPath(),n.rect(o,r,a-o,i-r),n.clip())}function HO(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var DJ={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,o,a,c;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof pp&&(c={visible:n.isDatasetVisible(o),index:o,fill:cJ(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,i.push(c);for(o=0;o<r;++o)c=i[o],c&&!1!==c.fill&&(c.fill=aJ(i,o,t.propagate))},beforeDraw(n,e,t){const r="beforeDraw"===t.drawTime,i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&$E(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if("beforeDatasetsDraw"!==t.drawTime)return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;VO(s)&&$E(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!VO(r)||"beforeDatasetDraw"!==t.drawTime||$E(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const UO=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}};class $O extends ii{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=He(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,i=Ct(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=UO(r,s);let l,u;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a;let h=e;s.textAlign="left",s.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,y)=>{const v=r+t/2+s.measureText(m.text).width;(0===y||l[l.length-1]+v+2*a>o)&&(h+=u,l[l.length-(y>0?0:1)]=0,p+=u,f++),c[y]={left:0,top:p,row:f,width:v,height:i},l[l.length-1]+=v+a}),h}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e;let h=a,f=0,p=0,m=0,y=0;return this.legendItems.forEach((v,I)=>{const{itemWidth:E,itemHeight:S}=function CJ(n,e,t,r,i){const s=function xJ(n,e,t,r){let i=n.text;return i&&"string"!=typeof i&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}(r,n,e,t),o=function SJ(n,e,t){let r=n;return"string"!=typeof e.text&&(r=zO(e,t)),r}(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}(r,t,s,v,i);I>0&&p+S+2*a>u&&(h+=f+a,l.push({width:f,height:p}),m+=f+a,y++,f=p=0),c[I]={left:m,top:p,col:y,width:E,height:S},f=Math.max(f,E),p+=S+a}),h+=f,l.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Ka(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=Wt(r,this.left+i,this.right-this.lineWidths[a]);for(const l of t)a!==l.row&&(a=l.row,c=Wt(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+i}else{let a=0,c=Wt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const l of t)l.col!==a&&(a=l.col,c=Wt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Zf(e,this),this._draw(),ep(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=nt.color,c=Ka(e.rtl,this.left,this.width),l=Ct(o.font),{padding:u}=o,h=l.size,f=h/2;let p;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:m,boxHeight:y,itemHeight:v}=UO(o,h),S=this.isHorizontal(),P=this._computeTitleHeight();p=S?{x:Wt(s,this.left+u,this.right-r[0]),y:this.top+u+P,line:0}:{x:this.left+u,y:Wt(s,this.top+P+u,this.bottom-t[0].height),line:0},AN(this.ctx,e.textDirection);const R=v+u;this.legendItems.forEach((k,T)=>{i.strokeStyle=k.fontColor,i.fillStyle=k.fontColor;const b=i.measureText(k.text).width,D=c.textAlign(k.textAlign||(k.textAlign=o.textAlign)),x=m+f+b;let A=p.x,M=p.y;c.setWidth(this.width),S?T>0&&A+x+u>this.right&&(M=p.y+=R,p.line++,A=p.x=Wt(s,this.left+u,this.right-r[p.line])):T>0&&M+R>this.bottom&&(A=p.x=A+t[p.line].width+u,p.line++,M=p.y=Wt(s,this.top+P+u,this.bottom-t[p.line].height)),function(k,T,b){if(isNaN(m)||m<=0||isNaN(y)||y<0)return;i.save();const D=oe(b.lineWidth,1);if(i.fillStyle=oe(b.fillStyle,a),i.lineCap=oe(b.lineCap,"butt"),i.lineDashOffset=oe(b.lineDashOffset,0),i.lineJoin=oe(b.lineJoin,"miter"),i.lineWidth=D,i.strokeStyle=oe(b.strokeStyle,a),i.setLineDash(oe(b.lineDash,[])),o.usePointStyle){const x={radius:y*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:D},A=c.xPlus(k,m/2);mN(i,x,A,T+f,o.pointStyleWidth&&m)}else{const x=T+Math.max((h-y)/2,0),A=c.leftForLtr(k,m),M=qs(b.borderRadius);i.beginPath(),Object.values(M).some(C=>0!==C)?lu(i,{x:A,y:x,w:m,h:y,radius:M}):i.rect(A,x,m,y),i.fill(),0!==D&&i.stroke()}i.restore()}(c.x(A),M,k),A=((n,e,t,r)=>n===(r?"left":"right")?t:"center"===n?(e+t)/2:e)(D,A+m+f,S?A+x:this.right,e.rtl),function(k,T,b){Gs(i,b.text,k,T+v/2,l,{strikethrough:b.hidden,textAlign:c.textAlign(b.textAlign)})}(c.x(A),M,k),S?p.x+=x+u:p.y+="string"!=typeof k.text?zO(k,l.lineHeight)+u:R}),MN(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Ct(t.font),i=Kt(t.padding);if(!t.display)return;const s=Ka(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.top+r.size/2;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+l,h=Wt(e.align,h,this.right-f);else{const m=this.columnSizes.reduce((y,v)=>Math.max(y,v.height),0);u=l+Wt(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=Wt(a,h,h+f);o.textAlign=s.textAlign(gE(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Gs(o,t.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,t=Ct(e.font),r=Kt(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(ei(e,this.left,this.right)&&ei(t,this.top,this.bottom))for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ei(e,i.left,i.left+i.width)&&ei(t,i.top,i.top+i.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function AJ(n,e){return!(("mousemove"!==n&&"mouseout"!==n||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==n&&"mouseup"!==n))}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,s=((n,e)=>null!==n&&null!==e&&n.datasetIndex===e.datasetIndex&&n.index===e.index)(i,r);i&&!s&&He(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&He(t.onHover,[e,r,this],this)}else r&&He(t.onClick,[e,r,this],this)}}function zO(n,e){return e*(n.text?n.text.length:0)}var MJ={id:"legend",_element:$O,start(n,e,t){const r=n.legend=new $O({ctx:n.ctx,options:t,chart:n});Qt.configure(n,r,t),Qt.addBox(n,r)},stop(n){Qt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;Qt.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const l=c.controller.getStyle(t?0:void 0),u=Kt(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class zE extends ii{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=ze(r.text)?r.text.length:1;this._padding=Kt(r.padding);const s=i*Ct(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l,u,h,c=0;return this.isHorizontal()?(u=Wt(a,r,s),h=t+e,l=s-r):("left"===o.position?(u=r+e,h=Wt(a,i,t),c=-.5*Ge):(u=s-e,h=Wt(a,t,i),c=.5*Ge),l=i-t),{titleX:u,titleY:h,maxWidth:l,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Ct(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);Gs(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:l,textAlign:gE(t.align),textBaseline:"middle",translation:[o,a]})}}var RJ={id:"title",_element:zE,start(n,e,t){!function PJ(n,e){const t=new zE({ctx:n.ctx,options:e,chart:n});Qt.configure(n,t,e),Qt.addBox(n,t),n.titleBlock=t}(n,t)},stop(n){Qt.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;Qt.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gp=new WeakMap;var NJ={id:"subtitle",start(n,e,t){const r=new zE({ctx:n.ctx,options:t,chart:n});Qt.configure(n,r,t),Qt.addBox(n,r),gp.set(n,r)},stop(n){Qt.removeBox(n,gp.get(n)),gp.delete(n)},beforeUpdate(n,e,t){const r=gp.get(n);Qt.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vu={average(n){if(!n.length)return!1;let e,t,r=0,i=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(n,e){if(!n.length)return!1;let s,o,a,t=e.x,r=e.y,i=Number.POSITIVE_INFINITY;for(s=0,o=n.length;s<o;++s){const c=n[s].element;if(c&&c.hasValue()){const u=fE(e,c.getCenterPoint());u<i&&(i=u,a=c)}}if(a){const c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function Tr(n,e){return e&&(ze(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function si(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function OJ(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function GO(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=Ct(e.bodyFont),l=Ct(e.titleFont),u=Ct(e.footerFont),h=s.length,f=i.length,p=r.length,m=Kt(e.padding);let y=m.height,v=0,I=r.reduce((P,R)=>P+R.before.length+R.lines.length+R.after.length,0);I+=n.beforeBody.length+n.afterBody.length,h&&(y+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),I&&(y+=p*(e.displayColors?Math.max(a,c.lineHeight):c.lineHeight)+(I-p)*c.lineHeight+(I-1)*e.bodySpacing),f&&(y+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let E=0;const S=function(P){v=Math.max(v,t.measureText(P).width+E)};return t.save(),t.font=l.string,Me(n.title,S),t.font=c.string,Me(n.beforeBody.concat(n.afterBody),S),E=e.displayColors?o+2+e.boxPadding:0,Me(r,P=>{Me(P.before,S),Me(P.lines,S),Me(P.after,S)}),E=0,t.font=u.string,Me(n.footer,S),t.restore(),v+=m.width,{width:v,height:y}}function VJ(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n;let l="center";return"center"===r?l=i<=(a+c)/2?"left":"right":i<=s/2?l="left":i>=o-s/2&&(l="right"),function FJ(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if("left"===n&&i+s+o>e.width||"right"===n&&i-s-o<0)return!0}(l,n,e,t)&&(l="center"),l}function qO(n,e,t){const r=t.yAlign||e.yAlign||function kJ(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}(n,t);return{xAlign:t.xAlign||e.xAlign||VJ(n,e,t,r),yAlign:r}}function WO(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=i+s,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=qs(o);let m=function LJ(n,e){let{x:t,width:r}=n;return"right"===e?t-=r:"center"===e&&(t-=r/2),t}(e,a);const y=function BJ(n,e,t){let{y:r,height:i}=n;return"top"===e?r+=t:r-="bottom"===e?i+t:i/2,r}(e,c,l);return"center"===c?"left"===a?m+=l:"right"===a&&(m-=l):"left"===a?m-=Math.max(u,f)+i:"right"===a&&(m+=Math.max(h,p)+i),{x:Mt(m,0,r.width-e.width),y:Mt(y,0,r.height-e.height)}}function mp(n,e,t){const r=Kt(t.padding);return"center"===e?n.x+n.width/2:"right"===e?n.x+n.width-r.right:n.x+r.left}function KO(n){return Tr([],si(n))}function QO(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const YO={beforeTitle:Zr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Zr,beforeBody:Zr,beforeLabel:Zr,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return be(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Zr,afterBody:Zr,beforeFooter:Zr,footer:Zr,afterFooter:Zr};function En(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?YO[e].call(t,r):i}let XO=(()=>class n extends ii{static positioners=vu;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new LN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function jJ(n,e,t){return zi(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:i}=r,s=En(i,"beforeTitle",this,t),o=En(i,"title",this,t),a=En(i,"afterTitle",this,t);let c=[];return c=Tr(c,si(s)),c=Tr(c,si(o)),c=Tr(c,si(a)),c}getBeforeBody(t,r){return KO(En(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:i}=r,s=[];return Me(t,o=>{const a={before:[],lines:[],after:[]},c=QO(i,o);Tr(a.before,si(En(c,"beforeLabel",this,o))),Tr(a.lines,En(c,"label",this,o)),Tr(a.after,si(En(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,r){return KO(En(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:i}=r,s=En(i,"beforeFooter",this,t),o=En(i,"footer",this,t),a=En(i,"afterFooter",this,t);let c=[];return c=Tr(c,si(s)),c=Tr(c,si(o)),c=Tr(c,si(a)),c}_createItems(t){const r=this._active,i=this.chart.data,s=[],o=[],a=[];let l,u,c=[];for(l=0,u=r.length;l<u;++l)c.push(OJ(this.chart,r[l]));return t.filter&&(c=c.filter((h,f,p)=>t.filter(h,f,p,i))),t.itemSort&&(c=c.sort((h,f)=>t.itemSort(h,f,i))),Me(c,h=>{const f=QO(t.callbacks,h);s.push(En(f,"labelColor",this,h)),o.push(En(f,"labelPointStyle",this,h)),a.push(En(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){const i=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(s.length){const c=vu[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const l=this._size=GO(this,i),u=Object.assign({},c,l),h=qO(this.chart,i,u),f=WO(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,s){const o=this.getCaretPosition(t,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(t,r,i){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:f}=qs(c),{x:p,y:m}=t,{width:y,height:v}=r;let I,E,S,P,R,k;return"center"===o?(R=m+v/2,"left"===s?(I=p,E=I-a,P=R+a,k=R-a):(I=p+y,E=I+a,P=R-a,k=R+a),S=I):(E="left"===s?p+Math.max(l,h)+a:"right"===s?p+y-Math.max(u,f)-a:this.caretX,"top"===o?(P=m,R=P-a,I=E-a,S=E+a):(P=m+v,R=P+a,I=E+a,S=E-a),k=P),{x1:I,x2:E,x3:S,y1:P,y2:R,y3:k}}drawTitle(t,r,i){const s=this.title,o=s.length;let a,c,l;if(o){const u=Ka(i.rtl,this.x,this.width);for(t.x=mp(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=Ct(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,s,o){const a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=o,h=Ct(o.bodyFont),f=mp(this,"left",o),p=s.x(f),y=r.y+(l<h.lineHeight?(h.lineHeight-l)/2:0);if(o.usePointStyle){const v={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},I=s.leftForLtr(p,u)+u/2,E=y+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,bE(t,v,I,E),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,bE(t,v,I,E)}else{t.lineWidth=he(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const v=s.leftForLtr(p,u),I=s.leftForLtr(s.xPlus(p,1),u-2),E=qs(a.borderRadius);Object.values(E).some(S=>0!==S)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,lu(t,{x:v,y,w:u,h:l,radius:E}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),lu(t,{x:I,y:y+1,w:u-2,h:l-2,radius:E}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(v,y,u,l),t.strokeRect(v,y,u,l),t.fillStyle=a.backgroundColor,t.fillRect(I,y+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:h}=i,f=Ct(i.bodyFont);let p=f.lineHeight,m=0;const y=Ka(i.rtl,this.x,this.width),v=function(D){r.fillText(D,y.x(t.x+m),t.y+p/2),t.y+=p+o},I=y.textAlign(a);let E,S,P,R,k,T,b;for(r.textAlign=a,r.textBaseline="middle",r.font=f.string,t.x=mp(this,I,i),r.fillStyle=i.bodyColor,Me(this.beforeBody,v),m=c&&"right"!==I?"center"===a?u/2+h:u+2+h:0,R=0,T=s.length;R<T;++R){for(E=s[R],S=this.labelTextColors[R],r.fillStyle=S,Me(E.before,v),P=E.lines,c&&P.length&&(this._drawColorBox(r,t,R,y,i),p=Math.max(f.lineHeight,l)),k=0,b=P.length;k<b;++k)v(P[k]),p=f.lineHeight;Me(E.after,v)}m=0,p=f.lineHeight,Me(this.afterBody,v),t.y-=o}drawFooter(t,r,i){const s=this.footer,o=s.length;let a,c;if(o){const l=Ka(i.rtl,this.x,this.width);for(t.x=mp(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=Ct(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,s){const{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:h}=i,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:y}=qs(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(c+f,l),"top"===a&&this.drawCaret(t,r,i,s),r.lineTo(c+u-p,l),r.quadraticCurveTo(c+u,l,c+u,l+p),"center"===a&&"right"===o&&this.drawCaret(t,r,i,s),r.lineTo(c+u,l+h-y),r.quadraticCurveTo(c+u,l+h,c+u-y,l+h),"bottom"===a&&this.drawCaret(t,r,i,s),r.lineTo(c+m,l+h),r.quadraticCurveTo(c,l+h,c,l+h-m),"center"===a&&"left"===o&&this.drawCaret(t,r,i,s),r.lineTo(c,l+f),r.quadraticCurveTo(c,l,c+f,l),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const a=vu[t.position].call(this,this._active,this._eventPosition);if(!a)return;const c=this._size=GO(this,t),l=Object.assign({},a,this._size),u=qO(r,t,l),h=WO(t,l,u,r);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=Kt(r.padding);r.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,r),AN(t,r.textDirection),o.y+=a.top,this.drawTitle(o,t,r),this.drawBody(o,t,r),this.drawFooter(o,t,r),MN(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const i=this._active,s=t.map(({datasetIndex:c,index:l})=>{const u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!Wf(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(t,o,r,i),c=this._positionChanged(a,t),l=r||!Wf(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),l}_getActiveElements(t,r,i,s){const o=this.options;if("mouseout"===t.type)return[];if(!s)return r;const a=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(t,r){const{caretX:i,caretY:s,options:o}=this,a=vu[o.position].call(this,t,r);return!1!==a&&(i!==a.x||s!==a.y)}})();var HJ={id:"tooltip",_element:XO,positioners:vu,afterInit(n,e,t){t&&(n.tooltip=new XO({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(!1===n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0}))return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){n.tooltip&&n.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:YO},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},UJ=Object.freeze({__proto__:null,Colors:eJ,Decimation:iJ,Filler:DJ,Legend:MJ,SubTitle:NJ,Title:RJ,Tooltip:HJ});function JO(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}let qJ=(()=>class n extends Xs{static id="category";static defaults={ticks:{callback:JO}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const i=this.getLabels();for(const{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(be(t))return null;const i=this.getLabels();return((n,e)=>null===n?null:Mt(Math.round(n),0,e))(r=isFinite(r)&&i[r]===t?r:function zJ(n,e,t,r){const i=n.indexOf(e);return-1===i?((n,e,t,r)=>("string"==typeof e?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t))(n,e,t,r):i!==n.lastIndexOf(e)?t:i}(i,t,oe(r,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,r=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=0===t&&r===o.length-1?o:o.slice(t,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)s.push({value:a});return s}getLabelForValue(t){return JO.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}})();function ZO(n,e,{horizontal:t,minRotation:r}){const i=er(r),s=(t?Math.sin(i):Math.cos(i))||.001;return Math.min(e/s,.75*e*(""+n).length)}class _p extends Xs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return be(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=c=>i=t?i:c,a=c=>s=r?s:c;if(e){const c=Ir(i),l=Ir(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(i===s){let c=0===s?1:Math.abs(.05*s);a(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let i,{maxTicksLimit:t,stepSize:r}=e;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const o=function WJ(n,e){const t=[],{bounds:i,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:f}=n,p=s||1,m=u-1,{min:y,max:v}=e,I=!be(o),E=!be(a),S=!be(l),P=(v-y)/(h+1);let k,T,b,D,R=Z1((v-y)/m/p)*p;if(R<1e-14&&!I&&!E)return[{value:y},{value:v}];D=Math.ceil(v/R)-Math.floor(y/R),D>m&&(R=Z1(D*R/m/p)*p),be(c)||(k=Math.pow(10,c),R=Math.ceil(R*k)/k),"ticks"===i?(T=Math.floor(y/R)*R,b=Math.ceil(v/R)*R):(T=y,b=v),I&&E&&s&&function OK(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}((a-o)/s,R/1e3)?(D=Math.round(Math.min((a-o)/R,u)),R=(a-o)/D,T=o,b=a):S?(T=I?o:T,b=E?a:b,D=l-1,R=(b-T)/D):(D=(b-T)/R,D=iu(D,Math.round(D),R/1e3)?Math.round(D):Math.ceil(D));const x=Math.max(tN(R),tN(T));k=Math.pow(10,be(c)?x:c),T=Math.round(T*k)/k,b=Math.round(b*k)/k;let A=0;for(I&&(f&&T!==o?(t.push({value:o}),T<o&&A++,iu(Math.round((T+A*R)*k)/k,o,ZO(o,P,n))&&A++):T<o&&A++);A<D;++A){const M=Math.round((T+A*R)*k)/k;if(E&&M>a)break;t.push({value:M})}return E&&f&&b!==a?t.length&&iu(t[t.length-1].value,a,ZO(a,P,n))?t[t.length-1].value=a:t.push({value:a}):(!E||b===a)&&t.push({value:b}),t}({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&eN(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return au(e,this.chart.options.locale,this.options.ticks.format)}}const bu=n=>Math.floor($i(n)),Js=(n,e)=>Math.pow(10,bu(n)+e);function ek(n){return n/Math.pow(10,bu(n))==1}function tk(n,e,t){const r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function GE(n){const e=n.ticks;if(e.display&&n.display){const t=Kt(e.backdropPadding);return oe(e.font&&e.font.size,nt.font.size)+t.height}return 0}function JJ(n,e,t){return t=ze(t)?t:[t],{w:XK(n,e.string,t),h:t.length*e.lineHeight}}function nk(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function eZ(n,e,t,r,i){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,c=0;r.start<e.l?(a=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function tZ(n,e,t){const r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,r+i+o,s),l=Math.round(hE(Rn(c.angle+yt))),u=function oZ(n,e,t){return 90===t||270===t?n-=e/2:(t>270||t<90)&&(n-=e),n}(c.y,a.h,l),h=function iZ(n){return 0===n||180===n?"center":n<180?"left":"right"}(l),f=function sZ(n,e,t){return"right"===t?n-=e:"center"===t&&(n-=e/2),n}(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function nZ(n,e){if(!e)return!0;const{left:t,top:r,right:i,bottom:s}=n;return!(ni({x:t,y:r},e)||ni({x:t,y:s},e)||ni({x:i,y:r},e)||ni({x:i,y:s},e))}function aZ(n,e,t){const{left:r,top:i,right:s,bottom:o}=t,{backdropColor:a}=e;if(!be(a)){const c=qs(e.borderRadius),l=Kt(e.backdropPadding);n.fillStyle=a;const u=r-l.left,h=i-l.top,f=s-r+l.width,p=o-i+l.height;Object.values(c).some(m=>0!==m)?(n.beginPath(),lu(n,{x:u,y:h,w:f,h:p,radius:c}),n.fill()):n.fillRect(u,h,f,p)}}function rk(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,qe);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}const yp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wn=Object.keys(yp);function ik(n,e){return n-e}function sk(n,e){if(be(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return"function"==typeof r&&(o=r(o)),lt(o)||(o="string"==typeof r?t.parse(o,r):t.parse(o)),null===o?null:(i&&(o="week"!==i||!Ga(s)&&!0!==s?t.startOf(o,i):t.startOf(o,"isoWeek",s)),+o)}function ok(n,e,t,r){const i=wn.length;for(let s=wn.indexOf(n);s<i-1;++s){const o=yp[wn[s]];if(o.common&&Math.ceil((t-e)/((o.steps?o.steps:Number.MAX_SAFE_INTEGER)*o.size))<=r)return wn[s]}return wn[i-1]}function ak(n,e,t){if(t){if(t.length){const{lo:r,hi:i}=pE(t,e);n[t[r]>=e?t[r]:t[i]]=!0}}else n[e]=!0}function ck(n,e,t){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&t?function pZ(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,c;for(a=s;a<=o;a=+i.add(a,1,r))c=t[a],c>=0&&(e[c].major=!0);return e}(n,r,i,t):r}let qE=(()=>class n extends Xs{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const i=t.time||(t.time={}),s=this._adapter=new mY__date(t.adapters.date);s.init(r),nu(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return void 0===t?null:sk(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,i=t.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&l(this.getMinMax(!1))),s=lt(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=lt(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){const t=this.options,r=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,c=function LK(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}(s,o,this.max);return this._unit=r.unit||(i.autoSkip?ok(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):function hZ(n,e,t,r,i){for(let s=wn.length-1;s>=wn.indexOf(t);s--){const o=wn[s];if(yp[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return wn[t?wn.indexOf(t):0]}(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function fZ(n){for(let e=wn.indexOf(n)+1,t=wn.length;e<t;++e)if(yp[wn[e]].common)return wn[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&c.reverse(),ck(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s,o,r=0,i=0;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),r=1===t.length?1-s:(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),i=1===t.length?o:(o-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;r=Mt(r,0,a),i=Mt(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||ok(o.minUnit,r,i,this._getLabelCapacity(r)),c=oe(s.ticks.stepSize,1),l="week"===a&&o.isoWeekday,u=Ga(l)||!0===l,h={};let p,m,f=r;if(u&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,u?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);const y="data"===s.ticks.source&&this.getDataTimestamps();for(p=f,m=0;p<i;p=+t.add(p,c,a),m++)ak(h,p,y);return(p===i||"ticks"===s.bounds||1===m)&&ak(h,p,y),Object.keys(h).sort(ik).map(v=>+v)}getLabelForValue(t){const i=this.options.time;return this._adapter.format(t,i.tooltipFormat?i.tooltipFormat:i.displayFormats.datetime)}format(t,r){return this._adapter.format(t,r||this.options.time.displayFormats[this._unit])}_tickFormatFunction(t,r,i,s){const o=this.options,a=o.ticks.callback;if(a)return He(a,[t,r,i],this);const c=o.time.displayFormats,l=this._unit,u=this._majorUnit,f=u&&c[u],p=i[r];return this._adapter.format(t,s||(u&&f&&p&&p.major?f:l&&c[l]))}generateTickLabels(t){let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],s.label=this._tickFormatFunction(s.value,r,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){const r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,i=this.ctx.measureText(t).width,s=er(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*a,h:i*a+c*o}}_getLabelCapacity(t){const r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(t,0,ck(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let r,i,t=this._cache.data||[];if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)t=t.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,i;if(t.length)return t;const s=this.getLabels();for(r=0,i=s.length;r<i;++r)t.push(sk(this,s[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return sN(t.sort(ik))}})();function vp(n,e,t){let s,o,a,c,r=0,i=n.length-1;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=ti(n,"pos",e)),({pos:s,time:a}=n[r]),({pos:o,time:c}=n[i])):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=ti(n,"time",e)),({time:s,pos:a}=n[r]),({time:o,pos:c}=n[i]));const l=o-s;return l?a+(c-a)*(e-s)/l:a}var mZ=Object.freeze({__proto__:null,CategoryScale:qJ,LinearScale:class KJ extends _p{static id="linear";static defaults={ticks:{callback:Xf.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=lt(e)?e:0,this.max=lt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=er(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},LogarithmicScale:class XJ extends Xs{static id="logarithmic";static defaults={ticks:{callback:Xf.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=_p.prototype.parse.apply(this,[e,t]);if(0!==r)return lt(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=lt(e)?Math.max(0,e):null,this.max=lt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!lt(this._userMin)&&(this.min=e===Js(this.min,0)?Js(this.min,-1):Js(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=t?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Js(r,-1)),o(Js(i,1)))),r<=0&&s(Js(i,-1)),i<=0&&o(Js(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,r=function YJ(n,{min:e,max:t}){e=Pn(n.min,e);const r=[],i=bu(e);let s=function QJ(n,e){let r=bu(e-n);for(;tk(n,e,r)>10;)r++;for(;tk(n,e,r)<10;)r--;return Math.min(r,bu(n))}(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),c=i>s?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10;let h=Math.floor((l-u)/Math.pow(10,s)),f=Pn(n.min,Math.round((c+u+h*Math.pow(10,s))*o)/o);for(;f<t;)r.push({value:f,major:ek(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),f=Math.round((c+u+h*Math.pow(10,s))*o)/o;const p=Pn(n.max,f);return r.push({value:p,major:ek(p),significand:h}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&eN(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return void 0===e?"0":au(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=$i(e),this._valueRange=$i(this.max)-$i(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:($i(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}},RadialLinearScale:class dZ extends _p{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Xf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Kt(GE(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=lt(e)&&!isNaN(e)?e:0,this.max=lt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/GE(this.options))}generateTickLabels(e){_p.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=He(this.options.pointLabels.callback,[t,r],this);return i||0===i?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?function ZJ(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Ge/s:0;for(let c=0;c<s;c++){const l=o.setContext(n.getPointLabelContext(c));i[c]=l.padding;const u=n.getPointPosition(c,n.drawingArea+i[c],a),h=Ct(l.font),f=JJ(n.ctx,h,n._pointLabels[c]);r[c]=f;const p=Rn(n.getIndexAngle(c)+a),m=Math.round(hE(p));eZ(t,e,p,nk(m,u.x,f.w,0,180),nk(m,u.y,f.h,90,270))}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=function rZ(n,e,t){const r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:GE(s)/2,additionalAngle:o?Ge/i:0};let l;for(let u=0;u<i;u++){c.padding=t[u],c.size=e[u];const h=tZ(n,u,c);r.push(h),"auto"===a&&(h.visible=nZ(h,l),h.visible&&(l=h))}return r}(n,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){return Rn(e*(qe/(this._pointLabels.length||1))+er(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(be(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(be(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function uZ(n,e,t){return zi(n,{label:t,index:e,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-yt+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),rk(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length;let a,c,l;if(t.pointLabels.display&&function cZ(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const s=n._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(n.getPointLabelContext(i));aZ(t,o,s);const a=Ct(o.font),{x:c,y:l,textAlign:u}=s;Gs(t,n._pointLabels[i],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}(this,o),i.display&&this.ticks.forEach((u,h)=>{if(0!==h){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),p=i.setContext(f),m=s.setContext(f);!function lZ(n,e,t,r,i){const s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!r||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),rk(n,t,o,r),s.closePath(),s.stroke(),s.restore())}(this,p,c,o,m)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(0===c&&!t.reverse)return;const l=r.setContext(this.getContext(c)),u=Ct(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;const h=Kt(l.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Gs(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},TimeScale:qE,TimeSeriesScale:class gZ extends qE{static id="timeseries";static defaults=qE.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=vp(t,this.min),this._tableRange=vp(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=r&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],c=i[o-1],l=i[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||1===r.length)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(vp(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return vp(this._table,r*this._tableRange+this._minPos,!0)}}});const _Z=[gY,KX,UJ,mZ],bp=function bZ(n,e){return n===e||n!=n&&e!=e},Ep=function EZ(n,e){for(var t=n.length;t--;)if(bp(n[t][0],e))return t;return-1};var IZ=Array.prototype.splice;function Ya(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ya.prototype.clear=function yZ(){this.__data__=[],this.size=0},Ya.prototype.delete=function DZ(n){var e=this.__data__,t=Ep(e,n);return!(t<0||(t==e.length-1?e.pop():IZ.call(e,t,1),--this.size,0))},Ya.prototype.get=function CZ(n){var e=this.__data__,t=Ep(e,n);return t<0?void 0:e[t][1]},Ya.prototype.has=function SZ(n){return Ep(this.__data__,n)>-1},Ya.prototype.set=function MZ(n,e){var t=this.__data__,r=Ep(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const wp=Ya,lk="object"==typeof global&&global&&global.Object===Object&&global;var HZ="object"==typeof self&&self&&self.Object===Object&&self;const Xa=lk||HZ||Function("return this")();var $Z=Xa.Symbol,uk=Object.prototype,zZ=uk.hasOwnProperty,GZ=uk.toString,Eu=$Z?$Z.toStringTag:void 0;var QZ=Object.prototype.toString;var dk=$Z?$Z.toStringTag:void 0;const Dp=function eee(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":dk&&dk in Object(n)?function qZ(n){var e=zZ.call(n,Eu),t=n[Eu];try{n[Eu]=void 0;var r=!0}catch{}var i=GZ.call(n);return r&&(e?n[Eu]=t:delete n[Eu]),i}(n):function YZ(n){return QZ.call(n)}(n)},Zs=function tee(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},WE=function oee(n){if(!Zs(n))return!1;var e=Dp(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,aee=Xa["__core-js_shared__"],hk=(n=/[^.]+$/.exec(aee&&aee.keys&&aee.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var dee=Function.prototype.toString;var gee=/^\[object .+?Constructor\]$/,bee=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const wee=function Eee(n){return!(!Zs(n)||function cee(n){return!!hk&&hk in n}(n))&&(WE(n)?bee:gee).test(function hee(n){if(null!=n){try{return dee.call(n)}catch{}try{return n+""}catch{}}return""}(n))},QE=function Tee(n,e){var t=function Iee(n,e){return n?.[e]}(n,e);return wee(t)?t:void 0},fk=QE(Xa,"Map"),wu=QE(Object,"create");var Oee=Object.prototype.hasOwnProperty;var Lee=Object.prototype.hasOwnProperty;function Ja(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ja.prototype.clear=function See(){this.__data__=wu?wu(null):{},this.size=0},Ja.prototype.delete=function Mee(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Ja.prototype.get=function kee(n){var e=this.__data__;if(wu){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return Oee.call(e,n)?e[n]:void 0},Ja.prototype.has=function Bee(n){var e=this.__data__;return wu?void 0!==e[n]:Lee.call(e,n)},Ja.prototype.set=function Uee(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=wu&&void 0===e?"__lodash_hash_undefined__":e,this};const pk=Ja,Tp=function Kee(n,e){var t=n.__data__;return function qee(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Za(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Za.prototype.clear=function zee(){this.size=0,this.__data__={hash:new pk,map:new(fk||wp),string:new pk}},Za.prototype.delete=function Qee(n){var e=Tp(this,n).delete(n);return this.size-=e?1:0,e},Za.prototype.get=function Xee(n){return Tp(this,n).get(n)},Za.prototype.has=function Zee(n){return Tp(this,n).has(n)},Za.prototype.set=function tte(n,e){var t=Tp(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const rte=Za;function ec(n){var e=this.__data__=new wp(n);this.size=e.size}ec.prototype.clear=function RZ(){this.__data__=new wp,this.size=0},ec.prototype.delete=function OZ(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},ec.prototype.get=function FZ(n){return this.__data__.get(n)},ec.prototype.has=function LZ(n){return this.__data__.has(n)},ec.prototype.set=function ste(n,e){var t=this.__data__;if(t instanceof wp){var r=t.__data__;if(!fk||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new rte(r)}return t.set(n,e),this.size=t.size,this};const ate=ec;var cte=function(){try{var n=QE(Object,"defineProperty");return n({},"",{}),n}catch{}}();const Cp=cte,YE=function lte(n,e,t){"__proto__"==e&&Cp?Cp(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t},XE=function ute(n,e,t){(void 0!==t&&!bp(n[e],t)||void 0===t&&!(e in n))&&YE(n,e,t)};var hte=function dte(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var c=o[n?a:++i];if(!1===t(s[c],c,s))break}return e}}();const fte=hte;var gk="object"==typeof exports&&exports&&!exports.nodeType&&exports,mk=gk&&"object"==typeof module&&module&&!module.nodeType&&module,_k=mk&&mk.exports===gk?Xa.Buffer:void 0,yk=_k?_k.allocUnsafe:void 0;const vk=Xa.Uint8Array,Ete=function bte(n,e){var t=e?function yte(n){var e=new n.constructor(n.byteLength);return new vk(e).set(new vk(n)),e}(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)};var bk=Object.create,Dte=function(){function n(){}return function(e){if(!Zs(e))return{};if(bk)return bk(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const Tte=Dte;var xte=function Cte(n,e){return function(t){return n(e(t))}}(Object.getPrototypeOf,Object);const Ek=xte;var Ste=Object.prototype;const wk=function Ate(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||Ste)},Iu=function Rte(n){return null!=n&&"object"==typeof n},Ik=function Ote(n){return Iu(n)&&"[object Arguments]"==Dp(n)};var Dk=Object.prototype,kte=Dk.hasOwnProperty,Fte=Dk.propertyIsEnumerable,Vte=Ik(function(){return arguments}())?Ik:function(n){return Iu(n)&&kte.call(n,"callee")&&!Fte.call(n,"callee")};const JE=Vte,ZE=Array.isArray,Tk=function jte(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991},ew=function Hte(n){return null!=n&&Tk(n.length)&&!WE(n)};var Ck="object"==typeof exports&&exports&&!exports.nodeType&&exports,xk=Ck&&"object"==typeof module&&module&&!module.nodeType&&module,Sk=xk&&xk.exports===Ck?Xa.Buffer:void 0;const Ak=(Sk?Sk.isBuffer:void 0)||function zte(){return!1};var Mk=Function.prototype.toString,Jte=Object.prototype.hasOwnProperty,Zte=Mk.call(Object);var We={};We["[object Float32Array]"]=We["[object Float64Array]"]=We["[object Int8Array]"]=We["[object Int16Array]"]=We["[object Int32Array]"]=We["[object Uint8Array]"]=We["[object Uint8ClampedArray]"]=We["[object Uint16Array]"]=We["[object Uint32Array]"]=!0,We["[object Arguments]"]=We["[object Array]"]=We["[object ArrayBuffer]"]=We["[object Boolean]"]=We["[object DataView]"]=We["[object Date]"]=We["[object Error]"]=We["[object Function]"]=We["[object Map]"]=We["[object Number]"]=We["[object Object]"]=We["[object RegExp]"]=We["[object Set]"]=We["[object String]"]=We["[object WeakMap]"]=!1;var Pk="object"==typeof exports&&exports&&!exports.nodeType&&exports,Du=Pk&&"object"==typeof module&&module&&!module.nodeType&&module,tw=Du&&Du.exports===Pk&&lk.process,Pne=function(){try{return Du&&Du.require&&Du.require("util").types||tw&&tw.binding&&tw.binding("util")}catch{}}(),Nk=Pne&&Pne.isTypedArray;const Ok=Nk?function Sne(n){return function(e){return n(e)}}(Nk):function Cne(n){return Iu(n)&&Tk(n.length)&&!!We[Dp(n)]},nw=function Nne(n,e){if(("constructor"!==e||"function"!=typeof n[e])&&"__proto__"!=e)return n[e]};var kne=Object.prototype.hasOwnProperty;const Vne=function Fne(n,e,t){var r=n[e];(!kne.call(n,e)||!bp(r,t)||void 0===t&&!(e in n))&&YE(n,e,t)};var $ne=/^(?:0|[1-9]\d*)$/;const kk=function zne(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&$ne.test(n))&&n>-1&&n%1==0&&n<e};var qne=Object.prototype.hasOwnProperty;const Kne=function Wne(n,e){var t=ZE(n),r=!t&&JE(n),i=!t&&!r&&Ak(n),s=!t&&!r&&!i&&Ok(n),o=t||r||i||s,a=o?function jne(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],c=a.length;for(var l in n)(e||qne.call(n,l))&&(!o||!("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||kk(l,c)))&&a.push(l);return a};var Jne=Object.prototype.hasOwnProperty;const ere=function Zne(n){if(!Zs(n))return function Qne(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=wk(n),t=[];for(var r in n)"constructor"==r&&(e||!Jne.call(n,r))||t.push(r);return t},Fk=function tre(n){return ew(n)?Kne(n,!0):ere(n)},rre=function nre(n){return function Lne(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=r?r(t[a],n[a],a,t,n):void 0;void 0===c&&(c=n[a]),i?YE(t,a,c):Vne(t,a,c)}return t}(n,Fk(n))},sre=function ire(n,e,t,r,i,s,o){var a=nw(n,t),c=nw(e,t),l=o.get(c);if(l)XE(n,t,l);else{var u=s?s(a,c,t+"",n,e,o):void 0,h=void 0===u;if(h){var f=ZE(c),p=!f&&Ak(c),m=!f&&!p&&Ok(c);u=c,f||p||m?ZE(a)?u=a:function Ute(n){return Iu(n)&&ew(n)}(a)?u=function wte(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(a):p?(h=!1,u=function gte(n,e){if(e)return n.slice();var t=n.length,r=yk?yk(t):new n.constructor(t);return n.copy(r),r}(c,!0)):m?(h=!1,u=Ete(c,!0)):u=[]:function ene(n){if(!Iu(n)||"[object Object]"!=Dp(n))return!1;var e=Ek(n);if(null===e)return!0;var t=Jte.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&Mk.call(t)==Zte}(c)||JE(c)?(u=a,JE(a)?u=rre(a):(!Zs(a)||WE(a))&&(u=function Mte(n){return"function"!=typeof n.constructor||wk(n)?{}:Tte(Ek(n))}(c))):h=!1}h&&(o.set(c,u),i(u,c,r,s,o),o.delete(c)),XE(n,t,u)}},ore=function Vk(n,e,t,r,i){n!==e&&fte(e,function(s,o){if(i||(i=new ate),Zs(s))sre(n,e,o,t,Vk,r,i);else{var a=r?r(nw(n,o),s,o+"",n,e,i):void 0;void 0===a&&(a=s),XE(n,o,a)}},Fk)},Lk=function are(n){return n};var Bk=Math.max;const fre=function hre(n){return function(){return n}};var pre=Cp?function(n,e){return Cp(n,"toString",{configurable:!0,enumerable:!1,value:fre(e),writable:!0})}:Lk,yre=Date.now,bre=function vre(n){var e=0,t=0;return function(){var r=yre(),i=16-(r-t);if(t=r,i>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}(pre);const Ere=bre,Ire=function wre(n,e){return Ere(function ure(n,e,t){return e=Bk(void 0===e?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=Bk(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),function cre(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}(n,this,a)}}(n,e,Lk),n+"")};var xre=function Cre(n){return Ire(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&"function"==typeof s?(i--,s):void 0,o&&function Dre(n,e,t){if(!Zs(t))return!1;var r=typeof e;return!!("number"==r?ew(t)&&kk(e,t.length):"string"==r&&e in t)&&bp(t[e],n)}(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}(function(n,e,t){ore(n,e,t)});const Sre=xre,Are=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],Mre={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:n=>Wi(Ki(n.datasetIndex),.4),borderColor:n=>Wi(Ki(n.datasetIndex),1),pointBackgroundColor:n=>Wi(Ki(n.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:n=>Wi(Ki(n.datasetIndex),.6),borderColor:n=>Wi(Ki(n.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:n=>Wi(Ki(n.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:n=>Wi(Ki(n.dataIndex),.6),borderColor:n=>Wi(Ki(n.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Wi(n,e){return"rgba("+n.concat(e).join(",")+")"}function rw(n,e){return Math.floor(Math.random()*(e-n+1))+n}function Ki(n=0){return Are[n]||function Pre(){return[rw(0,255),rw(0,255),rw(0,255)]}()}let jk=(()=>{class n{constructor(){this.generateColors=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();FE.register(..._Z);let Rre=(()=>{class n{constructor(t){t?.plugins&&FE.register(...t.plugins);const r=Sre(t?.generateColors?Mre:{},t?.defaults||{});nt.set(r)}static forRoot(t){return{ngModule:n,providers:[{provide:jk,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(pe(jk,8))}}static{this.\u0275mod=ao({type:n})}static{this.\u0275inj=rs({})}}return n})(),Nre=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ao({type:n,bootstrap:[tK]})}static{this.\u0275inj=rs({imports:[x6,Rre]})}}return n})();T6().bootstrapModule(Nre).catch(n=>console.error(n))}},it=>{it(it.s=344)}]);